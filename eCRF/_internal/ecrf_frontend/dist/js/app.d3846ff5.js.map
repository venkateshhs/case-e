{"version":3,"file":"js/app.d3846ff5.js","mappings":"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","sources":["webpack://ecrf_frontend/./src/assets/styles/icons.js","webpack://ecrf_frontend/./src/App.vue","webpack://ecrf_frontend/./src/App.vue?7ccd","webpack://ecrf_frontend/./src/components/LoginComponent.vue","webpack://ecrf_frontend/./src/components/LoginComponent.vue?29d0","webpack://ecrf_frontend/./src/components/RegistrationComponent.vue","webpack://ecrf_frontend/./src/components/RegistrationComponent.vue?e8e9","webpack://ecrf_frontend/./src/components/DashboardComponent.vue","webpack://ecrf_frontend/./src/components/DashboardComponent.vue?1597","webpack://ecrf_frontend/./src/components/UserInfoComponent.vue","webpack://ecrf_frontend/./src/components/StudySettings.vue","webpack://ecrf_frontend/./src/components/StudySettings.vue?ab7c","webpack://ecrf_frontend/./src/components/UserInfoComponent.vue?7a5a","webpack://ecrf_frontend/./src/components/AnalyticsComponent.vue","webpack://ecrf_frontend/./src/components/AnalyticsComponent.vue?753d","webpack://ecrf_frontend/./src/components/ScratchFormComponent.vue","webpack://ecrf_frontend/./src/components/ShaclComponents.vue","webpack://ecrf_frontend/../shacl-tulip/src/modules/io.js","webpack://ecrf_frontend/../shacl-tulip/src/modules/namespaces.js","webpack://ecrf_frontend/../shacl-tulip/src/modules/utils.js","webpack://ecrf_frontend/../shacl-tulip/src/classes/RdfDataset.js","webpack://ecrf_frontend/../shacl-tulip/src/classes/FormBase.js","webpack://ecrf_frontend/../shacl-tulip/src/classes/ShapesDataset.js","webpack://ecrf_frontend/./src/components/ShaclComponents.vue?2b9c","webpack://ecrf_frontend/./src/components/ProtocolMatrix.vue","webpack://ecrf_frontend/./src/components/FormPreview.vue","webpack://ecrf_frontend/./src/components/forms/BaseTextField.vue","webpack://ecrf_frontend/./src/components/forms/BaseTextField.vue?4334","webpack://ecrf_frontend/./src/components/forms/BaseTextarea.vue","webpack://ecrf_frontend/./src/components/forms/BaseTextarea.vue?cc3a","webpack://ecrf_frontend/./src/components/forms/BaseNumberField.vue","webpack://ecrf_frontend/./src/components/forms/BaseNumberField.vue?40c1","webpack://ecrf_frontend/./src/components/forms/BaseDateField.vue","webpack://ecrf_frontend/./src/components/forms/BaseDateField.vue?7599","webpack://ecrf_frontend/./src/components/forms/BaseSelectField.vue","webpack://ecrf_frontend/./src/components/forms/BaseSelectField.vue?6b47","webpack://ecrf_frontend/./src/components/FormPreview.vue?0f8e","webpack://ecrf_frontend/./src/components/CustomDialog.vue","webpack://ecrf_frontend/./src/components/CustomDialog.vue?f9a9","webpack://ecrf_frontend/./src/components/TemplateDiffView.vue","webpack://ecrf_frontend/./src/components/TemplateDiffView.vue?4aa1","webpack://ecrf_frontend/./src/components/ProtocolMatrix.vue?c47c","webpack://ecrf_frontend/./src/components/FieldConstraintsDialog.vue","webpack://ecrf_frontend/./src/utils/constraints.js","webpack://ecrf_frontend/./src/components/DateFormatPicker.vue","webpack://ecrf_frontend/./src/components/DateFormatPicker.vue?237b","webpack://ecrf_frontend/./src/components/fields/FieldTime.vue","webpack://ecrf_frontend/./src/components/fields/FieldTime.vue?d408","webpack://ecrf_frontend/./src/components/FieldConstraintsDialog.vue?131a","webpack://ecrf_frontend/./src/components/fields/FieldCheckbox.vue","webpack://ecrf_frontend/./src/components/fields/FieldCheckbox.vue?7b68","webpack://ecrf_frontend/./src/components/fields/FieldRadioGroup.vue","webpack://ecrf_frontend/./src/components/fields/FieldRadioGroup.vue?bca8","webpack://ecrf_frontend/./src/components/fields/FieldSlider.vue","webpack://ecrf_frontend/./src/components/fields/FieldSlider.vue?ad98","webpack://ecrf_frontend/./src/components/fields/FieldLinearScale.vue","webpack://ecrf_frontend/./src/components/fields/FieldLinearScale.vue?1a5c","webpack://ecrf_frontend/./src/components/fields/FieldFileUpload.vue","webpack://ecrf_frontend/./src/components/fields/FieldFileUpload.vue?22e1","webpack://ecrf_frontend/./src/components/ScratchFormComponent.vue?43e1","webpack://ecrf_frontend/./src/components/StudyDataEntryComponent.vue","webpack://ecrf_frontend/./src/components/fields/FieldSelect.vue","webpack://ecrf_frontend/./src/components/fields/FieldSelect.vue?12fa","webpack://ecrf_frontend/./src/utils/jsonschemaValidation.js","webpack://ecrf_frontend/./src/components/StudyDataEntryComponent.vue?e0d5","webpack://ecrf_frontend/./src/components/StudyCreationComponent.vue","webpack://ecrf_frontend/./src/components/GroupForm.vue","webpack://ecrf_frontend/./src/components/GroupForm.vue?69d2","webpack://ecrf_frontend/./src/components/VisitForm.vue","webpack://ecrf_frontend/./src/components/VisitForm.vue?7764","webpack://ecrf_frontend/./src/components/SubjectForm.vue","webpack://ecrf_frontend/./src/components/SubjectForm.vue?0e56","webpack://ecrf_frontend/./src/components/SubjectAssignmentForm.vue","webpack://ecrf_frontend/./src/components/SubjectAssignmentForm.vue?641b","webpack://ecrf_frontend/./src/components/StudyCreationComponent.vue?347d","webpack://ecrf_frontend/./src/components/StudyView.vue","webpack://ecrf_frontend/./src/components/StudyAuditLogs.vue","webpack://ecrf_frontend/./src/components/StudyAuditLogs.vue?5b7f","webpack://ecrf_frontend/./src/components/StudyView.vue?4b9b","webpack://ecrf_frontend/./src/router/index.js","webpack://ecrf_frontend/./src/store/index.js","webpack://ecrf_frontend/./src/plugins/format-label.js","webpack://ecrf_frontend/./src/components/forms/index.js","webpack://ecrf_frontend/./src/main.js","webpack://ecrf_frontend/webpack/bootstrap","webpack://ecrf_frontend/webpack/runtime/chunk loaded","webpack://ecrf_frontend/webpack/runtime/compat get default export","webpack://ecrf_frontend/webpack/runtime/define property getters","webpack://ecrf_frontend/webpack/runtime/ensure chunk","webpack://ecrf_frontend/webpack/runtime/get javascript chunk filename","webpack://ecrf_frontend/webpack/runtime/get mini-css chunk filename","webpack://ecrf_frontend/webpack/runtime/global","webpack://ecrf_frontend/webpack/runtime/hasOwnProperty shorthand","webpack://ecrf_frontend/webpack/runtime/load script","webpack://ecrf_frontend/webpack/runtime/make namespace object","webpack://ecrf_frontend/webpack/runtime/publicPath","webpack://ecrf_frontend/webpack/runtime/css loading","webpack://ecrf_frontend/webpack/runtime/jsonp chunk loading","webpack://ecrf_frontend/webpack/startup"],"sourcesContent":["export default {\n  edit: \"fas fa-edit\",\n  add: \"fas fa-plus\",\n  copy: \"fas fa-copy\",\n  delete: \"fas fa-trash\",\n  toggleUp: \"fas fa-angle-up\",\n  toggleDown: \"fas fa-angle-down\",\n  back: \"fas fa-arrow-left\",\n  prev: \"fas fa-chevron-left\",\n  next: \"fas fa-chevron-right\",\n  cog: \"fas fa-cog\",\n  book: \"fas fa-book\",\n  user: \"fas fa-user\",\n  arrowLeft: \"fas fa-arrow-left\",\n  share:\"fas fa-share-alt\",\n  export: \"fas fa-file-export\",\n  info: \"fas fa-question-circle\",\n  demographicinformation: \"fas fa-id-card\",\n  contactinformation: 'fas fa-address-book',\n  reproductivehealth: 'fas fa-baby',\n  presentingcomplaint: 'fas fa-comment-medical',\n  vitalsignsandmeasurements: 'fas fa-heartbeat',\n  physicalexamination: 'fas fa-stethoscope',\n  medicalhistory: 'fas fa-notes-medical',\n  familyhistory: 'fas fa-dna',\n  socialhistory: 'fas fa-users',\n  allergies: 'fas fa-allergies',\n  immunizationhistory: 'fas fa-syringe',\n  medications: 'fas fa-prescription-bottle',\n  laboratorytestshematology: 'fas fa-vial',\n  laboratorytestsbiochemistry: 'fas fa-flask',\n  laboratorytestsurinalysis: 'fas fa-prescription-bottle',\n  imaging: 'fas fa-x-ray',\n  diagnosis: 'fas fa-diagnoses',\n  treatmentplan: 'fas fa-briefcase-medical',\n  adverseevents: 'fas fa-exclamation-triangle',\n  outcomeandfollowup: 'fas fa-clipboard-check',\n  additionalinformation: 'fas fa-comment-dots',\n  clock: \"fas fa-clock\",\n  paperclip: 'fas fa-paperclip',\n  link: 'fas fa-link',\n  trash: 'fas fa-trash',\n  infoCircle:     \"fas fa-info-circle\",\n  minus:          \"fas fa-minus\",\n  pen:            \"fas fa-pen\",\n  cogs:           \"fas fa-cogs\",\n  exchangeAlt:    \"fas fa-exchange-alt\",\n  toggleOn:       \"fas fa-toggle-on\",\n  toggleOff:      \"fas fa-toggle-off\",\n  check:          \"fas fa-check\",\n  times:          \"fas fa-times\"\n\n\n};","<template>\n  <div id=\"app\">\n    <router-view />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"App\",\n};\n</script>\n","import { render } from \"./App.vue?vue&type=template&id=190b1964\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"login-page\">\n    <div class=\"login-container\">\n      <div class=\"logo-container\">\n        <img src=\"../assets/logo.png\" alt=\"Logo\" class=\"logo\" />\n      </div>\n      <h1>Login</h1>\n      <form @submit.prevent=\"handleLogin\" class=\"login-form\">\n        <div class=\"form-group\">\n          <label for=\"username\">Username</label>\n          <input type=\"text\" id=\"username\" v-model=\"username\" placeholder=\"Enter your username\" />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"password\">Password</label>\n          <div class=\"password-wrapper\">\n            <input :type=\"showPassword ? 'text' : 'password'\" id=\"password\" v-model=\"password\" placeholder=\"Enter your password\" />\n            <button type=\"button\" class=\"toggle-password\" @click=\"togglePasswordVisibility\">\n              {{ showPassword ? \"Hide\" : \"Show\" }}\n            </button>\n          </div>\n        </div>\n        <button type=\"submit\" class=\"btn-login\">Login</button>\n      </form>\n      <p>\n        New user? <router-link to=\"/register\" class=\"register-link\">Register here</router-link>\n      </p>\n      <p v-if=\"error\" class=\"error\">{{ error }}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"LoginComponent\",\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      showPassword: false, // Added for toggling password visibility\n      error: null,\n    };\n  },\n  methods: {\n    togglePasswordVisibility() {\n      this.showPassword = !this.showPassword; // Toggle password visibility\n    },\n        async handleLogin() {\n      this.error = null;\n      console.log(\"Attempting login with username:\", this.username);\n\n      try {\n        const success = await this.$store.dispatch(\"login\", {\n          username: this.username,\n          password: this.password,\n        });\n\n        if (success) {\n          console.log(\"Login successful, redirecting to dashboard...\");\n          this.$router.push(\"/dashboard\");\n        } else {\n          console.log(\"Login failed: invalid credentials\");\n          this.error = \"Invalid username or password.\";\n        }\n      } catch (error) {\n        console.error(\"Login error:\", error);\n\n        if (error.response && error.response.status) {\n          const { status, data } = error.response;\n          if (status === 403) {\n            this.error =\n              \"Your account does not have permission to access this application.\";\n          } else if (status === 400) {\n            this.error = \"Invalid username or password.\";\n          } else {\n            this.error = data?.detail || \"An unexpected error occurred. Please try again.\";\n          }\n        } else {\n          this.error = \"Unable to reach server. Please try again.\";\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* General Styling */\n.login-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background-color: #f4f4f9;\n  font-family: Arial, sans-serif;\n}\n\n.login-container {\n  width: 400px;\n  padding: 30px;\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n  text-align: center;\n}\n\n/* Logo Styling */\n.logo-container {\n  text-align: left;\n  margin-bottom: 20px;\n}\n\n.logo {\n  width: 120px;\n  height: auto;\n}\n\n/* Form Styling */\n.login-form .form-group {\n  margin-bottom: 20px;\n  text-align: left;\n}\n\nlabel {\n  display: block;\n  font-size: 14px;\n  color: #555;\n  margin-bottom: 5px;\n}\n\ninput {\n  width: 100%;\n  padding: 10px;\n  font-size: 14px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  box-sizing: border-box;\n}\n\ninput:focus {\n  border-color: #007bff;\n  outline: none;\n}\n\n/* Password Wrapper Styling */\n.password-wrapper {\n  display: flex;\n  align-items: center;\n}\n\n.toggle-password {\n  margin-left: 10px;\n  background: none;\n  border: none;\n  color: #007bff;\n  cursor: pointer;\n  font-size: 14px;\n}\n\n.toggle-password:hover {\n  text-decoration: underline;\n}\n\n/* Button Styling */\n.btn-login {\n  width: 100%;\n  padding: 10px;\n  font-size: 16px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.btn-login:hover {\n  background-color: #0056b3;\n}\n\n/* Links */\n.register-link {\n  color: #007bff;\n  text-decoration: none;\n}\n\n.register-link:hover {\n  text-decoration: underline;\n}\n\n/* Error Message */\n.error {\n  margin-top: 10px;\n  color: red;\n  font-size: 14px;\n}\n</style>\n","import { render } from \"./LoginComponent.vue?vue&type=template&id=69489650&scoped=true\"\nimport script from \"./LoginComponent.vue?vue&type=script&lang=js\"\nexport * from \"./LoginComponent.vue?vue&type=script&lang=js\"\n\nimport \"./LoginComponent.vue?vue&type=style&index=0&id=69489650&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-69489650\"]])\n\nexport default __exports__","<template>\n  <div class=\"registration-page\">\n    <div class=\"registration-container\">\n      <div class=\"logo-container\">\n        <img src=\"../assets/logo.png\" alt=\"Logo\" class=\"logo\" />\n      </div>\n      <h1>Register</h1>\n      <form @submit.prevent=\"handleRegistration\" class=\"registration-form\">\n        <div :class=\"['form-group', { 'error-group': errors.first_name }]\">\n          <label for=\"first_name\">First Name<span class=\"mandatory\">*</span></label>\n          <input\n            type=\"text\"\n            id=\"first_name\"\n            v-model=\"first_name\"\n            placeholder=\"Enter your first name\"\n          />\n        </div>\n        <div :class=\"['form-group', { 'error-group': errors.last_name }]\">\n          <label for=\"last_name\">Last Name<span class=\"mandatory\">*</span></label>\n          <input\n            type=\"text\"\n            id=\"last_name\"\n            v-model=\"last_name\"\n            placeholder=\"Enter your last name\"\n          />\n        </div>\n        <div :class=\"['form-group', { 'error-group': errors.email }]\">\n          <label for=\"email\">Email<span class=\"mandatory\">*</span></label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            v-model=\"email\"\n            placeholder=\"Enter your email\"\n          />\n        </div>\n        <div :class=\"['form-group', { 'error-group': errors.username }]\">\n          <label for=\"username\">Username<span class=\"mandatory\">*</span></label>\n          <input\n            type=\"text\"\n            id=\"username\"\n            v-model=\"username\"\n            placeholder=\"Choose a username\"\n          />\n        </div>\n        <div :class=\"['form-group', { 'error-group': errors.password }]\">\n          <label for=\"password\">Password<span class=\"mandatory\">*</span></label>\n          <div class=\"password-wrapper\">\n            <input\n              :type=\"showPassword ? 'text' : 'password'\"\n              id=\"password\"\n              v-model=\"password\"\n              placeholder=\"Create a password\"\n            />\n            <button type=\"button\" class=\"toggle-password\" @click=\"togglePasswordVisibility\">\n              {{ showPassword ? \"Hide\" : \"Show\" }}\n            </button>\n          </div>\n          <p class=\"password-hint\">Password must be at least 8 characters, include a number, and a special character.</p>\n        </div>\n        <div :class=\"['form-group', { 'error-group': errors.confirm_password }]\">\n          <label for=\"confirm_password\">Confirm Password<span class=\"mandatory\">*</span></label>\n          <input\n            type=\"password\"\n            id=\"confirm_password\"\n            v-model=\"confirm_password\"\n            placeholder=\"Confirm your password\"\n          />\n        </div>\n        <button type=\"submit\" class=\"btn-register\">Register</button>\n      </form>\n      <p v-if=\"message\" class=\"success\">{{ message }}</p>\n      <p v-if=\"error\" class=\"error\">{{ error }}</p>\n      <button class=\"btn-login-link\" @click=\"goToLogin\">Already have an account? Login</button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"RegistrationComponent\",\n  data() {\n    return {\n      first_name: \"\",\n      last_name: \"\",\n      email: \"\",\n      username: \"\",\n      password: \"\",\n      confirm_password: \"\",\n      message: null,\n      error: null,\n      showPassword: false,\n      errors: {\n        first_name: false,\n        last_name: false,\n        email: false,\n        username: false,\n        password: false,\n        confirm_password: false,\n      },\n    };\n  },\n  methods: {\n    togglePasswordVisibility() {\n      this.showPassword = !this.showPassword;\n    },\n    validatePassword(password) {\n      const passwordRegex = /^(?=.*[0-9])(?=.*[!@#$%^&*])[A-Za-z\\d!@#$%^&*]{8,}$/;\n      return passwordRegex.test(password);\n    },\n    handleValidation() {\n      // Reset all errors\n      this.errors = {\n        first_name: !this.first_name.trim(),\n        last_name: !this.last_name.trim(),\n        email: !this.email.trim(),\n        username: !this.username.trim(),\n        password: !this.validatePassword(this.password),\n        confirm_password: !this.confirm_password.trim() || this.password !== this.confirm_password,\n      };\n\n      // Return true if no errors\n      return !Object.values(this.errors).some((hasError) => hasError);\n    },\n    async handleRegistration() {\n      this.error = null;\n  this.message = null;\n\n  try {\n    const success = await this.$store.dispatch(\"register\", {\n      first_name: this.first_name,\n      last_name: this.last_name,\n      email: this.email,\n      username: this.username,\n      password: this.password,\n    });\n\n    if (success) {\n      this.message = \"Registration successful! Redirecting to login...\";\n      setTimeout(() => {\n        this.$router.push(\"/\");\n      }, 2000);\n    }\n  } catch (err) {\n    // Display user-friendly error messages\n    this.error = err.message || \"An error occurred during registration.\";\n\n}\n    },\n    goToLogin() {\n      this.$router.push(\"/\");\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* General Reset */\n.registration-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background-color: #f4f4f9;\n  font-family: Arial, sans-serif;\n}\n\n.registration-container {\n  width: 450px;\n  padding: 30px;\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n  text-align: center;\n}\n\n/* Logo Styling */\n.logo-container {\n  text-align: left;\n  margin-bottom: 20px;\n}\n\n.logo {\n  width: 120px;\n  height: auto;\n}\n\n/* Form Styling */\n.registration-form .form-group {\n  margin-bottom: 20px;\n  text-align: left;\n}\n\nlabel {\n  display: block;\n  font-size: 14px;\n  color: #555;\n  margin-bottom: 5px;\n}\n\ninput {\n  width: 100%;\n  padding: 10px;\n  font-size: 14px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  box-sizing: border-box;\n}\n\ninput:focus {\n  border-color: #007bff;\n  outline: none;\n}\n\n.password-wrapper {\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.toggle-password {\n  margin-left: 10px;\n  background: none;\n  border: none;\n  color: #007bff;\n  cursor: pointer;\n  font-size: 14px;\n}\n\n.toggle-password:hover {\n  text-decoration: underline;\n}\n\n.password-hint {\n  font-size: 12px;\n  color: #777;\n  margin-top: 5px;\n}\n\n/* Error Highlighting */\n.error-group input {\n  border-color: red;\n}\n\n.error-group label {\n  color: red;\n}\n\n/* Mandatory Fields */\n.mandatory {\n  color: red;\n  font-size: 14px;\n  margin-left: 5px;\n}\n\n/* Button Styling */\n.btn-register {\n  width: 100%;\n  padding: 10px;\n  font-size: 16px;\n  background-color: #28a745;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.btn-register:hover {\n  background-color: #218838;\n}\n\n.btn-login-link {\n  margin-top: 20px;\n  padding: 10px;\n  font-size: 14px;\n  background: none;\n  border: 1px solid #007bff;\n  color: #007bff;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.btn-login-link:hover {\n  background: #007bff;\n  color: white;\n}\n\n/* Success Message */\n.success {\n  margin-top: 15px;\n  color: #28a745;\n  font-size: 14px;\n}\n\n/* Error Message */\n.error {\n  margin-top: 15px;\n  color: red;\n  font-size: 14px;\n}\n</style>\n","import { render } from \"./RegistrationComponent.vue?vue&type=template&id=9a81b372&scoped=true\"\nimport script from \"./RegistrationComponent.vue?vue&type=script&lang=js\"\nexport * from \"./RegistrationComponent.vue?vue&type=script&lang=js\"\n\nimport \"./RegistrationComponent.vue?vue&type=style&index=0&id=9a81b372&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9a81b372\"]])\n\nexport default __exports__","<template>\n  <div class=\"dashboard-layout\">\n    <!-- Header -->\n    <header class=\"dashboard-header\">\n      <div class=\"logo-container\">\n        <img src=\"../assets/logo.png\" alt=\"Logo\" class=\"logo\" />\n      </div>\n\n      <div class=\"user-actions\">\n        <div class=\"user-identity\">\n          <div class=\"user-name\" :title=\"userName\">{{ userName }}</div>\n          <div class=\"user-role\" :title=\"role || ''\">{{ role || '' }}</div>\n        </div>\n        <button @click=\"logout\" class=\"btn-minimal\">Logout</button>\n      </div>\n    </header>\n\n    <!-- Sidebar -->\n    <aside :class=\"['dashboard-sidebar', { collapsed: sidebarCollapsed }]\">\n      <button class=\"hamburger-menu\" @click=\"toggleSidebar\">\n        <span></span>\n        <span></span>\n        <span></span>\n      </button>\n      <nav>\n        <ul>\n          <!-- Study Management: only Admin, PI or Investigator -->\n          <li\n            v-if=\"isAdmin || isPI || isInvestigator\"\n            @click=\"setActiveSection('study-management')\"\n            class=\"nav-item\"\n          >\n            <i :class=\"icons.book\" v-if=\"sidebarCollapsed\"></i>\n            <span v-if=\"!sidebarCollapsed\">Study Management</span>\n          </li>\n          <!-- User Management: visible to all roles -->\n          <li\n            @click=\"() => { setActiveSection(''); navigate('/dashboard/user-info') }\"\n            class=\"nav-item\"\n          >\n            <i :class=\"icons.user\" v-if=\"sidebarCollapsed\"></i>\n            <span v-if=\"!sidebarCollapsed\">User Management</span>\n          </li>\n        </ul>\n      </nav>\n    </aside>\n\n    <!-- Main Content -->\n    <main :class=\"['dashboard-main', { expanded: sidebarCollapsed }]\">\n      <div v-if=\"$route.name === 'Dashboard' && activeSection === 'study-management'\">\n        <!-- Centered Heading + Subtitle -->\n        <div class=\"study-management-header\">\n          <h1 class=\"study-management-title\">Study Management</h1>\n          <p class=\"study-management-subtitle\">\n            Create a new study or open an existing one to manage and collect data.\n          </p>\n        </div>\n\n        <!-- Primary Actions (hidden when showing Existing Studies) -->\n        <div v-if=\"!showStudyOptions\">\n          <!-- STYLE 1: Large Cards (default) -->\n          <div v-if=\"actionStyle === 'cards'\" class=\"primary-actions-cards\">\n            <button\n              v-if=\"isAdmin || isPI\"\n              class=\"action-card\"\n              @click=\"navigate('/dashboard/create-study')\"\n            >\n              <span class=\"action-card-title\">Create Study</span>\n              <span class=\"action-card-desc\">Start a new protocol and forms</span>\n            </button>\n\n            <button\n              v-if=\"isAdmin || isPI || isInvestigator\"\n              class=\"action-card\"\n              @click=\"toggleStudyOptions\"\n            >\n              <span class=\"action-card-title\">Open Existing Study</span>\n              <span class=\"action-card-desc\">Continue work on an existing study</span>\n            </button>\n            <button\n              v-if=\"isAdmin || isPI || isInvestigator\"\n              class=\"action-card\"\n              @click=\"navigate('/dashboard/import-study')\"\n            >\n              <span class=\"action-card-title\">Import Study</span>\n              <span class=\"action-card-desc\">Ingest from CSV/Excel</span>\n            </button>\n          </div>\n\n          <!-- STYLE 2: Wide Buttons -->\n          <div v-else class=\"button-container\">\n            <button\n              v-if=\"isAdmin || isPI\"\n              @click=\"navigate('/dashboard/create-study')\"\n              class=\"btn-primary\"\n            >\n              Create Study\n            </button>\n\n            <button\n              v-if=\"isAdmin || isPI || isInvestigator\"\n              @click=\"toggleStudyOptions\"\n              class=\"btn-primary\"\n            >\n              Open Existing Study\n            </button>\n            <button\n              v-if=\"isAdmin || isPI || isInvestigator\"\n              @click=\"navigate('/dashboard/import-study')\"\n              class=\"btn-primary\"\n            >\n              Import Study\n            </button>\n          </div>\n        </div>\n\n        <!-- Study Dashboard Table -->\n        <div v-if=\"showStudyOptions\" class=\"study-dashboard\">\n          <div class=\"back-header-row\">\n            <div class=\"back-button-container\">\n              <button @click=\"toggleStudyOptions\" class=\"btn-minimal\">Back</button>\n            </div>\n            <h2 class=\"existing-studies-title\">Existing Studies</h2>\n          </div>\n\n          <table class=\"study-table\">\n            <thead>\n              <tr>\n                <th>Study Name</th>\n                <th>Description</th>\n                <th>Created At</th>\n                <th>Updated At</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"study in studies\" :key=\"study.id\">\n                <td>{{ study.study_name }}</td>\n                <td>{{ study.study_description }}</td>\n                <td>{{ formatDateTime(study.created_at) }}</td>\n                <td>{{ formatDateTime(study.updated_at) }}</td>\n                <td>\n                  <div class=\"action-buttons\">\n                    <!-- Removed Edit Study from dashboard per request -->\n                    <!-- Add Data: Admin, PI, Investigator -->\n                    <button\n                      v-if=\"isAdmin || isPI || isInvestigator\"\n                      @click=\"addData(study)\"\n                      class=\"btn-minimal btn-equal\"\n                    >\n                      Add Data\n                    </button>\n                    <button\n                      v-if=\"isAdmin || isPI || isInvestigator\"\n                      @click=\"viewStudy(study)\"\n                      class=\"btn-minimal btn-equal\"\n                    >\n                      View Study\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <router-view/>\n    </main>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport icons from \"@/assets/styles/icons\";\n\nexport default {\n  name: \"DashboardComponent\",\n  data() {\n    return {\n      sidebarCollapsed: false,\n      activeSection: \"study-management\",\n      showStudyOptions: false,\n      studies: [],\n      icons,\n      // Toggle primary action style: 'cards' or 'buttons'\n      actionStyle: 'cards',\n    };\n  },\n  watch: {\n    '$route.query.openStudies'(val) {\n      if (val === 'true') {\n        this.activeSection = 'study-management';\n        this.showStudyOptions = true;\n        this.loadStudies();\n      } else {\n        this.activeSection = 'study-management';\n        this.showStudyOptions = false;\n      }\n    }\n  },\n  computed: {\n    currentUser() {\n      return this.$store.getters.getUser || {};\n    },\n    role() {\n      return this.currentUser.profile?.role || \"\";\n    },\n    // Graceful username fallback chain\n    userName() {\n      const p = this.currentUser.profile || {};\n      const firstLast =\n        [p.first_name, p.last_name].filter(Boolean).join(\" \").trim();\n      return (\n        p.name ||\n        p.full_name ||\n        firstLast ||\n        this.currentUser.username ||\n        this.currentUser.email ||\n        \"User\"\n      );\n    },\n    isAdmin() {\n      return this.role === \"Administrator\";\n    },\n    isPI() {\n      return this.role === \"Principal Investigator\";\n    },\n    isInvestigator() {\n      return this.role === \"Investigator\";\n    },\n  },\n  methods: {\n    toggleSidebar() {\n      this.sidebarCollapsed = !this.sidebarCollapsed;\n    },\n    async setActiveSection(section) {\n      await this.$router.push({ name: \"Dashboard\" });\n      this.activeSection = section;\n      this.showStudyOptions = false;\n    },\n    toggleStudyOptions() {\n      this.showStudyOptions = !this.showStudyOptions;\n      if (this.showStudyOptions) {\n        this.$router.push({ name: \"Dashboard\", query: { openStudies: \"true\" } });\n        this.loadStudies();\n      } else {\n        this.$router.push({ name: \"Dashboard\", query: { openStudies: \"false\" } });\n      }\n    },\n    async loadStudies() {\n      const token = this.$store.state.token;\n      if (!token) {\n        alert(\"Please log in again.\");\n        return this.$router.push(\"/login\");\n      }\n      try {\n        const { data } = await axios.get(\"/forms/studies\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        console.log('Fetched studies:', JSON.stringify(data, null, 2));\n        this.studies = data;\n      } catch (e) {\n        console.error('Failed to load studies:', e);\n        console.log('Error details:', e.response?.data || e.message);\n        if (e.response?.status === 401) {\n          alert(\"Session expired.\");\n          this.$router.push(\"/login\");\n        } else {\n          alert(\"Failed to load studies.\");\n        }\n      }\n    },\n    formatDateTime(d) {\n      if (!d) return \"\";\n      return new Date(d).toLocaleString(\"en-GB\", {\n        year: \"numeric\", month: \"short\", day: \"numeric\",\n        hour: \"2-digit\", minute: \"2-digit\", second: \"2-digit\",\n      });\n    },\n    // Keeping editStudy method for compatibility, but no button on dashboard\n    async editStudy(study) {\n      localStorage.removeItem(\"setStudyDetails\");\n      localStorage.removeItem(\"scratchForms\");\n      const token = this.$store.state.token;\n      if (!token) {\n        alert(\"Please log in again.\");\n        return;\n      }\n      try {\n        const resp = await axios.get(\n          `/forms/studies/${study.id}`,\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n        console.log('Fetched study details:', JSON.stringify(resp.data, null, 2));\n        const sd = resp.data.content?.study_data;\n        const meta = resp.data.metadata || {};\n        if (!sd) {\n          console.error('Study content is empty');\n          alert(\"Study content is empty.\");\n          return;\n        }\n\n        // Initialize assignments\n        let assignments = Array.isArray(sd.assignments) ? sd.assignments : [];\n        if (!assignments.length && sd.selectedModels?.length) {\n          console.warn('Assignments missing in backend response, initializing empty assignments');\n          const m = sd.selectedModels.length;\n          const v = sd.visits?.length || 0;\n          const g = sd.groups?.length || 0;\n          assignments = Array.from({ length: m }, () =>\n            Array.from({ length: v }, () =>\n              Array.from({ length: g }, () => false)\n            )\n          );\n        }\n        console.log('Loaded assignments from backend:', JSON.stringify(assignments, null, 2));\n\n        const studyInfo = {\n          id: meta.id,\n          name: meta.study_name,\n          description: meta.study_description,\n          created_at: meta.created_at,\n          updated_at: meta.updated_at,\n          created_by: meta.created_by\n        };\n\n        this.$store.commit(\"setStudyDetails\", {\n          study_metadata: studyInfo,\n          study: { id: meta.id, ...sd.study },\n          groups: sd.groups || [],\n          visits: sd.visits || [],\n          subjectCount: sd.subjectCount || 0,\n          assignmentMethod: sd.assignmentMethod || 'random',\n          subjects: sd.subjects || [],\n          assignments: assignments,\n          forms: sd.selectedModels ? [{\n            sections: sd.selectedModels.map(model => ({\n              title: model.title,\n              fields: model.fields,\n              source: 'template'\n            }))\n          }] : []\n        });\n\n        if (sd.selectedModels) {\n          const scratchForms = [{\n            sections: sd.selectedModels.map(model => ({\n              title: model.title,\n              fields: model.fields,\n              source: 'template'\n            }))\n          }];\n          localStorage.setItem(\"scratchForms\", JSON.stringify(scratchForms));\n        }\n\n        this.activeSection = \"\";\n        this.$router.push({ name: \"CreateStudy\", params: { id: study.id } });\n      } catch (e) {\n        console.error('Failed to load study details:', e);\n        console.log('Error details:', e.response?.data || e.message);\n        alert(\"Failed to load study details.\");\n      }\n    },\n    addData(study) {\n      this.$router.push({ name: \"StudyDetail\", params: { id: study.id } });\n    },\n    viewStudy(study) {\n      this.$router.push({ name: \"StudyView\", params: { id: study.id } });\n    },\n    navigate(to) {\n      this.activeSection = \"\";\n      this.$router.push(to);\n    },\n    logout() {\n      this.$store.commit(\"setUser\", null);\n      this.$store.commit(\"setToken\", null);\n      this.$router.push(\"/login\");\n    },\n  },\n  mounted() {\n    if (this.$route.path === \"/dashboard\") {\n      this.activeSection = \"study-management\";\n      this.showStudyOptions = false;\n    }\n    if (this.$route.query.openStudies === 'true') {\n      this.activeSection = 'study-management';\n      this.showStudyOptions = true;\n      this.loadStudies();\n    }\n  },\n};\n</script>\n\n<style scoped>\n.dashboard-layout {\n  display: grid;\n  grid-template-areas:\n    \"header header\"\n    \"sidebar main\";\n  grid-template-rows: 70px 1fr;\n  grid-template-columns: 220px 1fr;\n  height: 100vh;\n  font-family: \"Inter\", sans-serif;\n  transition: grid-template-columns 0.3s ease;\n}\n\n.dashboard-header {\n  grid-area: header;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 20px;\n  background: #f5f5f5;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.logo-container img {\n  width: 110px;\n}\n\n/* User area */\n.user-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.user-identity {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  line-height: 1.2;\n}\n\n.user-name {\n  font-weight: 600;\n  font-size: 14px;\n  color: #222;\n  max-width: 260px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.user-role {\n  font-size: 12px;\n  color: #666;\n}\n\n.user-actions .btn-minimal {\n  background: none;\n  border: 1px solid #e0e0e0;\n  font-size: 14px;\n  color: #555;\n  cursor: pointer;\n  padding: 8px 12px;\n  border-radius: 6px;\n  transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease;\n}\n\n.user-actions .btn-minimal:hover {\n  background: #eaeaea;\n  color: #000;\n  border-color: #d6d6d6;\n}\n\n/* Sidebar */\n.dashboard-sidebar {\n  grid-area: sidebar;\n  background: #f9f9f9;\n  padding: 20px;\n  border-right: 1px solid #e0e0e0;\n  transition: width 0.3s ease, padding 0.3s ease;\n}\n\n.dashboard-sidebar.collapsed {\n  width: 70px;\n  padding: 10px;\n}\n\n.hamburger-menu {\n  background: none;\n  border: none;\n  padding: 10px;\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n}\n\n.hamburger-menu span {\n  display: block;\n  width: 20px;\n  height: 2px;\n  background: #333;\n  transition: all 0.3s ease;\n}\n\n.hamburger-menu:hover span {\n  background: #000;\n}\n\n/* Sidebar Navigation */\n.dashboard-sidebar nav ul {\n  list-style: none;\n  padding: 0;\n}\n\n.nav-item {\n  padding: 10px;\n  font-size: 15px;\n  color: #555;\n  cursor: pointer;\n  border-radius: 6px;\n  transition: background 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.nav-item:hover {\n  background: #e8e8e8;\n}\n\n/* Main Content */\n.dashboard-main {\n  grid-area: main;\n  padding: 30px;\n  background: #fff;\n  transition: margin-left 0.3s ease;\n}\n\n.dashboard-main.expanded {\n  margin-left: -150px;\n}\n\n/* Study Management Heading + Subtitle (centered) */\n.study-management-header {\n  text-align: center;\n  margin-bottom: 18px;\n}\n\n.study-management-title {\n  margin: 0 0 6px 0;\n  color: #333;\n}\n\n.study-management-subtitle {\n  margin: 0 auto;\n  color: #666;\n  font-size: 14px;\n}\n\n/* Primary Actions  Style 1: Cards */\n.primary-actions-cards {\n  display: grid;\n  grid-template-columns: repeat(2, minmax(260px, 360px));\n  justify-content: center; /* center the grid */\n  gap: 18px;\n  margin-top: 20px;\n}\n\n.action-card {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  padding: 18px 20px;\n  background: #fafafa;\n  border: 1px solid #e3e3e3;\n  border-radius: 12px;\n  cursor: pointer;\n  text-align: left;\n  transition: transform 0.06s ease, box-shadow 0.2s ease, border-color 0.2s ease, background 0.2s ease;\n}\n\n.action-card:hover {\n  background: #f5f5f5;\n  border-color: #dcdcdc;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.06);\n}\n\n.action-card:active {\n  transform: translateY(1px);\n}\n\n.action-card-title {\n  font-size: 16px;\n  font-weight: 600;\n  color: #222;\n}\n\n.action-card-desc {\n  font-size: 13px;\n  color: #666;\n}\n\n/* Primary Actions  Style 2: Wide Buttons */\n.button-container {\n  display: flex;\n  gap: 16px;\n  margin-top: 20px;\n  justify-content: center;   /* centered horizontally */\n  flex-wrap: wrap;\n}\n\n.btn-primary {\n  min-width: 260px;            /* elongated */\n  padding: 14px 24px;\n  background: #2f6fed;\n  border: 1px solid #245fe0;\n  border-radius: 10px;\n  font-size: 16px;\n  color: #fff;\n  cursor: pointer;\n  transition: background 0.15s ease, transform 0.02s ease, box-shadow 0.2s ease;\n}\n\n.btn-primary:hover {\n  background: #285fce;\n  box-shadow: 0 2px 10px rgba(47,111,237,0.25);\n}\n\n.btn-primary:active {\n  transform: translateY(1px);\n}\n\n/* Study Dashboard Styles */\n.study-dashboard {\n  margin-top: 22px;\n}\n\n/* Back + centered title row */\n.back-header-row {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center; /* centers the title regardless of back width */\n  min-height: 42px;\n  margin-bottom: 12px;\n}\n\n.back-button-container {\n  position: absolute;\n  left: 0;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.existing-studies-title {\n  margin: 0;\n  font-size: 20px;\n  color: #333;\n  text-align: center; /* ensure centered text */\n}\n\n/* Table */\n.study-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-bottom: 15px;\n}\n\n.study-table th,\n.study-table td {\n  padding: 12px;\n  text-align: left;\n  border-bottom: 1px solid #e8e8e8;\n}\n\n/* Uniform text color for all data cells */\n.study-table td {\n  color: #333;\n}\n\n.study-table th {\n  background: #f5f5f5;\n  font-weight: 600;\n  color: #555;\n}\n\n.study-table tr:hover {\n  background-color: #f9f9f9;\n}\n\n/* Action Buttons in table */\n.action-buttons {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n/* Minimalistic Button Style */\n.btn-minimal {\n  background: none;\n  border: 1px solid #e0e0e0;\n  border-radius: 6px;\n  padding: 8px 12px;\n  font-size: 14px;\n  color: #555;\n  cursor: pointer;\n  transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.btn-minimal:hover {\n  background: #e8e8e8;\n  color: #000;\n  border-color: #d6d6d6;\n}\n\n/* Responsive */\n@media (max-width: 900px) {\n  .primary-actions-cards {\n    grid-template-columns: minmax(260px, 1fr);\n  }\n}\n.action-buttons .btn-equal {\n  min-width: 130px;\n  justify-content: center;\n  text-align: center;\n}\n@media (max-width: 768px) {\n  .dashboard-layout {\n    grid-template-columns: 70px 1fr;\n  }\n  .dashboard-sidebar {\n    width: 70px;\n  }\n  .dashboard-main {\n    padding: 20px;\n  }\n  .user-name {\n    max-width: 160px;\n  }\n\n}\n</style>\n","import { render } from \"./DashboardComponent.vue?vue&type=template&id=333e5541&scoped=true\"\nimport script from \"./DashboardComponent.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardComponent.vue?vue&type=script&lang=js\"\n\nimport \"./DashboardComponent.vue?vue&type=style&index=0&id=333e5541&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-333e5541\"]])\n\nexport default __exports__","<template>\n  <div class=\"user-info-container\">\n    <!--  Tabs  -->\n    <div class=\"tabs\">\n      <button\n        v-for=\"tab in visibleTabs\"\n        :key=\"tab.key\"\n        :class=\"['tab-button', { active: currentTab === tab.key }]\"\n        @click=\"currentTab = tab.key\"\n      >\n        {{ tab.label }}\n      </button>\n    </div>\n\n    <div class=\"tab-content\">\n      <!-- PROFILE TAB -->\n      <section v-if=\"currentTab === 'profile'\" class=\"profile-section\">\n        <h2>Profile</h2>\n        <div class=\"user-details\">\n          <p><strong>Username:</strong> {{ user.username }}</p>\n          <p><strong>First Name:</strong> {{ user.profile.first_name }}</p>\n          <p><strong>Last Name:</strong> {{ user.profile.last_name }}</p>\n          <p><strong>Email:</strong> {{ user.email }}</p>\n        </div>\n      </section>\n\n      <!-- STUDY SETTINGS TAB -->\n      <!-- only render this section if currentTab==='settings' AND (isAdmin||isPI) -->\n        <section\n          v-else-if=\"currentTab === 'settings' && (isAdmin || isPI)\"\n          class=\"settings-section\"\n        >\n          <StudySettings />\n        </section>\n\n\n      <!-- CHANGE PASSWORD TAB -->\n      <section v-else-if=\"currentTab === 'password'\" class=\"password-section\">\n        <h2>Change Password</h2>\n        <form @submit.prevent=\"handleChangePassword\" class=\"password-form\">\n          <div class=\"form-group\">\n            <label for=\"new_password\">New Password</label>\n            <div class=\"password-wrapper\">\n              <input\n                :type=\"showPassword ? 'text' : 'password'\"\n                id=\"new_password\"\n                v-model=\"newPassword\"\n                placeholder=\"At least 8 chars, number & special\"\n                required\n              />\n              <button\n                type=\"button\"\n                class=\"toggle-password\"\n                @click=\"togglePasswordVisibility\"\n              >\n                {{ showPassword ? \"Hide\" : \"Show\" }}\n              </button>\n            </div>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"confirm_password\">Confirm Password</label>\n            <input\n              :type=\"showPassword ? 'text' : 'password'\"\n              id=\"confirm_password\"\n              v-model=\"confirmPassword\"\n              placeholder=\"Retype new password\"\n              required\n            />\n          </div>\n\n          <button type=\"submit\" class=\"btn-change-password\">\n            Update Password\n          </button>\n        </form>\n        <p v-if=\"passwordMessage\" class=\"message\">{{ passwordMessage }}</p>\n        <p v-if=\"passwordError\" class=\"error\">{{ passwordError }}</p>\n      </section>\n\n      <!-- MANAGE USERS TAB (Admin Only) -->\n      <section\n        v-else-if=\"currentTab === 'management' && isAdmin\"\n        class=\"management-section\"\n      >\n        <h2>Manage Users</h2>\n\n        <!-- Create New User Form -->\n        <form @submit.prevent=\"handleCreateUser\" class=\"create-user-form\">\n          <h3>Create New User</h3>\n          <div class=\"form-row\">\n            <input v-model=\"newUser.username\" placeholder=\"Username\" required />\n            <input v-model=\"newUser.email\" placeholder=\"Email\" type=\"email\" required />\n          </div>\n          <div class=\"form-row\">\n            <input v-model=\"newUser.first_name\" placeholder=\"First Name\" required />\n            <input v-model=\"newUser.last_name\" placeholder=\"Last Name\" required />\n          </div>\n          <div class=\"form-row\">\n            <input\n              v-model=\"newUser.password\"\n              placeholder=\"Password\"\n              type=\"password\"\n              required\n            />\n            <input\n              v-model=\"newUser.confirmPassword\"\n              placeholder=\"Confirm Password\"\n              type=\"password\"\n              required\n            />\n          </div>\n          <div class=\"form-row\">\n            <select v-model=\"newUser.role\">\n              <option v-for=\"r in roles\" :key=\"r\" :value=\"r\">{{ r }}</option>\n            </select>\n          </div>\n          <button type=\"submit\" class=\"btn-option\">Create User</button>\n          <p v-if=\"userMgmtMessage\" class=\"message\">{{ userMgmtMessage }}</p>\n          <p v-if=\"userMgmtError\" class=\"error\">{{ userMgmtError }}</p>\n        </form>\n\n        <!-- Existing Users Table -->\n        <h3>Existing Users</h3>\n        <table class=\"user-table\">\n          <thead>\n            <tr>\n              <th>Username</th><th>Email</th><th>Name</th><th>Role</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"u in users\" :key=\"u.id\">\n              <td>{{ u.username }}</td>\n              <td>{{ u.email }}</td>\n              <td>{{ u.profile.first_name }} {{ u.profile.last_name }}</td>\n              <td>\n                <select\n                  :value=\"u.profile.role\"\n                  @change=\"onInitiateRoleChange(u, $event.target.value)\"\n                >\n                  <option v-for=\"r in roles\" :key=\"r\" :value=\"r\">{{ r }}</option>\n                </select>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </section>\n    </div>\n\n    <!-- Custom Confirm Dialog for Role Change -->\n    <div v-if=\"showRoleDialog\" class=\"dialog-overlay\">\n      <div class=\"dialog-box\">\n        <p>\n          Change <strong>{{ pendingUser.username }}</strong>'s role to\n          <strong>{{ pendingRole }}</strong>?\n        </p>\n        <div class=\"dialog-actions\">\n          <button @click=\"confirmRoleChange\" class=\"btn-confirm\">Yes</button>\n          <button @click=\"cancelRoleChange\" class=\"btn-cancel\">No</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport StudySettings from \"@/components/StudySettings.vue\";\n\nexport default {\n  name: \"UserInfoComponent\",\n  components: { StudySettings },\n  data() {\n    return {\n      currentTab: \"profile\",\n      user: null,\n      // Change Password\n      newPassword: \"\",\n      confirmPassword: \"\",\n      showPassword: false,\n      passwordMessage: null,\n      passwordError: null,\n      // Admin User Management\n      roles: [\n        \"Administrator\",\n        \"Investigator\",\n        \"Principal Investigator\",\n        \"No Access\"\n      ],\n      newUser: {\n        username: \"\",\n        email: \"\",\n        first_name: \"\",\n        last_name: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n        role: \"Investigator\",\n      },\n      users: [],\n      userMgmtError: null,\n      userMgmtMessage: null,\n      // Rolechange dialog\n      showRoleDialog: false,\n      pendingUser: null,\n      pendingRole: null,\n    };\n  },\n  computed: {\n  userFromStore() {\n    return this.$store.getters.getUser;\n  },\n  isAdmin() {\n    return this.user?.profile?.role === \"Administrator\";\n  },\n  isPI() {\n    return this.user?.profile?.role === \"Principal Investigator\";\n  },\n  visibleTabs() {\n    const tabs = [\n      { key: \"profile\",  label: \"Profile\" },\n      //  only show Study Settings if Admin *or* PI\n      ...(this.isAdmin || this.isPI\n        ? [{ key: \"settings\", label: \"Study Settings\" }]\n        : []),\n      { key: \"password\", label: \"Change Password\" },\n    ];\n    if (this.isAdmin) {\n      tabs.push({ key: \"management\", label: \"User Management\" });\n    }\n    return tabs;\n  },\n},\n\n  async created() {\n    // load current user\n    this.user = this.userFromStore;\n    if (!this.user) {\n      await this.$store.dispatch(\"fetchUserData\");\n      this.user = this.$store.getters.getUser;\n    }\n    // if admin, load all users\n    if (this.isAdmin) {\n      this.fetchUsers();\n    }\n  },\n  methods: {\n    /*  Change Password  */\n    togglePasswordVisibility() {\n      this.showPassword = !this.showPassword;\n    },\n    validatePassword(pw) {\n      return /^(?=.*[0-9])(?=.*[!@#$%^&*]).{8,}$/.test(pw);\n    },\n    async handleChangePassword() {\n      this.passwordMessage = this.passwordError = null;\n      if (this.newPassword !== this.confirmPassword) {\n        this.passwordError = \"Passwords do not match.\";\n        return;\n      }\n      if (!this.validatePassword(this.newPassword)) {\n        this.passwordError = \"Must be 8 chars, include number & special.\";\n        return;\n      }\n      try {\n        const ok = await this.$store.dispatch(\"changePassword\", {\n          newPassword: this.newPassword,\n        });\n        if (ok) {\n          this.passwordMessage = \"Password updated.\";\n          this.newPassword = this.confirmPassword = \"\";\n        } else {\n          this.passwordError = \"Update failed.\";\n        }\n      } catch {\n        this.passwordError = \"Error updating password.\";\n      }\n    },\n\n    /*  Admin: Fetch & Create Users  */\n    async fetchUsers() {\n      this.userMgmtError = null;\n      try {\n        const resp = await axios.get(\n          \"/users/admin/users\",\n          { headers: { Authorization: `Bearer ${this.$store.state.token}` } }\n        );\n        this.users = resp.data;\n      } catch (err) {\n        this.userMgmtError = err.response?.data?.detail || err.message;\n      }\n    },\n    async handleCreateUser() {\n      this.userMgmtError = this.userMgmtMessage = null;\n      const u = this.newUser;\n      if (\n        !u.username ||\n        !u.email ||\n        !u.first_name ||\n        !u.last_name ||\n        !u.password ||\n        !u.confirmPassword\n      ) {\n        this.userMgmtError = \"All fields are required.\";\n        return;\n      }\n      if (u.password !== u.confirmPassword) {\n        this.userMgmtError = \"Passwords do not match.\";\n        return;\n      }\n      try {\n        await axios.post(\n          \"/users/admin/users\",\n          {\n            username: u.username,\n            email: u.email,\n            first_name: u.first_name,\n            last_name: u.last_name,\n            password: u.password,\n            role: u.role,\n          },\n          { headers: { Authorization: `Bearer ${this.$store.state.token}` } }\n        );\n        this.userMgmtMessage = \"User created successfully.\";\n        this.newUser = {\n          username: \"\",\n          email: \"\",\n          first_name: \"\",\n          last_name: \"\",\n          password: \"\",\n          confirmPassword: \"\",\n          role: \"Investigator\",\n        };\n        this.fetchUsers();\n      } catch (err) {\n        this.userMgmtError = err.response?.data?.detail || err.message;\n      }\n    },\n\n    /*  Admin: Change Role with Custom Dialog  */\n    onInitiateRoleChange(user, newRole) {\n      this.pendingUser = user;\n      this.pendingRole = newRole;\n      this.showRoleDialog = true;\n    },\n    async confirmRoleChange() {\n      try {\n        await axios.patch(\n          `/users/admin/users/${this.pendingUser.id}/role`,\n          { role: this.pendingRole },\n          { headers: { Authorization: `Bearer ${this.$store.state.token}` } }\n        );\n        this.pendingUser.profile.role = this.pendingRole;\n      } catch (err) {\n        alert(\"Failed to update role: \" + (err.response?.data?.detail || err.message));\n      } finally {\n        this.showRoleDialog = false;\n        this.pendingUser = this.pendingRole = null;\n      }\n    },\n    cancelRoleChange() {\n      this.showRoleDialog = false;\n      this.pendingUser = this.pendingRole = null;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.user-info-container {\n  max-width: 900px;\n  margin: 2rem auto;\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n  font-family: Arial, sans-serif;\n  overflow: hidden;\n}\n/*  Tabs  */\n.tabs {\n  display: flex;\n  background: #f7f7f7;\n  border-bottom: 1px solid #ddd;\n}\n.tab-button {\n  flex: 1;\n  padding: 12px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 15px;\n  transition: background 0.2s;\n}\n.tab-button:hover { background: #eaeaea; }\n.tab-button.active {\n  background: #fff;\n  border-bottom: 3px solid #4f46e5;\n  font-weight: bold;\n}\n/*  Content  */\n.tab-content { padding: 24px; }\n/*  Profile  */\n.profile-section h2 { margin-bottom: 1rem; }\n.user-details p { margin: 6px 0; color: #555; }\n/*  Settings  */\n.settings-section { /* if needed */ }\n/*  Change Password  */\n.password-section {\n  max-width: 480px;\n  margin: 2rem auto;\n  padding: 2rem;\n  background: #fff;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n}\n.password-section h2 {\n  font-size: 1.5rem;\n  margin-bottom: 1.5rem;\n  text-align: center;\n  color: #333;\n}\n.password-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1.25rem;\n}\n.form-group {\n  display: flex;\n  flex-direction: column;\n}\n.form-group label {\n  font-size: 0.95rem;\n  color: #444;\n  margin-bottom: 0.5rem;\n}\n.password-wrapper {\n  display: flex;\n  align-items: center;\n}\n.password-wrapper input {\n  flex: 1;\n  padding: 0.6rem 0.8rem;\n  font-size: 1rem;\n  border: 1px solid #ccc;\n  border-radius: 4px 0 0 4px;\n  outline: none;\n}\n.password-wrapper input:focus { border-color: #4f46e5; }\n.toggle-password {\n  padding: 0.6rem 0.8rem;\n  background: #f0f0f0;\n  border: 1px solid #ccc;\n  border-left: none;\n  border-radius: 0 4px 4px 0;\n  cursor: pointer;\n  font-size: 0.9rem;\n}\n.toggle-password:hover { background: #e5e7eb; }\n.btn-change-password {\n  align-self: stretch;\n  padding: 0.8rem;\n  background: #4f46e5;\n  color: #fff;\n  font-size: 1rem;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n.btn-change-password:hover { background: #3730a3; }\n.password-section .message,\n.password-section .error {\n  margin-top: 1rem;\n  text-align: center;\n  font-size: 0.9rem;\n}\n.password-section .message { color: #16a34a; }\n.password-section .error { color: #dc2626; }\n/*  Manage Users  */\n.management-section h2,\n.management-section h3 {\n  text-align: center;\n  color: #333;\n}\n.create-user-form .form-row {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 10px;\n}\n.create-user-form input,\n.create-user-form select {\n  flex: 1;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n.create-user-form button.btn-option {\n  margin-top: 10px;\n  padding: 8px 16px;\n  background: #4f46e5;\n  border: none;\n  color: #fff;\n  border-radius: 4px;\n  cursor: pointer;\n}\n.create-user-form button.btn-option:hover {\n  background: #3730a3;\n}\n.user-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n.user-table th,\n.user-table td {\n  border: 1px solid #eee;\n  padding: 8px;\n  text-align: left;\n}\n.user-table th {\n  background: #f9f9f9;\n  font-weight: 600;\n}\n/*  Custom Confirm Dialog  */\n.dialog-overlay {\n  position: fixed;\n  inset: 0;\n  background: rgba(0,0,0,0.4);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n.dialog-box {\n  background: #fff;\n  padding: 1.5rem;\n  border-radius: 6px;\n  max-width: 320px;\n  text-align: center;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n}\n.dialog-box p {\n  margin-bottom: 1rem;\n  font-size: 1rem;\n}\n.dialog-actions {\n  display: flex;\n  justify-content: space-around;\n}\n.btn-confirm {\n  background: #4f46e5;\n  color: #fff;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n}\n.btn-confirm:hover { background: #3730a3; }\n.btn-cancel {\n  background: #e5e7eb;\n  color: #333;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n}\n.btn-cancel:hover { background: #d1d5db; }\n</style>\n","<template>\n  <div class=\"settings-container\">\n    <h1>Study Settings</h1>\n    <form @submit.prevent=\"saveSettings\">\n      <section class=\"setting-section\">\n        <h2>Measurement Preferences</h2>\n        <div class=\"form-group\">\n          <label for=\"weightFormat\">Weight Format</label>\n          <select v-model=\"settings.weightFormat\" id=\"weightFormat\">\n            <option value=\"kg\">Kilograms (kg)</option>\n            <option value=\"lbs\">Pounds (lbs)</option>\n            <option value=\"oz\">Ounce (oz)</option>\n          </select>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"heightFormat\">Height Format</label>\n          <select v-model=\"settings.heightFormat\" id=\"heightFormat\">\n            <option value=\"cm\">Centimeters (cm)</option>\n            <option value=\"m\">Meters (m)</option>\n            <option value=\"in\">Inches (in)</option>\n          </select>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"temperatureFormat\">Temperature Format</label>\n          <select v-model=\"settings.temperatureFormat\" id=\"temperatureFormat\">\n            <option value=\"celsius\">Celsius (C)</option>\n            <option value=\"fahrenheit\">Fahrenheit (F)</option>\n            <option value=\"kelvin\">Kelvin (K)</option>\n          </select>\n        </div>\n        <!-- Distance Unit -->\n        <div class=\"form-group\">\n          <label for=\"distanceUnit\">Distance Unit</label>\n          <select v-model=\"settings.distanceUnit\" id=\"distanceUnit\">\n            <option value=\"km\">Kilometers (km)</option>\n            <option value=\"miles\">Miles</option>\n          </select>\n        </div>\n        <!-- Liquid Unit -->\n        <div class=\"form-group\">\n          <label for=\"liquidUnit\">Liquid Unit</label>\n          <select v-model=\"settings.liquidUnit\" id=\"liquidUnit\">\n            <option value=\"litres\">Litres (L)</option>\n            <option value=\"gallons\">Gallons</option>\n          </select>\n        </div>\n      </section>\n\n      <section class=\"setting-section\">\n        <h2>Date Formatting</h2>\n        <div class=\"form-group\">\n          <label for=\"dateFormat\">Date Format</label>\n          <select v-model=\"settings.dateFormat\" id=\"dateFormat\">\n            <option value=\"DD/MM/YYYY\">DD/MM/YYYY</option>\n            <option value=\"MM/DD/YYYY\">MM/DD/YYYY</option>\n            <option value=\"YYYY-MM-DD\">YYYY-MM-DD</option>\n            <option value=\"DD-MM-YYYY\">DD-MM-YYYY</option>\n            <option value=\"MM-DD-YYYY\">MM-DD-YYYY</option>\n            <option value=\"YYYY/MM/DD\">YYYY/MM/DD</option>\n            <option value=\"DD.MM.YYYY\">DD.MM.YYYY</option>\n          </select>\n        </div>\n      </section>\n\n      <section class=\"setting-section\">\n        <h2>Locale & Time</h2>\n        <div class=\"form-group\">\n          <label for=\"timezone\">Timezone</label>\n          <select v-model=\"settings.timezone\" id=\"timezone\">\n            <option v-for=\"tz in timezones\" :key=\"tz\" :value=\"tz\">{{ tz }}</option>\n          </select>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"locale\">Language / Locale</label>\n          <select v-model=\"settings.locale\" id=\"locale\">\n            <option value=\"en-US\">English</option>\n            <option value=\"de-DE\">German</option>\n          </select>\n        </div>\n      </section>\n\n      <section class=\"setting-section\">\n        <h2>Study Defaults & Behavior</h2>\n        <div class=\"form-group\">\n          <label for=\"autoSaveInterval\">Auto-Save Interval (minutes)</label>\n          <input type=\"number\" id=\"autoSaveInterval\" v-model.number=\"settings.autoSaveInterval\" min=\"1\" />\n        </div>\n      </section>\n\n      <section class=\"setting-section\">\n        <h2>Notification & UI Preferences</h2>\n        <div class=\"form-group\">\n          <label>Notifications</label>\n          <div>\n            <label>\n              <input type=\"checkbox\" v-model=\"settings.notifications.email\" />\n              Email Notifications\n            </label>\n          </div>\n          <div>\n            <label>\n              <input type=\"checkbox\" v-model=\"settings.notifications.sms\" />\n              SMS Notifications\n            </label>\n          </div>\n          <div>\n            <label>\n              <input type=\"checkbox\" v-model=\"settings.notifications.push\" />\n              Push Notifications\n            </label>\n          </div>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"uiTheme\">UI Theme</label>\n          <select v-model=\"settings.uiTheme\" id=\"uiTheme\">\n            <option value=\"light\">Light</option>\n            <option value=\"dark\">Dark</option>\n          </select>\n        </div>\n      </section>\n\n      <div class=\"form-actions\">\n        <button type=\"submit\" class=\"btn-save-settings\">Save Settings</button>\n        <button type=\"button\" class=\"btn-restore\" @click=\"restoreDefaults\">Restore Defaults</button>\n        <button type=\"button\" class=\"btn-cancel\" @click=\"cancelSettings\">Cancel</button>\n      </div>\n    </form>\n    <p v-if=\"saveMessage\" class=\"message\">{{ saveMessage }}</p>\n    <p v-if=\"saveError\" class=\"error\">{{ saveError }}</p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"StudySettings\",\n  data() {\n    const defaultSettings = {\n      weightFormat: \"kg\",\n      heightFormat: \"cm\",\n      temperatureFormat: \"celsius\",\n      distanceUnit: \"km\",\n      liquidUnit: \"litres\",\n      dateFormat: \"YYYY-MM-DD\",\n      timezone: \"UTC\",\n      locale: \"en-US\",\n      autoSaveInterval: 5,\n      notifications: {\n        email: false,\n        sms: false,\n        push: false,\n      },\n      uiTheme: \"light\",\n    };\n\n    return {\n      settings: { ...defaultSettings },\n      defaultSettings,\n      timezones: [],\n      saveMessage: null,\n      saveError: null,\n    };\n  },\n  computed: {\n    // Retrieve the user ID from Vuex store\n    userId() {\n      return this.$store.state.user.id;\n    },\n  },\n  created() {\n    this.fetchTimezones();\n    // If userId isn't available immediately, watch for changes.\n    if (this.userId) {\n      this.fetchUserSettings();\n    } else {\n      this.$watch(\n        () => this.userId,\n        (newVal) => {\n          if (newVal) {\n            this.fetchUserSettings();\n          }\n        }\n      );\n    }\n  },\n  methods: {\n    async fetchTimezones() {\n      try {\n        const response = await fetch(\"/api/timezones\");\n        const data = await response.json();\n        this.timezones = data;\n      } catch (error) {\n        console.error(\"Failed to fetch timezones, using default UTC\", error);\n        this.timezones = [\"UTC\"];\n      }\n    },\n    async fetchUserSettings() {\n      try {\n        const response = await fetch(`/api/settings/${this.userId}`);\n        if (response.ok) {\n          const data = await response.json();\n          this.settings = data;\n        } else if (response.status === 404) {\n          console.log(\"No settings found, loading defaults.\");\n        } else {\n          console.error(\"Error fetching settings:\", response.statusText);\n        }\n      } catch (error) {\n        console.error(\"Error fetching user settings:\", error);\n      }\n    },\n    async saveSettings() {\n      this.saveMessage = null;\n      this.saveError = null;\n      try {\n        const response = await fetch(`/api/settings/${this.userId}`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(this.settings),\n        });\n        if (response.ok) {\n          this.saveMessage = \"Settings saved successfully.\";\n        } else {\n          this.saveError = \"Failed to save settings. Please try again.\";\n        }\n      } catch (error) {\n        console.error(error);\n        this.saveError = \"Failed to save settings. Please try again.\";\n      }\n    },\n    restoreDefaults() {\n      this.settings = { ...this.defaultSettings };\n    },\n    cancelSettings() {\n      this.$router.push(\"/profile\");\n    },\n  },\n};\n</script>\n\n<style scoped>\n.settings-container {\n  max-width: 800px;\n  margin: 20px auto;\n  padding: 30px;\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n  font-family: Arial, sans-serif;\n}\nh1 {\n  text-align: center;\n  margin-bottom: 20px;\n}\n.setting-section {\n  margin-bottom: 25px;\n}\n.setting-section h2 {\n  margin-bottom: 10px;\n  color: #333;\n}\n.form-group {\n  margin-bottom: 15px;\n}\n.form-group label {\n  display: block;\n  margin-bottom: 5px;\n  color: #555;\n}\n.form-group input,\n.form-group select {\n  width: 100%;\n  padding: 8px;\n  font-size: 14px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  box-sizing: border-box;\n}\n.form-actions {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n}\n.btn-save-settings,\n.btn-restore,\n.btn-cancel {\n  padding: 10px 20px;\n  font-size: 16px;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n.btn-save-settings {\n  background-color: #007bff;\n  color: #fff;\n}\n.btn-save-settings:hover {\n  background-color: #0056b3;\n}\n.btn-restore {\n  background-color: #28a745;\n  color: #fff;\n}\n.btn-restore:hover {\n  background-color: #218838;\n}\n.btn-cancel {\n  background-color: #6c757d;\n  color: #fff;\n}\n.btn-cancel:hover {\n  background-color: #5a6268;\n}\n.message {\n  color: green;\n  text-align: center;\n  margin-top: 15px;\n}\n.error {\n  color: red;\n  text-align: center;\n  margin-top: 15px;\n}\n</style>\n","import { render } from \"./StudySettings.vue?vue&type=template&id=bc1fd5f2&scoped=true\"\nimport script from \"./StudySettings.vue?vue&type=script&lang=js\"\nexport * from \"./StudySettings.vue?vue&type=script&lang=js\"\n\nimport \"./StudySettings.vue?vue&type=style&index=0&id=bc1fd5f2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-bc1fd5f2\"]])\n\nexport default __exports__","import { render } from \"./UserInfoComponent.vue?vue&type=template&id=04a332e7&scoped=true\"\nimport script from \"./UserInfoComponent.vue?vue&type=script&lang=js\"\nexport * from \"./UserInfoComponent.vue?vue&type=script&lang=js\"\n\nimport \"./UserInfoComponent.vue?vue&type=style&index=0&id=04a332e7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-04a332e7\"]])\n\nexport default __exports__","<template>\n  <div>\n    <h1>Analytics</h1>\n    <p>Show analytics and reports here.</p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"AnalyticsComponent\",\n};\n</script>\n","import { render } from \"./AnalyticsComponent.vue?vue&type=template&id=3ae25db3\"\nimport script from \"./AnalyticsComponent.vue?vue&type=script&lang=js\"\nexport * from \"./AnalyticsComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"create-form-container\">\n    <!-- Header -->\n    <div class=\"header-container\">\n      <button @click=\"goBack\" class=\"btn-back\" title=\"Go Back\">\n        <i :class=\"icons.back\"></i> Back\n      </button>\n    </div>\n\n    <div class=\"scratch-form-content\">\n      <!--  Available Fields  -->\n      <div v-if=\"!showMatrix\" class=\"available-fields\">\n        <h2>Available Fields</h2>\n        <div class=\"tabs\">\n          <button\n            :class=\"{ active: activeTab === 'template' }\"\n            @click=\"activeTab = 'template'\"\n          >Available Template</button>\n          <button\n            :class=\"{ active: activeTab === 'custom' }\"\n            @click=\"activeTab = 'custom'\"\n          >Custom Fields</button>\n          <button\n            :class=\"{ active: activeTab === 'shacl' }\"\n            @click=\"activeTab = 'shacl'\"\n          >SHACL Components</button>\n        </div>\n\n        <!-- TEMPLATE -->\n        <div v-if=\"activeTab === 'template'\" class=\"template-fields\">\n          <p class=\"template-instruction\">\n            Click a model to pick properties\n          </p>\n\n          <div\n            v-for=\"model in dataModels\"\n            :key=\"model.title\"\n            class=\"template-button\"\n            @click=\"openModelDialog(model)\"\n          >\n            <div class=\"template-header\">\n              <i :class=\"modelIcon(model.title)\"></i>\n              {{ prettyModelTitle(model.title) }}\n            </div>\n            <div class=\"template-description\">\n              {{ model.description || \"No description available.\" }}\n            </div>\n          </div>\n        </div>\n\n        <!-- CUSTOM -->\n        <div v-if=\"activeTab === 'custom'\" class=\"custom-fields\">\n          <div\n            v-for=\"field in generalFields\"\n            :key=\"field.name || field.label\"\n            class=\"available-field-button\"\n            @click=\"addFieldToActiveSection(field)\"\n          >\n            <i :class=\"field.icon || fieldIcon(field.label)\"></i>\n            <div class=\"field-info\">\n              <span class=\"field-label\">{{ field.label }}</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- SHACL -->\n        <div v-if=\"activeTab === 'shacl'\">\n          <ShaclComponents :shaclComponents=\"shaclComponents\" />\n        </div>\n      </div>\n\n      <!--  Form Area / Protocol Matrix  -->\n      <div class=\"form-area\">\n        <div class=\"sections-container\">\n          <!-- Sections View -->\n          <div v-if=\"!showMatrix\">\n            <div\n              v-for=\"(section, si) in currentForm.sections\"\n              :key=\"si\"\n              class=\"form-section\"\n              :class=\"{ active: activeSection === si }\"\n              @click=\"onSectionClick(si)\"\n              :ref=\"'section-' + si\"\n            >\n              <div class=\"section-header\">\n                <h3>{{ section.title }}</h3>\n                <div class=\"field-actions\">\n                  <button\n                    class=\"icon-button\"\n                    title=\"Edit Section Title\"\n                    @click.stop.prevent=\"setActiveSection(si); openInputDialog(\n                      'Enter new section title:',\n                      section.title,\n                      val => editSection(si, val)\n                    )\"\n                  ><i :class=\"icons.edit\"></i></button>\n\n                  <button\n                    class=\"icon-button\"\n                    title=\"Add Section Below\"\n                    @click.stop.prevent=\"setActiveSection(si); addNewSectionBelow(si)\"\n                  ><i :class=\"icons.add\"></i></button>\n\n                  <button\n                    class=\"icon-button\"\n                    title=\"Delete Section\"\n                    @click.stop.prevent=\"setActiveSection(si); confirmDeleteSection(si)\"\n                  ><i :class=\"icons.delete\"></i></button>\n\n                  <button\n                    class=\"icon-button\"\n                    :title=\"section.collapsed ? 'Expand' : 'Collapse'\"\n                    @click.stop.prevent=\"setActiveSection(si); toggleSection(si)\"\n                  >\n                    <i :class=\"section.collapsed ? icons.toggleDown : icons.toggleUp\"></i>\n                  </button>\n                </div>\n              </div>\n\n              <div v-if=\"!section.collapsed\" class=\"section-content\">\n                <div\n                  v-for=\"(field, fi) in section.fields\"\n                  :key=\"fi\"\n                  class=\"form-group\"\n                >\n                  <div class=\"field-header\">\n                    <label\n                      v-if=\"field.type !== 'button' && field.type !== 'checkbox'\"\n                      :for=\"field.name\"\n                    >\n                      {{ field.label }}\n                    </label>\n                    <label\n                      v-else-if=\"field.type === 'checkbox'\"\n                      class=\"checkbox-label\"\n                      :for=\"field.name\"\n                    >\n                      {{ field.label }}\n                      <FieldCheckbox\n                        :id=\"field.name\"\n                        v-model=\"field.value\"\n                      />\n                    </label>\n\n                    <div class=\"field-actions\">\n                      <button\n                        class=\"icon-button\"\n                        title=\"Edit Field Label\"\n                        @click.stop.prevent=\"setActiveSection(si); openInputDialog(\n                          'Enter new field label:',\n                          field.label,\n                          val => editField(si, fi, val)\n                        )\"\n                      ><i :class=\"icons.edit\"></i></button>\n\n                      <button\n                        class=\"icon-button\"\n                        title=\"Add Similar Field\"\n                        @click.stop.prevent=\"setActiveSection(si); addSimilarField(si, fi)\"\n                      ><i :class=\"icons.add\"></i></button>\n\n                      <button\n                        class=\"icon-button\"\n                        title=\"Delete Field\"\n                        @click.stop.prevent=\"setActiveSection(si, fi); removeField(si, fi)\"\n                      ><i :class=\"icons.delete\"></i></button>\n\n                      <button\n                        class=\"icon-button\"\n                        title=\"Settings\"\n                        @click.stop.prevent=\"setActiveSection(si); openConstraintsDialog(si, fi)\"\n                      ><i :class=\"icons.cog\"></i></button>\n                    </div>\n                  </div>\n\n                  <div class=\"field-box\">\n                    <!-- TEXT -->\n                    <input\n                      v-if=\"field.type === 'text'\"\n                      type=\"text\"\n                      v-model=\"field.value\"\n                      :placeholder=\"field.constraints?.placeholder || field.placeholder\"\n                    />\n\n                    <!-- TEXTAREA -->\n                    <textarea\n                      v-else-if=\"field.type === 'textarea'\"\n                      v-model=\"field.value\"\n                      :rows=\"field.rows || 4\"\n                      :placeholder=\"field.constraints?.placeholder || field.placeholder\"\n                    ></textarea>\n\n                    <!-- NUMBER -->\n                    <input\n                      v-else-if=\"field.type === 'number'\"\n                      type=\"number\"\n                      v-model.number=\"field.value\"\n                      :min=\"field.constraints?.min\"\n                      :max=\"field.constraints?.max\"\n                      :step=\"field.constraints?.step\"\n                      @input=\"enforceNumberDigitLimits(si, fi, $event)\"\n                      @blur=\"enforceNumberDigitLimits(si, fi, $event, true)\"\n                    />\n\n                    <!-- DATE -->\n                    <DateFormatPicker\n                      v-else-if=\"field.type === 'date'\"\n                      v-model=\"field.value\"\n                      :format=\"field.constraints?.dateFormat || 'dd.MM.yyyy'\"\n                      :placeholder=\"field.placeholder || (field.constraints?.dateFormat || 'dd.MM.yyyy')\"\n                      :min-date=\"field.constraints?.minDate || null\"\n                      :max-date=\"field.constraints?.maxDate || null\"\n                    />\n\n                    <!-- TIME -->\n                    <FieldTime\n                      v-else-if=\"field.type === 'time'\"\n                      v-model=\"field.value\"\n                      v-bind=\"field.constraints\"\n                      :hourCycle=\"field.constraints?.hourCycle || '24'\"\n                      :placeholder=\"field.placeholder || (field.constraints?.hourCycle === '12' ? 'hh:mm a' : 'HH:mm')\"\n                    />\n\n                    <!-- SELECT -->\n                    <select\n                      v-else-if=\"field.type === 'select'\"\n                      v-model=\"field.value\"\n                    >\n                      <option value=\"\" disabled>Select</option>\n                      <option v-for=\"opt in field.options\" :key=\"opt\">{{ opt }}</option>\n                    </select>\n\n                    <!-- RADIO -->\n                    <FieldRadioGroup\n                      v-else-if=\"field.type === 'radio'\"\n                      :name=\"field.name\"\n                      :options=\"field.options\"\n                      v-model=\"field.value\"\n                    />\n\n                    <!-- SLIDER / LINEAR -->\n                    <FieldSlider\n                      v-else-if=\"field.type === 'slider' && (field.constraints?.mode || 'slider') === 'slider'\"\n                      v-model=\"field.value\"\n                      :min=\"field.constraints?.min ?? 1\"\n                      :max=\"field.constraints?.max ?? 5\"\n                      :step=\"field.constraints?.step ?? 1\"\n                      :readonly=\"!!field.constraints?.readonly\"\n                      :percent=\"!!field.constraints?.percent\"\n                      :marks=\"field.constraints?.marks || []\"\n                    />\n                    <FieldLinearScale\n                      v-else-if=\"field.type === 'slider' && field.constraints?.mode === 'linear'\"\n                      v-model=\"field.value\"\n                      :min=\"field.constraints?.min ?? 1\"\n                      :max=\"field.constraints?.max ?? 5\"\n                      :left-label=\"field.constraints?.leftLabel || ''\"\n                      :right-label=\"field.constraints?.rightLabel || ''\"\n                      :readonly=\"!!field.constraints?.readonly\"\n                    />\n\n                    <!-- FILE (new) -->\n                    <FieldFileUpload\n                      v-else-if=\"field.type === 'file'\"\n                      v-model=\"field.value\"\n                      :constraints=\"field.constraints || {}\"\n                      :readonly=\"!!field.constraints?.readonly\"\n                      :required=\"!!field.constraints?.required\"\n                      stage=\"builder\"\n                    />\n\n                    <!-- BUTTON -->\n                    <button\n                      v-else-if=\"field.type === 'button'\"\n                      class=\"form-button\"\n                    >{{ field.label }}</button>\n\n                    <!-- FALLBACK -->\n                    <input\n                      v-else\n                      type=\"text\"\n                      v-model=\"field.value\"\n                      :placeholder=\"field.constraints?.placeholder || field.placeholder\"\n                    />\n\n                    <small v-if=\"field.constraints?.helpText\" class=\"help-text\">\n                      {{ field.constraints.helpText }}\n                    </small>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Protocol Matrix View -->\n          <div v-else>\n            <ProtocolMatrix\n              :visits=\"visits\"\n              :groups=\"groups\"\n              :selectedModels=\"selectedModels\"\n              :assignments=\"assignments\"\n              @assignment-updated=\"onAssignmentUpdated\"\n              @edit-template=\"editTemplate\"\n            />\n          </div>\n        </div>\n\n        <!-- Form Actions -->\n        <div v-if=\"!showMatrix\" class=\"form-actions\">\n          <button @click.prevent=\"addNewSection\" class=\"btn-option\">\n            + Add Section\n          </button>\n          <button @click.prevent=\"confirmClearForm\" class=\"btn-option\">\n            Clear\n          </button>\n          <button @click.prevent=\"saveForm\" class=\"btn-primary\">\n            Save Template\n          </button>\n          <button @click.prevent=\"downloadFormData\" class=\"btn-option\">\n            Download Template\n          </button>\n          <button @click.prevent=\"openUploadDialog\" class=\"btn-option\">\n            Upload Template\n          </button>\n          <button\n            @click.prevent=\"handleProtocolClick\"\n            class=\"btn-option protocol-btn\"\n          >\n            Schedule of Assessment\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Model Dialog -->\n    <div v-if=\"showModelDialog\" class=\"modal-overlay\">\n      <div class=\"modal model-dialog\">\n        <h3>Select Properties for {{ prettyModelTitle(currentModel.title) }}</h3>\n        <div class=\"model-prop-list\">\n          <div\n            v-for=\"(prop, i) in currentModel.fields\"\n            :key=\"prop.name\"\n            class=\"prop-row\"\n          >\n            <div class=\"prop-info\">\n              <strong>{{ prop.label || prettyModelTitle(prop.name) }}</strong>\n              <p v-if=\"prop.description\" class=\"prop-desc\">{{ prop.description }}</p>\n            </div>\n            <label class=\"prop-check\">\n              <input type=\"checkbox\" :id=\"'prop-check-' + i\" v-model=\"selectedProps[i]\" />\n            </label>\n          </div>\n        </div>\n        <div class=\"modal-actions\">\n          <button @click=\"takeoverModel\" class=\"btn-primary\">Takeover</button>\n          <button @click=\"showModelDialog=false\" class=\"btn-option\">\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Constraints Dialog -->\n    <div v-if=\"showConstraintsDialog\" class=\"modal-overlay\">\n      <FieldConstraintsDialog\n        :currentFieldType=\"currentFieldType\"\n        :constraintsForm=\"constraintsForm\"\n        @updateConstraints=\"confirmConstraintsDialog\"\n        @closeConstraintsDialog=\"cancelConstraintsDialog\"\n        @showGenericDialog=\"openGenericDialog\"\n      />\n    </div>\n\n    <!-- Preview Dialog -->\n    <div v-if=\"showPreviewDialog\" class=\"modal-overlay\">\n      <div class=\"modal preview-modal\">\n        <FormPreview :form=\"currentForm\" />\n        <div class=\"modal-actions\">\n          <button @click=\"closePreviewDialog\" class=\"btn-primary\">Close</button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Upload Dialog -->\n    <div v-if=\"showUploadDialog\" class=\"modal-overlay\">\n      <div class=\"modal\">\n        <p>\n          Select a JSON file containing exactly:<br/>\n          <code>{ \"sections\": [] }</code>\n        </p>\n        <input type=\"file\" @change=\"handleFileChange\" accept=\".json\" />\n        <div class=\"modal-actions\">\n          <button @click=\"closeUploadDialog\" class=\"btn-option\">\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Input Dialog -->\n    <div v-if=\"showInputDialog\" class=\"modal-overlay\">\n      <div class=\"modal input-dialog-modal\">\n        <p>{{ inputDialogMessage }}</p>\n        <input\n          type=\"text\"\n          v-model=\"inputDialogValue\"\n          class=\"input-dialog-field\"\n        />\n        <div class=\"modal-actions\">\n          <button @click=\"confirmInputDialog\" class=\"btn-primary\">Save</button>\n          <button @click=\"cancelInputDialog\" class=\"btn-option\">\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Confirm Dialog -->\n    <div v-if=\"showConfirmDialog\" class=\"modal-overlay\">\n      <div class=\"modal\">\n        <p>{{ confirmDialogMessage }}</p>\n        <div class=\"modal-actions\">\n          <button @click=\"confirmDialogYes\" class=\"btn-primary\">Yes</button>\n          <button @click=\"closeConfirmDialog\" class=\"btn-option\">No</button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Generic Dialog -->\n    <div v-if=\"showGenericDialog\" class=\"modal-overlay\">\n      <div class=\"modal\">\n        <p>{{ genericDialogMessage }}</p>\n        <button @click=\"closeGenericDialog\" class=\"btn-primary\">OK</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n\n<script>\nimport axios from \"axios\";\nimport yaml from \"js-yaml\";\nimport icons from \"@/assets/styles/icons\";\nimport ShaclComponents from \"./ShaclComponents.vue\";\nimport ProtocolMatrix from \"./ProtocolMatrix.vue\";\nimport FieldConstraintsDialog from \"./FieldConstraintsDialog.vue\";\nimport FormPreview from \"./FormPreview.vue\";\nimport DateFormatPicker from \"./DateFormatPicker.vue\";\nimport FieldCheckbox from \"@/components/fields/FieldCheckbox.vue\";\nimport FieldRadioGroup from \"@/components/fields/FieldRadioGroup.vue\";\nimport FieldTime from \"@/components/fields/FieldTime.vue\";\nimport FieldSlider from \"@/components/fields/FieldSlider.vue\";\nimport FieldLinearScale from \"@/components/fields/FieldLinearScale.vue\";\nimport FieldFileUpload from \"@/components/fields/FieldFileUpload.vue\"; // NEW\nimport { normalizeConstraints, coerceDefaultForType } from \"@/utils/constraints\";\n\nexport default {\n  name: \"ScratchFormComponent\",\n  components: {\n    ShaclComponents,\n    ProtocolMatrix,\n    FieldConstraintsDialog,\n    FormPreview,\n    DateFormatPicker,\n    FieldCheckbox,\n    FieldRadioGroup,\n    FieldTime,\n    FieldSlider,\n    FieldLinearScale,\n    FieldFileUpload\n  },\n  data() {\n    return {\n      forms: JSON.parse(localStorage.getItem(\"scratchForms\") || \"[]\"),\n      currentFormIndex: 0,\n      activeSection: 0,\n      activeTab: \"template\",\n      generalFields: [],\n      dataModels: [],\n      shaclComponents: [],\n      showModelDialog: false,\n      currentModel: null,\n      selectedProps: [],\n      showMatrix: false,\n      visits: [],\n      groups: [],\n      assignments: [],\n      showConfirmDialog: false,\n      confirmDialogMessage: \"\",\n      confirmCallback: null,\n      showGenericDialog: false,\n      genericDialogMessage: \"\",\n      genericCallback: null,\n      showConstraintsDialog: false,\n      constraintsForm: {},\n      currentFieldType: \"\",\n      currentFieldIndices: {},\n      showPreviewDialog: false,\n      showUploadDialog: false,\n      showInputDialog: false,\n      inputDialogMessage: \"\",\n      inputDialogValue: \"\",\n      inputDialogCallback: null\n    };\n  },\n  computed: {\n    icons()         { return icons; },\n    studyDetails()  { return this.$store.state.studyDetails || {}; },\n    currentForm()   { return this.forms[this.currentFormIndex] || { sections: [] }; },\n    selectedModels(){\n      return this.currentForm.sections.map(sec => ({ title: sec.title, fields: sec.fields }));\n    }\n  },\n  watch: {\n    visits: { handler() { this.adjustAssignments(); }, immediate: true, deep: true },\n    groups: { handler() { this.adjustAssignments(); }, immediate: true, deep: true },\n    selectedModels: { handler() { this.adjustAssignments(); }, immediate: true, deep: true },\n    forms: {\n      deep: true,\n      handler(f) { localStorage.setItem(\"scratchForms\", JSON.stringify(f)); }\n    }\n  },\n  async mounted() {\n    if (this.studyDetails.study_metadata?.id) {\n      const stored = localStorage.getItem(\"scratchForms\");\n      if (stored) {\n        try { this.forms = JSON.parse(stored); } catch { this.forms = [{ sections: [] }]; }\n      } else if (Array.isArray(this.studyDetails.forms)) {\n        this.forms = JSON.parse(JSON.stringify(this.studyDetails.forms));\n        localStorage.setItem(\"scratchForms\", JSON.stringify(this.forms));\n      } else {\n        this.forms = [{ sections: [] }];\n        localStorage.setItem(\"scratchForms\", JSON.stringify(this.forms));\n      }\n    } else {\n      localStorage.removeItem(\"scratchForms\");\n      this.forms = [{ sections: [] }];\n    }\n\n    this.visits = Array.isArray(this.studyDetails.visits) ? JSON.parse(JSON.stringify(this.studyDetails.visits)) : [];\n    this.groups  = Array.isArray(this.studyDetails.groups)  ? JSON.parse(JSON.stringify(this.studyDetails.groups))  : [];\n    this.adjustAssignments();\n\n    try {\n      const res = await axios.get(\"/forms/available-fields\");\n      this.generalFields = res.data.map((f, idx) => ({\n        ...f,\n        name: f.name || `${f.type}_${idx}`,\n        description: f.helpText || f.placeholder || \"\",\n        options: (f.type === 'select' || f.type === 'radio')\n          ? (Array.isArray(f.options) && f.options.length ? f.options : ['Option 1'])\n          : (f.options || []),\n        constraints: f.constraints || {}\n      }));\n    } catch (e) {\n      console.error(\"Failed to load custom fields\", e);\n    }\n\n    await this.loadDataModels();\n  },\n  methods: {\n    goBack() { this.$router.back() },\n    prettyModelTitle(s) { return this.$formatLabel ? this.$formatLabel(s) : String(s || '') },\n    modelIcon(title) {\n      const key = String(title || '').toLowerCase().replace(/[^a-z0-9]/g, '');\n      return this.icons[key] || 'fas fa-book';\n    },\n    fieldIcon(label) {\n      const key = String(label || '').toLowerCase().replace(/[^a-z0-9]/g, '');\n      return this.icons[key] || 'fas fa-dot-circle';\n    },\n\n    onSectionClick(i) {\n      this.activeSection = i;\n      const section = this.currentForm.sections[i];\n      if (section && section.collapsed) section.collapsed = false;\n      this.focusSection(i);\n    },\n\n    openConfirmDialog(msg, cb) { this.confirmDialogMessage = msg; this.confirmCallback = cb; this.showConfirmDialog = true; },\n    confirmDialogYes() { this.showConfirmDialog = false; if (this.confirmCallback) this.confirmCallback(); },\n    closeConfirmDialog() { this.showConfirmDialog = false; },\n    openGenericDialog(msg, cb) { this.genericDialogMessage = msg; this.genericCallback = cb; this.showGenericDialog = true; },\n    closeGenericDialog() { this.showGenericDialog = false; if (this.genericCallback) this.genericCallback(); },\n\n    openInputDialog(msg, def, cb) { this.inputDialogMessage = msg; this.inputDialogValue = def; this.inputDialogCallback = cb; this.showInputDialog = true; },\n    confirmInputDialog() { this.showInputDialog = false; if (this.inputDialogCallback) this.inputDialogCallback(this.inputDialogValue); },\n    cancelInputDialog() { this.showInputDialog = false; },\n\n    adjustAssignments() {\n      const m = this.selectedModels.length;\n      const v = this.visits.length;\n      const g = this.groups.length;\n      if (m === 0 || v === 0 || g === 0) { this.assignments = []; return; }\n      if (this.studyDetails.study_metadata?.id && Array.isArray(this.studyDetails.assignments)) {\n        const old = this.studyDetails.assignments;\n        const fresh = [];\n        for (let mi = 0; mi < m; mi++) {\n          fresh[mi] = [];\n          for (let vi = 0; vi < v; vi++) {\n            fresh[mi][vi] = [];\n            for (let gi = 0; gi < g; gi++) {\n              const ov = old[mi]?.[vi]?.[gi];\n              fresh[mi][vi][gi] = typeof ov === 'boolean' ? ov : false;\n            }\n          }\n        }\n        this.assignments = fresh;\n      } else {\n        this.assignments = Array.from({ length: m }, () =>\n          Array.from({ length: v }, () => Array.from({ length: g }, () => false))\n        );\n      }\n    },\n\n    handleProtocolClick() { this.showMatrix = true; },\n    editTemplate() { this.showMatrix = false; },\n    onAssignmentUpdated({ mIdx, vIdx, gIdx, checked }) {\n      this.assignments[mIdx][vIdx][gIdx] = checked;\n      this.$store.commit(\"setStudyDetails\", { ...this.studyDetails, assignments: this.assignments });\n    },\n\n    focusSection(i) {\n      this.$nextTick(() => {\n        const ref = this.$refs[`section-${i}`];\n        const el = Array.isArray(ref) ? ref[0] : ref;\n        if (el?.scrollIntoView) el.scrollIntoView({ behavior: 'smooth', block: 'start' });\n      });\n    },\n\n    openModelDialog(model) {\n      this.currentModel = model;\n      this.selectedProps = model.fields.map(() => false);\n      this.showModelDialog = true;\n    },\n    takeoverModel() {\n      const chosen = this.currentModel.fields\n        .filter((_, i) => this.selectedProps[i])\n        .map(f => ({ ...f, description: f.description || \"\", constraints: f.constraints || {} }));\n      const insertAt = Math.min(this.activeSection + 1, this.currentForm.sections.length);\n      const sec = { title: this.currentModel.title, fields: chosen, collapsed: false, source: \"template\" };\n      this.forms[this.currentFormIndex].sections.splice(insertAt, 0, sec);\n      this.activeSection = insertAt;\n      this.$nextTick(() => this.focusSection(insertAt));\n      this.adjustAssignments();\n      this.showModelDialog = false;\n    },\n\n    addNewSection() {\n      const sec = { title: `Section ${this.currentForm.sections.length + 1}`, fields: [], collapsed: false, source: \"manual\" };\n      this.forms[this.currentFormIndex].sections.push(sec);\n      this.activeSection = this.currentForm.sections.length - 1;\n      this.adjustAssignments();\n      this.focusSection(this.activeSection);\n    },\n    addNewSectionBelow(i) {\n      const current = this.currentForm.sections[i];\n      const sec = {\n        title: `${current.title} (Copy)`,\n        fields: current.fields.map(field => ({\n          ...field,\n          name: `${field.name}_${Date.now()}`,\n          constraints: field.constraints || {}\n        })),\n        collapsed: false,\n        source: current.source\n      };\n      const idx = i + 1;\n      this.forms[this.currentFormIndex].sections.splice(idx, 0, sec);\n      this.activeSection = idx;\n      this.adjustAssignments();\n      this.focusSection(idx);\n    },\n\n    confirmDeleteSection(i) {\n      this.openConfirmDialog(\"Delete this section?\", () => {\n        this.currentForm.sections.splice(i, 1);\n        this.activeSection = Math.max(0, this.activeSection - 1);\n        this.adjustAssignments();\n      });\n    },\n\n    confirmClearForm() {\n      this.openConfirmDialog(\"Do you want to clear all sections?\", () => {\n        this.forms[this.currentFormIndex].sections = [];\n        this.activeSection = 0;\n        this.adjustAssignments();\n      });\n    },\n\n    toggleSection(i) {\n      const section = this.forms[this.currentFormIndex].sections[i];\n      section.collapsed = !section.collapsed;\n    },\n    setActiveSection(i) { this.activeSection = i; this.focusSection(i); },\n\n    addFieldToActiveSection(field) {\n      if (!this.currentForm.sections.length) this.addNewSection();\n      const sec = this.currentForm.sections[this.activeSection];\n      if (sec.collapsed) this.toggleSection(this.activeSection);\n\n      const base = {\n        name: `${(field.name || field.type)}_${Date.now()}`,\n        label: field.label,\n        type: field.type,\n        options: (field.type === 'select' || field.type === 'radio')\n          ? (Array.isArray(field.options) && field.options.length ? [...field.options] : ['Option 1'])\n          : (field.options || []),\n        placeholder: field.description || field.placeholder || '',\n        value: field.type === 'checkbox' ? false : \"\",\n        constraints: field.constraints || {}\n      };\n\n      // SLIDER defaults\n      if (base.type === 'slider') {\n        base.value = null;\n        base.constraints = {\n          ...(base.constraints || {}),\n          mode: base.constraints?.mode || 'slider',\n          percent: !!base.constraints?.percent,\n          min: Number.isFinite(base.constraints?.min) ? base.constraints.min : (base.constraints?.percent ? 1 : 1),\n          max: Number.isFinite(base.constraints?.max) ? base.constraints.max : (base.constraints?.percent ? 100 : 100),\n          step: Number.isFinite(base.constraints?.step) ? base.constraints.step : 1,\n          marks: Array.isArray(base.constraints?.marks) ? base.constraints.marks : (base.constraints?.marks || [])\n        };\n      }\n\n      // Date defaults\n      if (base.type === 'date') {\n        base.constraints = { ...base.constraints, dateFormat: base.constraints?.dateFormat || 'dd.MM.yyyy' };\n        base.placeholder = base.placeholder || base.constraints.dateFormat;\n      }\n\n      // File defaults (NEW)\n        if (base.type === 'file') {\n          base.value = null;\n          base.icon = base.icon || icons.paperclip;\n\n          const provided = base.constraints || {};\n          // default modality from label (or fallback to name)\n          const fallbackMod = (String(base.label || '').trim()) || base.name;\n\n          base.constraints = {\n            helpText: provided.helpText || \"\",\n            required: !!provided.required,\n            readonly: !!provided.readonly,\n            allowedFormats: Array.isArray(provided.allowedFormats)\n              ? provided.allowedFormats.map(String).map(s => s.trim()).filter(Boolean)\n              : [],\n            maxSizeMB: (Number.isFinite(provided.maxSizeMB) && Number(provided.maxSizeMB) > 0)\n              ? Number(provided.maxSizeMB)\n              : undefined,\n            storagePreference: (provided.storagePreference === \"url\") ? \"url\" : \"local\",\n            //  Default to label/name when user hasnt picked any modality\n            modalities: (Array.isArray(provided.modalities) && provided.modalities.length)\n              ? provided.modalities\n              : [fallbackMod],\n            // default true when not specified\n            allowMultipleFiles: (provided.allowMultipleFiles === undefined) ? true : !!provided.allowMultipleFiles\n          };\n        }\n\n\n      sec.fields.push(base);\n    },\n\n    editSection(i, v) { if (v) this.currentForm.sections[i].title = v; },\n    editField(si, fi, v) {\n      if (!v) return;\n      const f = this.currentForm.sections[si].fields[fi];\n      const prevLabel = f.label;\n      f.label = v;\n\n      // If it's a file field and modalities were not explicitly chosen,\n      // keep the auto-derived modality in sync with the label.\n      if (f.type === 'file') {\n        const mods = Array.isArray(f.constraints?.modalities) ? f.constraints.modalities : [];\n        const prevTrim = String(prevLabel || '').trim();\n\n        // Update when: none selected OR was previously auto-derived from the old label\n        if (!mods.length || (mods.length === 1 && String(mods[0] || '').trim() === prevTrim)) {\n          const next = (String(v || '').trim()) || f.name;\n          f.constraints = { ...(f.constraints || {}), modalities: [next] };\n        }\n      }\n    },\n\n\n    enforceNumberDigitLimits(sectionIndex, fieldIndex, evt, onBlur = false) {\n      const field = this.currentForm.sections[sectionIndex].fields[fieldIndex];\n      const c = field.constraints || {};\n      if (!c.integerOnly) return;\n      const el = evt?.target || null;\n      let raw = el ? String(el.value ?? \"\") : String(field.value ?? \"\");\n      const digits = raw.replace(/\\D+/g, \"\");\n      if (Number.isFinite(c.maxDigits) && c.maxDigits > 0 && digits.length > c.maxDigits) {\n        const trimmed = digits.slice(0, c.maxDigits);\n        field.value = trimmed === \"\" ? \"\" : Number(trimmed);\n        if (el) el.value = field.value;\n        return;\n      }\n      if (onBlur && Number.isFinite(c.minDigits) && c.minDigits > 0) {\n        if (digits.length > 0 && digits.length < c.minDigits) {\n          // leave as-is; validate elsewhere\n        }\n      }\n    },\n\n    addSimilarField(si, fi) {\n      const f = this.currentForm.sections[si].fields[fi];\n      const clone = {\n        ...f,\n        name: `${f.name}_${Date.now()}`,\n        options: f.options ? [...f.options] : [],\n        constraints: f.constraints || {},\n        value:\n          f.type === 'radio' && f.constraints?.allowMultiple ? [] :\n          (f.type === 'radio' || f.type === 'select') ? '' :\n          (f.type === 'slider' ? null :\n          (f.type === 'file' ? null : f.value))\n      };\n      this.currentForm.sections[si].fields.splice(fi + 1, 0, clone);\n    },\n    removeField(si, fi) { this.currentForm.sections[si].fields.splice(fi, 1); },\n\n    openConstraintsDialog(si, fi) {\n      const f = this.currentForm.sections[si].fields[fi];\n      this.currentFieldIndices = { sectionIndex: si, fieldIndex: fi };\n      this.currentFieldType = f.type === 'slider' ? 'slider' : f.type;\n\n      this.constraintsForm = {\n        ...(f.constraints || {}),\n        type: this.currentFieldType,\n        options: (f.type === 'select' || f.type === 'radio') ? (f.options || []) : undefined,\n        dateFormat: f.type === 'date'\n          ? (f.constraints?.dateFormat || 'dd.MM.yyyy')\n          : undefined,\n        ...(f.type === 'slider' ? {\n          mode: f.constraints?.mode === 'linear' ? 'linear' : 'slider',\n          min: Number.isFinite(f.constraints?.min) ? f.constraints.min : 1,\n          max: Number.isFinite(f.constraints?.max) ? f.constraints.max : 100,\n          step: Number.isFinite(f.constraints?.step) ? f.constraints.step : 1,\n          percent: !!f.constraints?.percent\n        } : {})\n        // file-specific keys already present in f.constraints (allowedFormats, maxSizeMB, etc.)\n      };\n      this.showConstraintsDialog = true;\n    },\n    confirmConstraintsDialog(c) {\n      const { sectionIndex, fieldIndex } = this.currentFieldIndices;\n      const f = this.currentForm.sections[sectionIndex].fields[fieldIndex];\n      const originalType = f.type;\n\n      if (originalType === 'file') {\n        // Assign cleaned constraints as emitted by FieldConstraintsDialog\n        const cleaned = {\n          helpText: c.helpText || \"\",\n          required: !!c.required,\n          readonly: !!c.readonly,\n          allowedFormats: Array.isArray(c.allowedFormats) ? c.allowedFormats : [],\n          maxSizeMB: (Number.isFinite(c.maxSizeMB) && c.maxSizeMB > 0) ? Number(c.maxSizeMB) : undefined,\n          storagePreference: (c.storagePreference === 'url') ? 'url' : 'local',\n          modalities: Array.isArray(c.modalities)\n            ? c.modalities.filter(Boolean).map(String)\n            : [],\n          allowMultipleFiles: c.allowMultipleFiles !== false // default true\n        };\n\n        // If user hasnt selected any modality, default to field label\n        if (!cleaned.modalities.length) {\n            const fallback = (String(f.label || '').trim()) || f.name;\n            cleaned.modalities = [fallback];\n            console.log(\"[ScratchForm] Constraints: defaulted modalities to\", cleaned.modalities, \"for\", fallback);\n          }\n\n        f.constraints = cleaned;\n        // Keep current value as-is; builder doesnt persist files\n        this.showConstraintsDialog = false;\n        return;\n      }\n      // Non-slider\n      if (originalType !== 'slider') {\n        const norm = normalizeConstraints(originalType, c);\n\n        // Choice types: keep existing handling\n        if ((f.type === 'select' || f.type === 'radio') && Array.isArray(c.options)) {\n          const cleaned = c.options.map(o => String(o || '').trim()).filter(Boolean);\n          f.options = cleaned.length ? cleaned : ['Option 1'];\n        }\n\n        if (f.type === 'radio') {\n          if (norm.allowMultiple) {\n            if (!Array.isArray(f.value)) f.value = [];\n            f.value = f.value.filter(v => f.options.includes(v));\n            if (Object.prototype.hasOwnProperty.call(norm, \"defaultValue\")) {\n              const dv = Array.isArray(norm.defaultValue) ? norm.defaultValue : [];\n              f.value = dv.filter(v => f.options.includes(v));\n            }\n          } else {\n            if (Array.isArray(f.value)) f.value = f.value[0] || '';\n            if (!f.options.includes(f.value)) f.value = '';\n            if (Object.prototype.hasOwnProperty.call(norm, \"defaultValue\")) {\n              const dv = typeof norm.defaultValue === 'string' ? norm.defaultValue : '';\n              f.value = f.options.includes(dv) ? dv : '';\n            }\n          }\n        } else if (f.type === 'select') {\n          if (Array.isArray(f.value)) f.value = f.value[0] || '';\n          if (!f.options.includes(f.value)) f.value = '';\n          if (Object.prototype.hasOwnProperty.call(norm, \"defaultValue\")) {\n            const dv = typeof norm.defaultValue === 'string' ? norm.defaultValue : '';\n            f.value = f.options.includes(dv) ? dv : '';\n          }\n        }\n\n        if (Object.prototype.hasOwnProperty.call(norm, \"placeholder\") && f.type !== 'checkbox' && f.type !== 'file') {\n          f.placeholder = norm.placeholder || \"\";\n        }\n\n        if (\n          f.type !== 'radio' &&\n          f.type !== 'select' &&\n          f.type !== 'slider' &&\n          f.type !== 'file' &&\n          Object.prototype.hasOwnProperty.call(norm, \"defaultValue\")\n        ) {\n          const coerced = coerceDefaultForType(f.type, norm.defaultValue);\n          if (coerced !== undefined) f.value = coerced;\n        }\n\n        if (f.type === 'date' && (c.dateFormat || norm.dateFormat)) {\n          const fmt = c.dateFormat || norm.dateFormat;\n          f.placeholder = fmt;\n          norm.dateFormat = fmt;\n        }\n\n        //  merge file-specific constraints explicitly to avoid normalization stripping them\n        if (originalType === 'file') {\n          const fileKeys = [\n            \"allowedFormats\",\"maxSizeMB\",\"allowLocal\",\"allowUrl\",\"storagePreference\",\"modalities\",\"allowMultipleFiles\"\n          ];\n          const extra = {};\n          fileKeys.forEach(k => {\n            if (Object.prototype.hasOwnProperty.call(c, k)) extra[k] = c[k];\n          });\n          f.constraints = { ...norm, ...extra };\n        } else {\n        f.constraints = { ...norm };\n        }\n\n        if (\n          (f.value === '' || f.value === undefined || f.value === null) &&\n          Object.prototype.hasOwnProperty.call(f.constraints, 'defaultValue') &&\n          f.type !== 'file'\n        ) {\n          f.value = f.constraints.defaultValue;\n        }\n\n        this.showConstraintsDialog = false;\n        return;\n      }\n\n      // Slider -> Linear mode\n      if (c.mode === 'linear') {\n        let min = Number.isFinite(+c.min) ? Math.round(+c.min) : 1;\n        let max = Number.isFinite(+c.max) ? Math.round(+c.max) : 5;\n        if (max <= min) max = min + 1;\n        if (max - min + 1 > 10) max = min + 9;\n\n        f.constraints = {\n          mode: 'linear',\n          required: !!c.required,\n          readonly: !!c.readonly,\n          helpText: c.helpText || '',\n          min, max,\n          leftLabel: c.leftLabel || '',\n          rightLabel: c.rightLabel || ''\n        };\n        f.value = null;\n        this.showConstraintsDialog = false;\n        return;\n      }\n\n      // Slider -> Slider mode\n      let min = Number.isFinite(+c.min) ? +c.min : 1;\n      let max = Number.isFinite(+c.max) ? +c.max : (c.percent ? 100 : 5);\n      if (max <= min) max = min + 1;\n      let step = Number.isFinite(+c.step) && +c.step > 0 ? +c.step : (c.percent ? 1 : 1);\n\n      f.constraints = {\n        mode: 'slider',\n        required: !!c.required,\n        readonly: !!c.readonly,\n        helpText: c.helpText || '',\n        percent: !!c.percent,\n        min, max, step,\n        marks: Array.isArray(c.marks) ? c.marks : []\n      };\n\n      const v = Number(f.value);\n      f.value = Number.isFinite(v) && v >= min && v <= max ? v : null;\n      this.showConstraintsDialog = false;\n    },\n\n    cancelConstraintsDialog() { this.showConstraintsDialog = false; },\n\n    saveForm() { this.openGenericDialog(\"Saved!\"); },\n\n    downloadFormData() {\n      const payload = {\n        sections: this.currentForm.sections.map(sec => ({\n          title: sec.title,\n          fields: sec.fields,\n          source: sec.source\n        }))\n      };\n      const str = JSON.stringify(payload, null, 2);\n      const name = \"sections.json\";\n      const blob = new Blob([str], { type: \"application/json\" });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url; a.download = name; a.click();\n      URL.revokeObjectURL(url);\n    },\n\n    openUploadDialog() { this.showUploadDialog = true; },\n    closeUploadDialog() { this.showUploadDialog = false; },\n    handleFileChange(e) {\n      const file = e.target.files[0];\n      if (!file) return this.openGenericDialog(\"No file selected.\");\n      const reader = new FileReader();\n      reader.onload = evt => {\n        try {\n          const pd = JSON.parse(evt.target.result);\n          if (Array.isArray(pd.sections)) {\n            pd.sections = pd.sections.map(sec => ({\n              ...sec,\n              fields: sec.fields.map(field => ({\n                ...field,\n                constraints: field.constraints || {}\n              }))\n            }));\n            this.currentForm.sections = pd.sections;\n            this.adjustAssignments();\n          } else throw new Error(\"Bad format\");\n        } catch (err) {\n          console.error(err);\n          this.openGenericDialog(\"Invalid file. Expect `{ \\\"sections\\\": [...] }`.\");\n        }\n      };\n      reader.readAsText(file);\n      this.showUploadDialog = false;\n    },\n\n    async loadDataModels() {\n      try {\n        const res = await fetch(\"/template_schema.yaml\")\n        const doc = yaml.load(await res.text())\n        this.dataModels = Object.entries(doc.classes)\n          .filter(([n]) => n !== \"Study\")\n          .map(([n, cls]) => ({\n            title: n,\n            description: cls.description || \"\",\n            fields: Object.entries(cls.attributes).map(([attr, def]) => ({\n              name: attr,\n              label: def.label || this.prettyModelTitle(attr),\n              description: def.description || \"\",\n              type: this.resolveType(def),\n              options: def.enum || [],\n              rows: def.ui?.rows,\n              constraints: { required: !!def.required, ...(def.constraints || {}) },\n              placeholder: def.ui?.placeholder || def.description || \"\"\n            }))\n          }))\n      } catch (e) { console.error(\"Failed to load data models:\", e) }\n    },\n    resolveType(def) {\n      const ui = def.ui || {}\n      const dt = String(def.datatype || '').toLowerCase()\n      const range = String(def.range || '').toLowerCase()\n      if (ui.widget === 'textarea' || dt === 'textarea') return 'textarea'\n      if (ui.widget === 'radio'    || dt === 'radio')    return 'radio'\n      if (ui.widget === 'dropdown' || dt === 'dropdown' || def.enum) return 'select'\n      if (range === 'date' || range === 'datetime') return 'date'\n      if (['integer','decimal','number'].includes(range)) return 'number'\n      if (ui.widget === 'file' || dt === 'file' || range === 'file') return 'file'\n      return 'text'\n    }\n  }\n};\n</script>\n\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/styles/_base.scss\";\n\n.create-form-container {\n  width: 100%;\n  min-height: 100vh;\n  padding: 20px;\n  background-color: $light-background;\n}\n\n.header-container {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 15px;\n}\n\n.btn-back {\n  @include button-reset;\n  font-size: 16px;\n  color: $text-color;\n}\n\n.scratch-form-content {\n  display: flex;\n  gap: 20px;\n}\n\n/* AVAILABLE FIELDS */\n.available-fields {\n  width: 300px;\n  background: white;\n  padding: 20px;\n  border: 1px solid $border-color;\n  border-radius: 8px;\n  max-height: calc(100vh - 60px);\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.tabs {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 15px;\n}\n\n.tabs button {\n  padding: 10px;\n  border: 1px solid $border-color;\n  background: $secondary-color;\n  border-radius: 4px;\n  flex: 1;\n  cursor: pointer;\n}\n\n.tabs button.active {\n  background: $primary-color;\n  color: white;\n  border: none;\n}\n\n.template-fields,\n.custom-fields,\n.shacl {\n  padding: 10px 0;\n}\n\n.template-instruction {\n  font-style: italic;\n  margin-bottom: 10px;\n}\n\n.class-item.clickable {\n  cursor: pointer;\n  padding: 5px 0;\n  font-weight: bold;\n}\n\n/* CUSTOM FIELDS */\n.custom-fields .available-field-button {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px;\n  background: #f0f4f8;\n  border: 1px solid $border-color;\n  border-radius: 4px;\n  margin-bottom: 8px;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n.custom-fields .available-field-button:hover {\n  background: #e3effd;\n}\n.custom-fields .field-label {\n  flex: 1;\n}\n\n/* FORM AREA */\n.form-area {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  background: white;\n  padding: 20px;\n  border: 1px solid $border-color;\n  border-radius: 8px;\n  min-width: 600px;\n  height: calc(100vh - 60px);\n}\n\n.sections-container {\n  flex: 1;\n  overflow-y: auto;\n  padding-right: 10px;\n  position: relative;\n}\n\n.form-section {\n  padding: 15px;\n  border-bottom: 1px solid $border-color;\n  background: #f5f5f5;\n  margin-bottom: 10px;\n  border-radius: 8px;\n}\n\n.form-section.active {\n  background: #e7f3ff;\n  border-left: 3px solid $text-color;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n/* Vertical stack for fields */\n.section-content { display:flex; flex-direction:column; gap:14px; }\n.form-group {\n  background: #ffffff;\n  border: 1px solid $border-color;\n  border-radius: 10px;\n  padding: 12px;\n  box-shadow: 0 1px 2px rgba(0,0,0,0.04);\n  transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.05s ease;\n}\n.form-group:hover { border-color: rgba(0,0,0,0.12); box-shadow: 0 6px 12px rgba(0,0,0,0.06); }\n.form-group:focus-within { border-color: rgba($primary-color, 0.6); box-shadow: 0 0 0 3px rgba($primary-color, 0.12); }\n\n.field-header { display:flex; justify-content:space-between; align-items:flex-start; gap:8px; margin-bottom:8px; }\n.field-header > label { font-weight: 600; color: #111827; line-height: 1.25; }\n\n.icon-button { border:none; background:transparent; padding:6px; border-radius:8px; cursor:pointer; line-height:0; transition: background 0.15s ease, transform 0.02s ease; }\n.icon-button:hover { background: rgba(0,0,0,0.06); }\n.icon-button:active { transform: scale(0.98); }\n.icon-button i { font-size:14px; color:#374151; }\n\n.field-actions { display:flex; gap:6px; }\n.field-box { margin-top:6px; }\n\n.field-header .checkbox-label { display:flex; align-items:center; gap:10px; }\n.field-box .radio-group { display:flex; flex-direction:column; gap:8px; margin-bottom:10px; }\n\ninput, textarea, select {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid $border-color;\n  border-radius: 8px;\n  margin-top: 5px;\n  background: #fff;\n}\n\ntextarea { resize: vertical; }\n\n.help-text { display:inline-block; margin-top:6px; color:#6b7280; }\n\n/* actions footer */\n.form-actions {\n  position: sticky;\n  bottom: 0;\n  background: white;\n  padding: 15px 0;\n  border-top: 1px solid $border-color;\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  z-index: 10;\n}\n\n.btn-option {\n  background: $secondary-color;\n  padding: $button-padding;\n  border: 1px solid $border-color;\n  border-radius: $button-border-radius;\n  cursor: pointer;\n  flex: 1;\n}\n\n.protocol-btn::after { content: ' '; }\n\n.btn-primary {\n  background: $primary-color;\n  color: white;\n  padding: $button-padding;\n  border-radius: $button-border-radius;\n  cursor: pointer;\n  flex: 1;\n}\n\n/* modals (unchanged) */\n.modal-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.5); display:flex; align-items:center; justify-content:center; z-index:1000; }\n.modal { background:white; padding:20px; border-radius:8px; max-width:90%; max-height:90%; overflow-y:auto; }\n.modal.model-dialog { width:400px; max-height:80vh; padding:20px 16px; }\n.preview-modal { width:500px; height:80vh; display:flex; flex-direction:column; }\n.preview-header { display:flex; justify-content:space-between; align-items:center; background:#f2f3f4; padding:10px; }\n.preview-content { flex:1; background:white; padding:10px; overflow-y:auto; }\n.modal-actions { display:flex; justify-content:flex-end; gap:10px; margin-top:10px; }\n.input-dialog-field { width:100%; padding:8px; margin-top:5px; }\n\n/* Template buttons */\n.template-button { display:flex; flex-direction:column; align-items:flex-start; justify-content:flex-start; width:100%; padding:10px 12px; margin:6px 0; background-color:#f9fafb; border:1px solid #d1d5db; border-radius:6px; cursor:pointer; transition: background .2s, box-shadow .2s; box-sizing:border-box; }\n.template-button:hover { background-color:#f3f4f6; box-shadow:0 2px 6px rgba(0,0,0,0.05); }\n.template-header { display:flex; align-items:center; font-weight:600; font-size:14px; color:#111827; margin-bottom:4px; }\n.template-header i { margin-right:8px; font-size:16px; color:#374151; }\n.template-description { font-size:12px; color:#6b7280; line-height:1.4; overflow-wrap:anywhere; }\n</style>\n","<template>\n  <div class=\"shacl-components\">\n    <h2>SHACL Classes</h2>\n    <p v-if=\"loading\">Loading SHACL components...</p>\n    <p v-else-if=\"error\">Error loading SHACL components: {{ error }}</p>\n    <ul v-else>\n      <li\n        v-for=\"(iri, index) in filteredShapeIRIs\"\n        :key=\"index\"\n        @click=\"openDialog(iri)\"\n        class=\"shape-item\"\n      >\n        {{ getClassName(iri) }}\n      </li>\n    </ul>\n\n    <!-- Render each dialog in the stack -->\n    <div\n      v-for=\"(dialog, dIndex) in dialogStack\"\n      :key=\"dIndex\"\n      class=\"dialog-overlay\"\n      :style=\"{ zIndex: 1000 + dIndex }\"\n      @click.self=\"dIndex === dialogStack.length - 1 && cancelDialog()\"\n    >\n      <div class=\"dialog\" @click.stop>\n        <h3>{{ getClassName(dialog.iri) }}</h3>\n        <div class=\"scrollable-content\">\n          <form>\n            <!-- Iterate over groups -->\n            <div\n              v-for=\"(group, gIndex) in dialog.groups\"\n              :key=\"gIndex\"\n              class=\"group-container\"\n            >\n              <!-- Render group header -->\n              <h4 class=\"group-header\">{{ formatGroupName(group.name) }}</h4>\n              <!-- Iterate over properties in the group -->\n              <div\n                v-for=\"(prop, pIndex) in group.properties\"\n                :key=\"pIndex\"\n                class=\"form-group\"\n              >\n                <label :for=\"'input-' + dIndex + '-' + gIndex + '-' + pIndex\">\n                  {{ prop.name }}\n                </label>\n                <div class=\"field-container\">\n                  <!-- For non-reference fields, render the input -->\n                  <template v-if=\"prop.datatype !== 'reference'\">\n                    <template v-if=\"prop.datatype === 'string'\">\n                      <input\n                        type=\"text\"\n                        :id=\"'input-' + dIndex + '-' + gIndex + '-' + pIndex\"\n                        v-model=\"prop.value\"\n                        placeholder=\"Enter text\"\n                      />\n                    </template>\n                    <template v-else-if=\"prop.datatype === 'number'\">\n                      <input\n                        type=\"number\"\n                        :id=\"'input-' + dIndex + '-' + gIndex + '-' + pIndex\"\n                        v-model=\"prop.value\"\n                        placeholder=\"Enter number\"\n                      />\n                    </template>\n                    <template v-else-if=\"prop.datatype === 'date'\">\n                      <input\n                        type=\"date\"\n                        :id=\"'input-' + dIndex + '-' + gIndex + '-' + pIndex\"\n                        v-model=\"prop.value\"\n                      />\n                    </template>\n                    <!-- Updated branch: For datetime, use calendar (input type date) only -->\n                    <template v-else-if=\"prop.datatype === 'datetime'\">\n                      <input\n                        type=\"date\"\n                        :id=\"'input-' + dIndex + '-' + gIndex + '-' + pIndex\"\n                        v-model=\"prop.value\"\n                        placeholder=\"Select date\"\n                      />\n                    </template>\n                    <template v-else-if=\"prop.datatype === 'select'\">\n                      <select\n                        :id=\"'input-' + dIndex + '-' + gIndex + '-' + pIndex\"\n                        v-model=\"prop.value\"\n                      >\n                        <option\n                          v-for=\"option in prop.options\"\n                          :key=\"option\"\n                          :value=\"option\"\n                        >\n                          {{ option }}\n                        </option>\n                      </select>\n                    </template>\n                    <template v-else-if=\"prop.datatype === 'uri'\">\n                      <input\n                        type=\"url\"\n                        :id=\"'input-' + dIndex + '-' + gIndex + '-' + pIndex\"\n                        v-model=\"prop.value\"\n                        placeholder=\"Enter URL\"\n                      />\n                    </template>\n                    <template v-else>\n                      <input\n                        type=\"text\"\n                        :id=\"'input-' + dIndex + '-' + gIndex + '-' + pIndex\"\n                        v-model=\"prop.value\"\n                        placeholder=\"Enter text\"\n                      />\n                    </template>\n                  </template>\n                  <!-- For reference fields, no input is rendered -->\n                  <template v-else>\n                    <!-- (No input for reference fields) -->\n                  </template>\n                  <!-- Action buttons appear inline next to the field -->\n                  <div class=\"action-buttons\">\n                    <template v-if=\"prop.datatype === 'reference'\">\n                      <button\n                        @click.prevent=\"editReferenceField(gIndex, pIndex)\"\n                        class=\"btn\"\n                      >\n                        View Class: {{ getClassName(prop.classRef) }}\n                      </button>\n                      <button\n                        @click.prevent=\"openDeleteDialog(gIndex, pIndex)\"\n                        class=\"btn\"\n                      >\n                        Delete\n                      </button>\n                    </template>\n                    <template v-else>\n                      <button\n                        @click.prevent=\"openEditFieldDialog(gIndex, pIndex)\"\n                        class=\"btn\"\n                      >\n                        Edit\n                      </button>\n                      <button\n                        @click.prevent=\"openDeleteDialog(gIndex, pIndex)\"\n                        class=\"btn\"\n                      >\n                        Delete\n                      </button>\n                    </template>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n        <div class=\"dialog-buttons\">\n          <button v-if=\"dIndex > 0\" @click=\"saveReference\" class=\"btn\">\n            Save\n          </button>\n          <button @click=\"cancelDialog\" class=\"btn\">\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Edit Field Name Modal -->\n    <div\n      v-if=\"editFieldDialog\"\n      class=\"edit-dialog-overlay\"\n      @click.self=\"cancelEditFieldDialog\"\n    >\n      <div class=\"edit-dialog\" @click.stop>\n        <h3>Edit Field Name</h3>\n        <input type=\"text\" v-model=\"editFieldDialog.newName\" />\n        <div class=\"dialog-buttons\">\n          <button @click=\"saveEditedFieldName\" class=\"btn\">Save</button>\n          <button @click=\"cancelEditFieldDialog\" class=\"btn\">Cancel</button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Delete Confirmation Modal -->\n    <div\n      v-if=\"deleteFieldDialog\"\n      class=\"delete-dialog-overlay\"\n      @click.self=\"cancelDeleteDialog\"\n    >\n      <div class=\"delete-dialog\" @click.stop>\n        <h3>Confirm Deletion</h3>\n        <p>Are you sure you want to delete \"{{ deleteFieldDialog.fieldName }}\"?</p>\n        <div class=\"dialog-buttons\">\n          <button @click=\"confirmDelete\" class=\"btn\">Yes</button>\n          <button @click=\"cancelDeleteDialog\" class=\"btn\">No</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, computed } from \"vue\";\nimport { ShapesDataset } from \"shacl-tulip\";\n\nexport default {\n  name: \"ShaclComponents\",\n  emits: [],\n  setup() {\n    const loading = ref(true);\n    const error = ref(null);\n    const dialogStack = ref([]);\n    const nodeShapes = ref({});\n    const nodeShapeIRIs = ref([]);\n    const editFieldDialog = ref(null);\n    const deleteFieldDialog = ref(null);\n\n    const config = { showOnlyClassesWithId: true };\n\n    function getClassName(uri) {\n      const name = uri.split(\"/\").pop();\n      console.log(`Transforming IRI: ${uri} --> Class Name: ${name}`);\n      return name;\n    }\n\n    function extractLastSegment(url) {\n      const lastSegment = url.split(\"/\").pop();\n      if (lastSegment.includes(\"22-rdf-syntax-ns#\")) {\n        const parts = lastSegment.split(\"22-rdf-syntax-ns#\");\n        const extracted = parts[1] || lastSegment;\n        console.log(`Extracted \"${extracted}\" from last segment \"${lastSegment}\"`);\n        return extracted;\n      }\n      return lastSegment;\n    }\n\n    function getOrder(prop) {\n      const order = prop[\"http://www.w3.org/ns/shacl#order\"];\n      if (\n        order === undefined ||\n        order === null ||\n        (typeof order === \"string\" && order.trim() === \"\")\n      ) {\n        return Infinity;\n      }\n      const n = parseInt(order, 10);\n      return isNaN(n) ? Infinity : n;\n    }\n\n    function formatGroupName(groupValue) {\n      return groupValue === \"Ungrouped\"\n        ? \"Default Properties\"\n        : extractLastSegment(groupValue);\n    }\n\n    const filteredShapeIRIs = computed(() => {\n      if (!nodeShapeIRIs.value) {\n        console.log(\"No nodeShapeIRIs available, returning empty array.\");\n        return [];\n      }\n      console.log(\"Original nodeShapeIRIs:\", nodeShapeIRIs.value);\n      let result = [];\n      if (config.showOnlyClassesWithId) {\n        result = nodeShapeIRIs.value.filter((iri) => {\n          const shape = nodeShapes.value[iri];\n          if (!shape || !shape.properties) {\n            console.log(`Shape ${iri} has no properties; excluding.`);\n            return false;\n          }\n          const hasId = shape.properties.some((prop) => {\n            const path = prop[\"http://www.w3.org/ns/shacl#path\"];\n            const match =\n              typeof path === \"string\" &&\n              path.toLowerCase().endsWith(\"/id\");\n            console.log(\n              `Shape ${iri}: property path ${path} ${\n                match ? \"matches\" : \"does not match\"\n              } the dynamic id check.`\n            );\n            return match;\n          });\n          return hasId;\n        });\n        console.log(\"Filtered IRIs with dynamic id check:\", result);\n      } else {\n        result = nodeShapeIRIs.value;\n        console.log(\n          \"showOnlyClassesWithId flag is false, returning all IRIs:\",\n          result\n        );\n      }\n      return result;\n    });\n\n    const dataTypeMapping = {\n      \"http://www.w3.org/2001/XMLSchema#string\": \"string\",\n      \"http://www.w3.org/2001/XMLSchema#integer\": \"number\",\n      \"http://www.w3.org/2001/XMLSchema#boolean\": \"boolean\",\n      \"http://www.w3.org/2001/XMLSchema#date\": \"date\",\n      \"http://www.w3.org/2001/XMLSchema#anyURI\": \"uri\",\n      \"https://www.w3.org/TR/NOTE-datetime\": \"datetime\"\n    };\n\n    onMounted(() => {\n      console.log(\"Fetching SHACL schema...\");\n      const shapesDS = new ShapesDataset();\n      const fileUrl = \"/dlschemas_shacl.ttl\";\n      shapesDS.addEventListener(\"graphLoaded\", (event) => {\n        console.log(\"Shapes graph fully loaded:\", event.detail);\n        console.log(\"Property Groups:\", shapesDS.propertyGroups);\n        console.log(\"Node Shapes:\", shapesDS.nodeShapes);\n        console.log(\"Node Shape IRIs:\", shapesDS.nodeShapeIRIs);\n        nodeShapes.value = shapesDS.nodeShapes;\n        nodeShapeIRIs.value = shapesDS.nodeShapeIRIs;\n        loading.value = false;\n      });\n      shapesDS.loadRDF(fileUrl).catch((err) => {\n        error.value = err.message;\n        loading.value = false;\n        console.error(\"Error loading SHACL schema:\", err);\n      });\n    });\n\n    function openDialog(iri, parentInfo = null) {\n      console.log(\"Opening dialog for IRI:\", iri);\n      const record = nodeShapes.value[iri];\n      if (record) {\n        console.log(`Processing shape record for IRI: ${iri}`);\n        const groupsObj = {};\n        record.properties.forEach((prop) => {\n          let groupVal = prop[\"http://www.w3.org/ns/shacl#group\"];\n          if (!groupVal || groupVal.trim() === \"\") {\n            groupVal = \"Ungrouped\";\n          }\n          if (!groupsObj[groupVal]) {\n            groupsObj[groupVal] = [];\n          }\n          groupsObj[groupVal].push(prop);\n        });\n        let groupKeys = Object.keys(groupsObj);\n        groupKeys.sort((a, b) => {\n          if (a === \"Ungrouped\" && b !== \"Ungrouped\") return 1;\n          if (b === \"Ungrouped\" && a !== \"Ungrouped\") return -1;\n          return a.localeCompare(b);\n        });\n        const groupsArray = groupKeys.map((key) => {\n          const sortedProps = groupsObj[key]\n            .slice()\n            .sort((a, b) => getOrder(a) - getOrder(b))\n            .map((prop, idx) => {\n              console.log(\n                `\\nProcessing property (group: ${key}) #${idx}:`,\n                JSON.stringify(prop, null, 2)\n              );\n              const nameValue = prop[\"http://www.w3.org/ns/shacl#name\"];\n              let fieldName = \"\";\n              if (nameValue && nameValue.trim() !== \"\") {\n                fieldName = nameValue;\n                console.log(`Property #${idx}: Found shacl#name: \"${nameValue}\"`);\n              } else {\n                const pathValue = prop[\"http://www.w3.org/ns/shacl#path\"];\n                if (pathValue && pathValue.trim() !== \"\") {\n                  fieldName = extractLastSegment(pathValue);\n                  console.log(\n                    `Property #${idx}: shacl#name is empty, using extracted label from shacl#path: \"${fieldName}\"`\n                  );\n                } else {\n                  fieldName = \"Unnamed\";\n                  console.log(\n                    `Property #${idx}: Both shacl#name and shacl#path are empty. Defaulting to \"Unnamed\"`\n                  );\n                }\n              }\n              let fieldType = \"\";\n              let classRef = \"\";\n              if (prop[\"http://www.w3.org/ns/shacl#class\"]) {\n                fieldType = \"reference\";\n                classRef = prop[\"http://www.w3.org/ns/shacl#class\"];\n                console.log(\n                  `Property #${idx}: Found shacl#class: \"${classRef}\". Setting type to \"reference\".`\n                );\n              } else {\n                const datatypeURI = prop[\"http://www.w3.org/ns/shacl#datatype\"];\n                fieldType = dataTypeMapping[datatypeURI] || \"string\";\n                console.log(\n                  `Property #${idx}: datatype URI: \"${datatypeURI}\" mapped to type: \"${fieldType}\"`\n                );\n              }\n              const options = prop[\"http://www.w3.org/ns/shacl#in\"] || [];\n              console.log(`Property #${idx}: options:`, options);\n              return {\n                name: fieldName,\n                order: getOrder(prop),\n                datatype: fieldType,\n                options: options,\n                value: null,\n                classRef: classRef,\n              };\n            });\n          return { name: key, properties: sortedProps };\n        });\n\n        const dialogData = {\n          iri,\n          groups: groupsArray,\n          parentInfo,\n        };\n        console.log(\"Final dialog data JSON:\", JSON.stringify(dialogData, null, 2));\n        dialogStack.value.push(dialogData);\n      } else {\n        console.warn(\"No record found for IRI:\", iri);\n      }\n    }\n\n    function openEditFieldDialog(groupIndex, propertyIndex) {\n      const currentDialog = dialogStack.value[dialogStack.value.length - 1];\n      const field = currentDialog.groups[groupIndex].properties[propertyIndex];\n      editFieldDialog.value = { groupIndex, propertyIndex, newName: field.name };\n    }\n\n    function saveEditedFieldName() {\n      if (editFieldDialog.value) {\n        const { groupIndex, propertyIndex, newName } = editFieldDialog.value;\n        const currentDialog = dialogStack.value[dialogStack.value.length - 1];\n        console.log(\n          `Updating field name at group ${groupIndex}, index ${propertyIndex} to \"${newName}\"`\n        );\n        currentDialog.groups[groupIndex].properties[propertyIndex].name = newName;\n        editFieldDialog.value = null;\n      }\n    }\n\n    function cancelEditFieldDialog() {\n      editFieldDialog.value = null;\n    }\n\n    function editReferenceField(groupIndex, propertyIndex) {\n      editField(groupIndex, propertyIndex);\n    }\n\n    function editField(groupIndex, propertyIndex) {\n      const currentDialog = dialogStack.value[dialogStack.value.length - 1];\n      const field = currentDialog.groups[groupIndex].properties[propertyIndex];\n      if (field.datatype === \"reference\" && field.classRef) {\n        const currentIndex = dialogStack.value.length - 1;\n        console.log(\n          `Editing reference field \"${field.name}\". Opening dialog for referenced class: ${field.classRef}`\n        );\n        openDialog(field.classRef, {\n          parentDialogIndex: currentIndex,\n          fieldLocation: { groupIndex, propertyIndex },\n        });\n      } else {\n        openEditFieldDialog(groupIndex, propertyIndex);\n      }\n    }\n\n    function openDeleteDialog(groupIndex, propertyIndex) {\n      const currentDialog = dialogStack.value[dialogStack.value.length - 1];\n      const field = currentDialog.groups[groupIndex].properties[propertyIndex];\n      deleteFieldDialog.value = { groupIndex, propertyIndex, fieldName: field.name };\n    }\n\n    function confirmDelete() {\n      const { groupIndex, propertyIndex } = deleteFieldDialog.value;\n      const currentDialog = dialogStack.value[dialogStack.value.length - 1];\n      console.log(\n        `Deleting field at group ${groupIndex}, index ${propertyIndex}`\n      );\n      currentDialog.groups[groupIndex].properties.splice(propertyIndex, 1);\n      deleteFieldDialog.value = null;\n    }\n\n    function cancelDeleteDialog() {\n      deleteFieldDialog.value = null;\n    }\n\n    function deleteField(groupIndex, propertyIndex) {\n      openDeleteDialog(groupIndex, propertyIndex);\n    }\n\n    function saveReference() {\n      const childDialog = dialogStack.value.pop();\n      if (childDialog.parentInfo) {\n        const { parentDialogIndex, fieldLocation } = childDialog.parentInfo;\n        const parentDialog = dialogStack.value[parentDialogIndex];\n        console.log(\n          `Saving reference. Updating parent's field at group ${fieldLocation.groupIndex}, index ${fieldLocation.propertyIndex} with data:`,\n          childDialog\n        );\n        parentDialog.groups[fieldLocation.groupIndex].properties[fieldLocation.propertyIndex].value = childDialog;\n      }\n    }\n\n    function cancelDialog() {\n      dialogStack.value.pop();\n    }\n\n    function closeDialog() {\n      dialogStack.value = [];\n    }\n\n    return {\n      loading,\n      error,\n      dialogStack,\n      filteredShapeIRIs,\n      getClassName,\n      openDialog,\n      closeDialog,\n      editField,\n      editReferenceField,\n      deleteField,\n      saveReference,\n      cancelDialog,\n      formatGroupName,\n      editFieldDialog,\n      openEditFieldDialog,\n      saveEditedFieldName,\n      cancelEditFieldDialog,\n      deleteFieldDialog,\n      openDeleteDialog,\n      confirmDelete,\n      cancelDeleteDialog,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.shacl-components {\n  background: white;\n  padding: 20px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  margin-top: 10px;\n}\n.shape-item {\n  cursor: pointer;\n  color: #555;\n  text-decoration: underline;\n  margin: 5px 0;\n}\n.shape-item:hover {\n  color: #333;\n}\n.dialog-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.dialog {\n  background: white;\n  padding: 30px;\n  border-radius: 10px;\n  max-width: 600px;\n  width: 90%;\n  max-height: 70vh;\n  overflow-y: auto;\n}\n.scrollable-content {\n  max-height: 50vh;\n  overflow-y: auto;\n  padding: 10px;\n  border-top: 1px solid #ddd;\n}\n.group-container {\n  margin-bottom: 20px;\n}\n.group-header {\n  margin-bottom: 10px;\n  font-size: 1.1em;\n  font-weight: bold;\n  border-bottom: 1px solid #ccc;\n  padding-bottom: 4px;\n}\n.form-group {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 10px;\n}\nlabel {\n  font-weight: 500;\n  margin-bottom: 4px;\n}\n.field-container {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  width: 100%;\n}\n.field-container input,\n.field-container select {\n  flex: 1;\n  padding: 6px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n.action-buttons {\n  display: flex;\n  gap: 5px;\n}\n.btn {\n  padding: 4px 8px;\n  border: 1px solid #ccc;\n  background-color: #f5f5f5;\n  cursor: pointer;\n  border-radius: 4px;\n  font-size: 0.9em;\n  color: #333;\n}\n.btn:hover {\n  background-color: #e0e0e0;\n}\n.dialog-buttons {\n  margin-top: 10px;\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n}\n.close-button {\n  display: block;\n  margin: 15px auto 0;\n  padding: 8px 12px;\n  background: #ddd;\n  border: none;\n  cursor: pointer;\n  border-radius: 5px;\n}\n.edit-dialog-overlay,\n.delete-dialog-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n}\n.edit-dialog,\n.delete-dialog {\n  background: #fff;\n  padding: 30px;\n  border-radius: 8px;\n  max-width: 400px;\n  width: 90%;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);\n}\n.edit-dialog h3,\n.delete-dialog h3 {\n  margin-top: 0;\n  font-size: 1.2em;\n  margin-bottom: 20px;\n}\n.edit-dialog input {\n  width: 100%;\n  padding: 10px;\n  font-size: 1em;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  margin-bottom: 20px;\n}\n.edit-dialog .dialog-buttons,\n.delete-dialog .dialog-buttons {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n}\n</style>\n","/**\n * @module io.js\n * @description This module provides common functionality for reading and writing\n * to files or endpoints\n * \n * It depends mainly on [fetch-lite](https://github.com/rdfjs-base/fetch-lite) for reading RDF data\n * into streams and writing stream data to serialized RDF formats\n */\n\nimport formats from '@rdfjs/formats-common'\nimport fetch from '@rdfjs/fetch-lite'\n\nexport async function readRDF(file_url, headers = { \"Content-Type\": \"text/turtle\" }) {\n    const url = file_url;\n    try {\n        console.log(url)\n        var res = null\n        res = await fetch(url,\n            {\n                formats, \n                headers: headers\n            }\n        )\n        // Handle cases where the server returns generic 'text/plain' or 'text/html' content type\n        if (['text/plain', 'text/html'].indexOf(res.headers.get('content-type')) >= 0) {\n            // default to turtle\n            headers['Content-Type'] = 'text/turtle';\n            res = await fetch(url, { formats, headers });\n        }\n\n        if (!res.ok) {\n            // throw new Error(`readRDF error: ${res.statusText}`)\n            const code = res.status || 'Unknown';\n            const error = new Error(`readRDF error: HTTP ${code} from ${url}`);\n            error.status = code;\n            error.url = url;\n            error.response = res;\n            throw error\n        }\n\n        if (res.headers.get('content-type').indexOf('application/json') >= 0) {\n            throw new Error(`readRDF error: reading json data is not supported`);\n        }\n\n        const quadStream = await res.quadStream()\n        return {\n            success: true,\n            quadStream,\n            url: url,\n            message: 'RDF data loaded successfully',\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error,\n            url: url,\n            message: error.message,\n        };\n    }\n}\n","/**\n * @module namespaces.js\n * @description This module exports common RDF namespaces used in the rest of the package\n */\n\n\nimport { DataFactory } from 'n3';\nconst { namedNode } = DataFactory;\n\nexport function namespace(baseIRI) {\n  return new Proxy({}, {\n    get(_, prop) {\n      // Return a NamedNode for every accessed property\n      return namedNode(baseIRI + prop);\n    }\n  });\n}\n\nexport const SHACL = namespace('http://www.w3.org/ns/shacl#');\nexport const RDF = namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#');\nexport const DASH = namespace('http://datashapes.org/dash#');\nexport const RDFS = namespace('http://www.w3.org/2000/01/rdf-schema#');\nexport const XSD = namespace('http://www.w3.org/2001/XMLSchema#');","/**\n * @module utils.js\n * @description This module provides common utility functionality for the rest of the\n * package modules and classes\n */\n\n\nexport function toCURIE(IRI, prefixes, return_type) {\n    // prefixes is an object with prefix as keys and the resolved prefix IRI as the value\n    if (!IRI) {\n        return null\n    }\n    if (!prefixes) {\n        console.log(\"no prefixes passed!!\")\n    }\n    const longToShort = Object.values(prefixes).sort((a, b) => b.length - a.length);\n    for (const iri of longToShort) {\n        if (IRI.indexOf(iri) >= 0) {\n        const prefix = objectFlip(prefixes)[iri]\n        const property = IRI.substring(iri.length)\n        if (return_type == \"parts\") {\n            return {\n            \"prefix\": prefix,\n            \"property\": property,\n            }\n        } else {\n            return prefix + ':' + property\n        }\n        }\n    }\n    return IRI\n}\n\nexport function toIRI(CURIE, prefixes) {\n    // prefixes is an object with prefix as keys and the resolved prefix IRI as the value\n    if (!CURIE) {\n        return null\n    }\n    if (!prefixes) {\n        console.error(\"no prefixes passed!!\")\n        return null\n    }\n    if (CURIE.indexOf(':') < 0) {\n        // console.log(\"not a valid curie, returning\")\n        return CURIE\n    }\n    var parts = CURIE.split(':')\n    var pref = parts[0]\n    var prop = parts[1]\n    if (Object.keys(prefixes).indexOf(pref) < 0) {\n        return CURIE\n    }\n    return prefixes[pref] + prop\n  }\n\nexport function isEmptyObject(obj) {\n    for (const prop in obj) {\n      if (Object.hasOwn(obj, prop)) {\n        return false;\n      }\n    }\n    return true;\n}\n\n\nfunction objectFlip(obj) {\n    // Flip the keys and values of an object\n    return Object.keys(obj).reduce((ret, key) => {\n      ret[obj[key]] = key;\n      return ret;\n    }, {});\n}\n\n","import { readRDF } from '../modules/io'\nimport { RDF, XSD } from '../modules/namespaces';\nimport { toCURIE } from '../modules/utils';\nimport { Store, Writer, DataFactory } from 'n3';\nconst { namedNode, literal } = DataFactory;\n\n/**\n * A class wrapping an RDF dataset (quad-store) from the `rdf-ext` library.\n */\nexport class RdfDataset {\n    /**\n     * Create a wrapper object for an RDF dataset a.k.a. quad-store\n     */\n    constructor(data = {}) {\n        this.data = data;\n        this.data.prefixes = {};\n        this.data.serializedGraph = '';\n        this.data.graphLoaded = false;\n        this.data.prefixesLoaded = false;\n        this.data.graph = this.createDataset();\n        this._eventTarget = new EventTarget();\n    }\n\n    addEventListener(type, listener, options) {\n        this._eventTarget.addEventListener(type, listener, options);\n    }\n\n    removeEventListener(type, listener, options) {\n        this._eventTarget.removeEventListener(type, listener, options);\n    }\n\n    dispatchEvent(event) {\n        return this._eventTarget.dispatchEvent(event);\n    }\n\n    /**\n     * Create a quad store compliant with the [RDF/JS dataset specification](https://rdf.js.org/dataset-spec/)\n     * via the `n3` package\n     * @returns {} The RDF dataset instance.\n     */\n    createDataset() {\n        return new Store();\n    }\n    /**\n     * Loads RDF data from a given URL and processes prefixes and quads.\n     * @param {string} url - The URL of the RDF document.\n     */\n    async loadRDF(url, headers = {}) {\n        this.beforeLoadFn()\n        const result = await readRDF(url, headers)\n\n        // Bubble up error\n        if (!result.success) {\n            return result  \n        }\n\n        const quadStream = result.quadStream\n        // Load prefixes\n        quadStream.on('prefix', (prefix, ns) => {\n            this.onPrefixFn(prefix, ns)\n        }).on('data', quad => {\n            this.onDataFn(quad)\n        }).on('end', () => {\n            this.onDataEndFn()\n            this.onPrefixEndFn()\n        }).on('error', err => {\n            console.error('Error while processing quadStream:', err);\n        });\n        return result\n    }\n\n    /**\n     * Pre-load function to reset the graph loading state.\n     */\n    beforeLoadFn() {\n        this.data.graphLoaded = false\n    }\n\n    /**\n     * Process an RDF prefix.\n     * @param {string} prefix - The prefix string.\n     * @param {} ns - The namespace associated with the prefix.\n     */\n    onPrefixFn(prefix, ns) {\n        this.data.prefixes[prefix] = ns.value;\n        this.dispatchEvent(new CustomEvent('prefix', { detail: { prefix, ns } }));\n    }\n    onPrefixEndFn() {\n        this.data.prefixesLoaded = true\n        this.dispatchEvent(new CustomEvent('prefixesLoaded', { detail: this.data.prefixes }));\n    }\n\n    /**\n     * Process an RDF quad\n     * @param {} quad - The RDF quad.\n     */\n    onDataFn(quad) {\n        // The first following line, moved here from shacl-vue's graphdata composable,\n        // was an attempt to solve https://hub.datalad.org/datalink/annotate-trr379-demo/issues/32.\n        // But it was a faulty attempt, since the object was different. Still, leaving it here since\n        // deleting matches would prospectively solve the duplication of named node or literal objects\n        // this.data.graph.removeMatches(quad.subject, quad.predicate, quad.object, null)\n        this.addQuad(quad)\n        this.dispatchEvent(new CustomEvent('quad', { detail: quad }));\n    }\n    \n    onDataEndFn() {\n        this.data.graphLoaded = true\n        this.dispatchEvent(new CustomEvent('graphLoaded', { detail: this.data.graph }));\n    }\n\n    /**\n     * Add an RDF quad to the dataset\n     * @param {} quad - The RDF quad to add.\n     */\n    addQuad(quad) {\n        this.data.graph.addQuad(quad)\n    }\n\n    /**\n     * Serializes the RDF graph to Turtle format.\n     * @returns {Promise<string>} The serialized RDF graph in Turtle format.\n     */\n    async serializeGraph() {\n        // Using N3.Writer to serialize graph to Turtle\n        return new Promise((resolve, reject) => {\n            const writer = new Writer({ prefixes: this.data.prefixes });\n            writer.addQuads(this.data.graph.getQuads(null, null, null, null));\n            writer.end((error, result) => {\n                if (error) reject(error);\n                else resolve(result.trim());\n            });\n        });\n    }\n\n    /**\n     * Checks if a given RDF node represents an RDF list.\n     * @param {} node - The RDF node to check.\n     * @returns {boolean} True if the node represents an RDF list, otherwise false.\n     */\n    isRdfList(node) {\n        let hasFirst = false;\n        let hasRest = false;\n        this.data.graph.getQuads(node, null, null, null).forEach((quad) => {\n            if (quad.predicate.value === RDF.first.value) hasFirst = true;\n            if (quad.predicate.value === RDF.rest.value) hasRest = true;\n        });\n        return hasFirst && hasRest;\n    };\n    \n    /**\n     * Converts an RDF list to an array.\n     * @param {} startNode - The starting node of the RDF list.\n     * @returns {Array} The converted RDF list as an array.\n     */\n    rdfListToArray(startNode) {\n        const listItems = [];\n        let currentNode = startNode;\n        while (currentNode && currentNode.value !== RDF.nil.value) {\n            let listItem = null;\n            // Get the first element in the RDF list\n            this.data.graph.getQuads(currentNode, RDF.first, null, null).forEach(quad => {\n                if (quad.object.termType === 'BlankNode') {\n                    if (this.isRdfList(quad.object)) {\n                        listItem = this.rdfListToArray(quad.object);\n                    } else {\n                        listItem = this.resolveBlankNode(quad.object);\n                    }\n                } else if (quad.object.termType === 'Literal' || quad.object.termType === 'NamedNode') {\n                    listItem = quad.object.value;\n                }\n            });\n            if (listItem !== null) {\n                listItems.push(listItem);\n            }\n            // Move to the next item in the list (rdf:rest)\n            const restQuads = this.data.graph.getQuads(currentNode, RDF.rest, null, null);\n            currentNode = restQuads.length > 0 ? restQuads[0].object : null;\n        }\n        return listItems;\n    };\n    \n    resolveBlankNode(blankNode) {\n        let resolvedObject = {};\n        this.data.graph.getQuads(blankNode, null, null, null).forEach(({ predicate, object }) => {\n            if (object.termType === 'BlankNode') {\n                if (this.isRdfList(object)) {\n                    resolvedObject[predicate.value] = this.rdfListToArray(object);\n                } else {\n                    resolvedObject[predicate.value] = this.resolveBlankNode(object);\n                }\n            } else if (object.termType === 'Literal' || object.termType === 'NamedNode') {\n                resolvedObject[predicate.value] = object.value;\n            }\n        });\n        return resolvedObject;\n    }\n\n    getLiteralAndNamedNodes(predicate, propertyClass, prefixes) {\n        var propClassCurie = toCURIE(propertyClass, prefixes)\n        const literalQuads = this.data.graph.getQuads(null, predicate, literal(String(propClassCurie), XSD.anyURI), null)\n        const uriQuads = this.data.graph.getQuads(null, predicate, namedNode(propertyClass), null)\n        return literalQuads.concat(uriQuads)\n    }\n    \n    getSubjectTriples(someTerm) {\n        return this.data.graph.getQuads(someTerm, null, null, null);\n    }\n    \n    getObjectTriples(someTerm) {\n        return this.data.graph.getQuads(null, null, someTerm, null);\n    }\n}\n","/**\n * \n */\n\nimport { RDF } from '../modules/namespaces';\nimport { isEmptyObject, toIRI} from '../modules/utils';\nimport { DataFactory } from 'n3';\nconst { namedNode, blankNode, quad } = DataFactory;\n\nexport class FormBase {\n\n    constructor(id_iri = null, content = {}) {\n\n        this.ID_IRI = id_iri\n\t\tthis.content = content\n        this.ignoredProperties = [\n            RDF.type.value,\n        ]\n        // Example formData structure:\n        // var exFormData = {\n        //   \"https://concepts.datalad.org/s/distribution/unreleased/Person\": {          // RDF type of a subject\n        //     \"https://example.org/ns/dataset/#ahorst\": {                               // A subject: named or blank node\n        //       \"https://concepts.datalad.org/s/distribution/unreleased/email\":  []     // A predicate: named node\n        //       \"shaclvue:termType\": \"NamedNode\"                                        // the nodetype of the subject: NamedNode or BlankNode (NOT USED)\n        //     }\n        //   },\n        //   \"https://concepts.datalad.org/s/prov/unreleased/Attribution\": {             // RDF type of a subject\n        //   } \n        // }\n\t}\n\n    _checkIDiri(mthd) {\n        if (!this.ID_IRI) {\n            var msg = `Instance property 'ID_IRI' is required in order to use instance method: ${mthd}.`\n            console.error(msg)\n            throw new Error(msg)\n        }\n    }\n\n    addSubject(class_uri, subject_uri, setVal_class={}, setVal_subject={}) {\n        // add_empty_node\n        // if the RDF:type IRI does not exist in FormBase.content yet, add it\n        // if the RDF:type IRI already exists in FormBase.content:\n        // - if the subject iri does not exist, add it\n        // - if the subject iri exists do nothing\n        if (Object.keys(this.content).indexOf(class_uri) < 0) {\n            // The added value is an object; to allow adding multiple of the same node type,\n            // unique subject IRIs (from named or blank nodes) will be the unique keys of the object\n            this.content[class_uri] = setVal_class\n        }\n        if (Object.keys(this.content[class_uri]).indexOf(subject_uri) < 0) {\n            // The added value is an object with keys == predicates and values being arrays\n            // that can take multiple object values\n            this.content[class_uri][subject_uri] = setVal_subject\n        } \n    }\n\n    removeSubject(class_uri, subject_uri) {\n        // remove_current_node\n        // Error: if the RDF:type iri does not exist in the lookup object\n        if (Object.keys(this.content).indexOf(class_uri) < 0) {\n            console.error(`Trying to delete a node of a class that does not exist in form data:\\n${class_uri}`)\n        }\n        // Error: if the node iri does not exist in the lookup object\n        else if (Object.keys(this.content[class_uri]).indexOf(subject_uri) < 0) {\n            console.error(`Trying to delete a node that does not exist in form data:\\n${class_uri} - ${subject_uri}`)\n        }\n        // remove node instance at provided iri\n        // if node object is empty after instance removal, remove node key as well\n        else {\n            delete this.content[class_uri][subject_uri]\n            if ( isEmptyObject(this.content[class_uri])) { delete this.content[class_uri] }\n        }\n    }\n\n    clearSubject(class_uri, subject_uri, setVal = [null]) {\n        // clear_current_node\n        // Error: if the RDF:type iri does not exist in the lookup object\n        if (Object.keys(this.content).indexOf(class_uri) < 0) {\n            console.error(`Trying to delete a node of a class that does not exist in form data:\\n${class_uri}`)\n        }\n        // Error: if the node iri does not exist in the lookup object\n        else if (Object.keys(this.content[class_uri]).indexOf(subject_uri) < 0) {\n            console.error(`Trying to delete a node that does not exist in form data:\\n${class_uri} - ${subject_uri}`)\n        }\n        // clear node instance at provided index\n        else {\n            this._objectKeysToNull(this.content[class_uri][subject_uri], setVal)\n        }\n    }\n\n    _objectKeysToNull(obj, setVal = [null]) {\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                obj[key] = setVal;\n            }\n        }\n    }\n\n    addPredicate(class_uri, subject_uri, predicate_uri, setVal = [null]) {\n        // add_empty_triple\n        // if the class and node exist and the predicate does not exist, add it\n        // if the class and node exist and the predicate already exists, add empty value to array\n        // if the class and node do not exist, print console error because this should not be possible\n        if (Object.keys(this.content).indexOf(class_uri) >= 0 && Object.keys(this.content[class_uri]).indexOf(subject_uri) >= 0) {\n            // Current node being edited at IRI\n            if (Object.keys(this.content[class_uri][subject_uri]).indexOf(predicate_uri) < 0) {\n                this.content[class_uri][subject_uri][predicate_uri] = setVal\n            } else {\n                this.addObject(class_uri, subject_uri, predicate_uri)\n            }\n        } else {\n            console.error(`Class and/or subject IRI not in form data yet:\\n${class_uri} - ${subject_uri}\\nCannot add triple for non-existing subject.`)\n        }\n    }\n\n    addObject(class_uri, subject_uri, predicate_uri) {\n        // add_empty_triple_manual\n        this.content[class_uri][subject_uri][predicate_uri].push(null)\n    }\n\n    removeObject(class_uri, subject_uri, predicate_uri, object_idx) {\n        // remove_triple\n        if (Object.keys(this.content).indexOf(class_uri) >= 0 && Object.keys(this.content[class_uri]).indexOf(subject_uri) >= 0) {\n            // Current node being edited at index\n            if (Object.keys(this.content[class_uri][subject_uri]).indexOf(predicate_uri) < 0) {\n                console.error(`Predicate ${predicate_uri} not in specific subject instance in form data:\\n${class_uri} - ${subject_uri}\\nCannot remove non-existing triple.`)\n            } else {\n                this.content[class_uri][subject_uri][predicate_uri].splice(object_idx, 1)\n            }\n        } else {\n            console.error(`Class and/or subject IRI not in form data yet:\\n${class_uri} - ${subject_uri}\\nCannot remove triple from non-existing subject.`)\n        }\n    }\n\n    formNodeToQuads(class_uri, subject_uri, shapesDS) {\n        this._checkIDiri('formNodeToQuads')\n        // Node = subject_uri = a specific identifiable object that was edited\n        // Empty array to store quads\n        var quadArray = []\n        // Identify the record's subject (named or blank node)\n        var subject = this._getRecordSubjectTerm(subject_uri, this.content[class_uri][subject_uri])\n        // Add the triple stating the subject is of type class\n        let firstQuad = quad(subject, namedNode(RDF.type.value), namedNode(class_uri))\n        quadArray.push(firstQuad)\n        // Now we need to add all triples relating to the properties of the record.\n        for (var triple_predicate of Object.keys(this.content[class_uri][subject_uri])) {\n            // triple_predicate: all properties of an identifiable object\n            // Only process entered values, i.e. ignore property if all array elements are falsy\n            if (Array.isArray(this.content[class_uri][subject_uri][triple_predicate]) &&\n                this.content[class_uri][subject_uri][triple_predicate].every(value => !value)) {\n                continue;\n            }\n            // Don't add id_iri triple, since it would have been added already if it exists\n            if (triple_predicate == this.ID_IRI) {\n                continue;\n            }\n            // Don't add properties that should be ignored\n            if (this.ignoredProperties.indexOf(triple_predicate) >= 0) {\n                console.log(`Not saving predicate: ${triple_predicate}`)\n                continue\n            }\n            // now set the predicate as a named node\n            var predicate = namedNode(triple_predicate)\n            // In order to set the node type of the object, we first need to figure it out\n            var [nodeFunc, dt] = shapesDS.getPropertyNodeKind(class_uri, triple_predicate, this.ID_IRI)\n            // Now we can create the object nodes for each property\n            for (var val of this.content[class_uri][subject_uri][triple_predicate]) {\n                // val: all values of a given property of an identifiable object\n                // skip falsy values\n                if (!val) continue;\n                let triple_object\n                if (dt) {\n                    triple_object = nodeFunc(val, namedNode(dt))\n                } else {\n                    triple_object = nodeFunc(val)\n                }\n                // and finally we can add the quads to the store\n                let q = quad(subject, predicate, triple_object)\n                quadArray.push(q)\n            }\n        }\n        return quadArray\n        // TODO: see the following in saveNode function:\n        // If this was in editmode and the node IRI has been altered,\n        // i.e. node_iri is not the same as the new value in this.content,\n        // then we need to RE-reference existing triples in the graph that has the current node_iri as object.\n        // This is only necessary for namedNodes where the IRI changed. The process is:\n        // - only do the following if the node is a namedNode and if the IRI changed during editing\n        // - find all triples with the node IRI as object -> oldTriples\n        // - for each triple in oldTriples: create a new one with same subject and predicate\n        //   and with new IRI as object, then delete the old triple\n\n        // For now we ignore this ^^, i.e. we just add this.content to new rdf datasets\n        // and nothing more. This is to be tested to see the implications. TODO\n    }\n\n    _getRecordSubjectTerm(record_id, record) {\n        // A record is a javascript object with property IRIs as keys and arrays as values\n        // If the configured id_iri is a property of the record, this means that\n        // property's value is the triple subject, which should be a named node.\n        // If the configured id_iri is NOT a property of the record, it means\n        // the record_id itself is the triple subject, which is a blank node.\n        var subject\n        if (Object.keys(record).indexOf(this.ID_IRI) >= 0) {\n            var subject_iri = record[this.ID_IRI][0]\n            subject = namedNode(subject_iri)\n        } else {\n            subject = blankNode(record_id)\n        }\n        return subject\n    }\n\n    quadsToFormData(class_uri, subject_term, RdfDS) {\n        this._checkIDiri('quadsToFormData')\n        // Subject term should be namedNode or blankNode\n        var subject_uri = subject_term.value\n        this.addSubject(class_uri, subject_uri)\n        // Get all triples with the term as subject, and add to formData\n        // NOTE: these triples added to formData are only the ones that exist in RdfDS\n        // i.e. only the values that the subject has been annotated with. The node shape\n        // defines all properties that the node could have, of which the actual existing\n        // properties are only a subset. This means that the `add_empty_triple` call below\n        // is not populating all possible empty properties for the node, such that the form\n        // can be edited in full. At the moment, this task is left to the `add_empty_triple`\n        // call that is done in `onMounted` of the `PropertyShapeEditor` component. It is\n        // to be determined whether this is the best way forward. But it works for now.\n        // TODO ^^\n\n        // Another TODO: the ID property of the node is not necessarily existing explicitly\n        // as a triple in the graph. Refer to the `save_node` function above, where the quad\n        // with the id_iri as predicate is not added to the graph when formData is saved.\n        // For the current `quadsToFormData` function, the reverse process is important\n        // to keep in mind, i.e. because the id_iri quad does not exist in the graph,\n        // the corresponding field in formData has to be set explicitly from the subject_term,\n        // because it won't be covered in the `quadArray.forEach` loop.\n        var quadArray = RdfDS.getSubjectTriples(subject_term)\n        var IdQuadExists = false\n        quadArray.forEach((quad) => {\n            var predicate_uri = toIRI(quad.predicate.value, RdfDS.data.prefixes)\n            if (predicate_uri === this.ID_IRI) {\n                IdQuadExists = true\n            }\n            this.addPredicate(class_uri, subject_uri, predicate_uri)\n            var length = this.content[class_uri][subject_uri][predicate_uri].length\n            this.content[class_uri][subject_uri][predicate_uri][length-1] = quad.object.value\n        });\n        // Here we deal with explicitly adding the id_iri quad, if necessary\n        if (subject_term.termType === \"NamedNode\"  && !IdQuadExists) {\n            this.addPredicate(class_uri, subject_uri, this.ID_IRI)\n            var l = this.content[class_uri][subject_uri][this.ID_IRI].length\n            this.content[class_uri][subject_uri][this.ID_IRI][l-1] = subject_uri\n        }\n    }\n\n    saveNode(class_uri, node_uri, shapesDS, RdfDS, editMode, cloneFunc = structuredClone) {\n        var changeNodeIdx = false\n        var subject_iri = null\n        // Check if the node exists beforehand\n        if (this.content[class_uri]) {\n            // If we are in edit mode, the first step is to delete existing quads from graphData\n            if (editMode) {\n                var s = this._getRecordSubjectTerm(node_uri, this.content[class_uri][node_uri])\n                if (s.termType === \"NamedNode\") {\n                    RdfDS.data.graph.deleteMatches(namedNode(node_uri), null, null, null)\n                } else {\n                    RdfDS.data.graph.deleteMatches(blankNode(node_uri), null, null, null)\n                }\n            }\n\n            // Then we generate the quads\n            var quads = this.formNodeToQuads(class_uri, node_uri, shapesDS)\n            // and add them to the dataset\n            quads.forEach(quad => {\n                RdfDS.addQuad(quad)\n            });\n\n            // Some next steps depend on the type of the record's subject\n            var subject = quads[0].subject\n            if (subject.termType === \"NamedNode\") {\n                changeNodeIdx = true\n                subject_iri = subject.value\n            }\n\n            // If this was in editmode and the node IRI has been altered,\n            // i.e. node_uri is not the same as the new value in formData,\n            // then we need to RE-reference existing triples in the graph that has the current node_uri as object.\n            // This is only necessary for namedNodes where the IRI changed. The process is:\n            // - only do the following if the node is a namedNode and if the IRI changed during editing\n            // - find all triples with the node IRI as object -> oldTriples\n            // - for each triple in oldTriples: create a new one with same subject and predicate\n            //   and with new IRI as object, then delete the old triple\n            if (editMode && subject_iri !== null && subject_iri !== node_uri) {\n                var objectQuads = RdfDS.getObjectTriples(namedNode(node_uri))\n                objectQuads.forEach((quad) => {\n                    let new_quad = quad(quad.subject, quad.predicate, subject)\n                    RdfDS.data.graph.delete(quad)\n                    RdfDS.data.graph.add(new_quad)\n                });\n            }\n            // Change formdata node_uri to the actual id, if this was present:\n            if (changeNodeIdx && subject_iri !== node_uri) {\n                this.content[class_uri][subject_iri] = cloneFunc(this.content[class_uri][node_uri])\n                delete this.content[class_uri][node_uri]\n            }\n            return {\n                nodeshape_iri: class_uri,\n                node_iri: subject_iri || node_uri\n            }\n            // at the end, what to do with current data in formdata?\n            // we keep it there because this keeps track of changes during the session\n        } else {\n            console.error(`\\t- Node ${class_uri} does not exist`)\n        }\n    }\n}","/**\n * \n */\n\nimport { RdfDataset } from './RdfDataset'\nimport { SHACL, RDF } from '../modules/namespaces';\nimport { DataFactory } from 'n3';\nconst { namedNode, literal, blankNode } = DataFactory;\nimport { toIRI} from '../modules/utils';\n\nexport class ShapesDataset extends RdfDataset {\n    \n    constructor(data = {}) {\n        super(data)\n        this.data.propertyGroups = {}\n        this.data.nodeShapes = {}\n        this.data.nodeShapeNames = {}\n        this.data.nodeShapeNamesArray = []\n        this.data.nodeShapeIRIs = null\n    }\n\n    onDataFn(quad) {\n        this.addQuad(quad)\n        const subject = quad.subject.value;\n        const predicate = quad.predicate.value;\n        const object = quad.object;\n        // Isolate sh:NodeShape instances\n        if (predicate === RDF.type.value && object.value === SHACL.NodeShape.value) {\n            this.data.nodeShapes[subject] = {properties: []};\n        }\n        // Get properties of node shapes\n        if (predicate === SHACL.property.value) {\n            this.data.nodeShapes[subject].properties.push(object);\n        }\n        // Get property groups, if any\n        if (predicate === RDF.type.value && object.value === SHACL.PropertyGroup.value) {\n            this.data.propertyGroups[subject] = {};\n        }\n        this.dispatchEvent(new CustomEvent('quad', { detail: quad }));\n    }\n\n    async onDataEndFn() {\n        // Loop through all nodeshapes to restructure them\n        for (const [key, val] of Object.entries(this.data.nodeShapes)) {\n            // Get attributes (other than 'properties') of the nodeshape\n            this.data.graph.forEach(quad => {\n                if (quad.subject.value === key && quad.predicate.value != SHACL.property.value) {\n                    // Check if the object is a blank node and resolve it\n                    if (quad.object.termType === 'BlankNode') {\n                        this.data.nodeShapes[key][quad.predicate.value] = this.resolveBlankNode(quad.object);\n                    } else {\n                        this.data.nodeShapes[key][quad.predicate.value] = quad.object.value;\n                    }\n                }\n            });\n            // Loop through property elements, i.e. blank nodes, and set correct attributes\n            for (var i = 0; i < val.properties.length; i++) {\n                var node = val.properties[i];\n                if (node.termType === \"BlankNode\") {\n                    // If it's a blank node, resolve it\n                    // console.log(`Resolving blank node: ${node.value}`);\n                    val.properties[i] = this.resolveBlankNode(node);\n                } else {\n                    // Non-blank nodes are kept as they are, but eventually store only their `.value`\n                    var new_node = {};\n                    this.data.graph.forEach((quad) => {\n                        if (quad.subject.value === node.value) {\n                            new_node[quad.predicate.value] = quad.object.value; // Store only .value\n                        }\n                    });\n                    val.properties[i] = new_node;\n                }\n            }\n        }\n        for (const iri of Object.keys(this.data.nodeShapes)) { \n            var parts = iri.split('/')\n            this.data.nodeShapeNames[parts[parts.length - 1]] = iri\n        }\n        this.data.nodeShapeNamesArray = Object.keys(this.data.nodeShapeNames).sort()\n        this.data.nodeShapeIRIs = Object.keys(this.data.nodeShapes).sort()\n        // Now handle the (possibility of) property groups\n        for (const [key, value] of Object.entries(this.data.propertyGroups)) {\n            this.data.graph.forEach(quad => {\n                if (quad.subject.value === key && quad.predicate.value != RDF.type.value ) {\n                    this.data.propertyGroups[key][quad.predicate.value] = quad.object.value\n                }\n            });\n        }\n        this.data.serializedGraph = await this.serializeGraph()\n        this.data.graphLoaded = true\n        this.dispatchEvent(new CustomEvent('graphLoaded', { detail: this.data.graph }));\n    }\n\n    getPropertyNodeKind(class_uri, property_uri, id_uri) {\n        var nodeShape = this.data.nodeShapes[class_uri]\n        var propertyShapes = nodeShape.properties\n        // Find associated property shape, for information about nodekind\n        var propertyShape = propertyShapes.find((prop) => prop[SHACL.path.value] == property_uri)\n        var nodeFunc = null\n        var dt = null\n        if (propertyShape.hasOwnProperty(SHACL.nodeKind.value)) {\n            // possible options = sh:BlankNode, sh:IRI, sh:Literal, sh:BlankNodeOrIRI, sh:BlankNodeOrLiteral, sh:IRIOrLiteral\n            // if sh:nodeKind == sh:Literal\n            if (propertyShape[SHACL.nodeKind.value] == SHACL.Literal.value) {\n                // sh:nodeKind == sh:Literal\n                nodeFunc = literal\n                // sh:datatype exists\n                if (propertyShape.hasOwnProperty(SHACL.datatype.value)) {\n                    dt = propertyShape[SHACL.datatype.value]\n                }\n            } else if (propertyShape[SHACL.nodeKind.value] == SHACL.IRI.value) {\n                // sh:nodeKind == sh:IRI\n                nodeFunc = namedNode\n            } else if (propertyShape[SHACL.nodeKind.value] == SHACL.BlankNode.value) {\n                // sh:nodeKind == sh:BlankNode\n                nodeFunc = blankNode\n            } else if (propertyShape[SHACL.nodeKind.value] == SHACL.BlankNodeOrIRI.value) {\n                // sh:nodeKind == sh:BlankNodeOrIRI\n                // If the same property shape has a sh:class field, and if that class\n                // has a related property shape which has the sh:path field value as \n                // the id_uri, then it means the range of the property is a named node,\n                // otherwise it's a blank node (because the object does not have a\n                // configured identifier).\n                // If there's no class field, I am not exactly sure if it should be\n                // blank node or named node. Defaulting to named node for now.\n                if (propertyShape.hasOwnProperty(SHACL.class.value)) {\n                    var shClass = propertyShape[SHACL.class.value];\n                    // this now assumes that the class is part of the driving shacl shapes graph\n                    var associatedNodeShape = this.data.nodeShapes[toIRI(shClass, this.data.prefixes)]\n                    var hasIdField = associatedNodeShape.properties.find((prop) => prop[SHACL.path.value] == id_uri)\n                    if (hasIdField) {\n                        nodeFunc = namedNode\n                    } else {\n                        nodeFunc = blankNode\n                    }\n                } else {\n                    nodeFunc = namedNode\n                }\n             } else {\n                console.error(`\\t- NodeKind not supported: ${propertyShape[SHACL.nodeKind.value]}\\n\\t\\tAdding triple with literal object to graphData`)\n                nodeFunc = literal\n            }\n        } else if (propertyShape.hasOwnProperty(SHACL.in.value)) {\n            // This is a temporary workaround; should definitely not be permanent\n            // Assume Literal nodekind for any arrays\n            console.log(`\\t- NodeKind not found for property shape: ${property_uri}; found 'sh:in'. Setting to default literal`)\n            nodeFunc = literal\n        } else if (\n            propertyShape.hasOwnProperty(SHACL.or.value) &&\n            Array.isArray(propertyShape[SHACL.or.value]) &&\n            propertyShape[SHACL.or.value].every(obj => obj.hasOwnProperty(SHACL.class.value))\n        ) {\n            // This is a temporary solution to exactly match the property values entered using `shacl-vue`'s `ShaclORClassEditor`\n            // A future replacement should account for a generic `sh:or`\n            console.log(`\\t- NodeKind not found for property shape: ${property_uri}; found 'sh:or' with every element containing 'sh:class'. Setting to namedNode`)\n            nodeFunc = namedNode\n        }\n        else {\n            console.log(`\\t- NodeKind not found for property shape: ${property_uri}. Setting to default literal`)\n            nodeFunc = literal\n        }\n        return [nodeFunc, dt]\n    }\n\n}","import { render } from \"./ShaclComponents.vue?vue&type=template&id=2a561cde&scoped=true\"\nimport script from \"./ShaclComponents.vue?vue&type=script&lang=js\"\nexport * from \"./ShaclComponents.vue?vue&type=script&lang=js\"\n\nimport \"./ShaclComponents.vue?vue&type=style&index=0&id=2a561cde&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2a561cde\"]])\n\nexport default __exports__","<template>\n  <div class=\"protocol-matrix-container\">\n    <div class=\"screen-header\">\n      <h2 class=\"screen-title\">Schedule of Assessments</h2>\n      <button class=\"icon-btn header-info-btn\" @click=\"showInfo = true\" aria-label=\"What is Protocol Matrix?\">\n        <i :class=\"icons.info\"></i>\n      </button>\n    </div>\n\n    <!-- 1. Visit Navigator (when >3 visits) -->\n    <div v-if=\"visitList.length > 3\" class=\"visit-nav\">\n      <button @click=\"prevVisit\" :disabled=\"currentVisitIndex === 0\" class=\"nav-btn\">&lt;</button>\n\n      <div class=\"visit-nav-center\">\n        <span class=\"visit-counter\">\n          Visit {{ currentVisitIndex + 1 }} / {{ visitList.length }}\n        </span>\n        <!-- show current visit name directly below -->\n        <span class=\"visit-name\">{{ visitList[currentVisitIndex]?.name || 'Visit' }}</span>\n      </div>\n\n      <button @click=\"nextVisit\" :disabled=\"currentVisitIndex === visitList.length - 1\" class=\"nav-btn\">&gt;</button>\n    </div>\n\n    <!-- 2. Protocol Matrix -->\n    <div class=\"table-container card-surface\">\n      <table class=\"protocol-table\">\n        <!-- Full matrix if 3 visits -->\n        <thead v-if=\"visitList.length <= 3\">\n          <tr>\n            <th rowspan=\"2\">Data Models</th>\n            <th v-for=\"(visit, vIdx) in visitList\" :key=\"`vh-${vIdx}`\" :colspan=\"groupList.length\">\n              <span class=\"th-title\">Visit:</span>\n              <span class=\"th-chip\">{{ visit.name }}</span>\n            </th>\n          </tr>\n          <tr>\n            <template v-for=\"(_, vIdx) in visitList\" :key=\"`vg-${vIdx}`\">\n              <th v-for=\"(group, gIdx) in groupList\" :key=\"`vg-${vIdx}-${gIdx}`\">\n                <span class=\"group-name\">Group/Cohort: {{ group.name }}</span>\n              </th>\n            </template>\n          </tr>\n        </thead>\n\n        <!-- Single-visit view if >3 visits -->\n        <thead v-else>\n          <tr>\n            <th>Data Models</th>\n            <th v-for=\"(group, gIdx) in groupList\" :key=\"`g-${gIdx}`\">\n              <span class=\"group-name\">{{ group.name }}</span>\n            </th>\n          </tr>\n        </thead>\n\n        <tbody>\n          <tr v-for=\"(model, mIdx) in selectedModels\" :key=\"`m-${mIdx}`\">\n            <td class=\"model-cell\">\n              <span class=\"model-title\">{{ model.title }}</span>\n            </td>\n\n            <!-- Full-matrix cells -->\n            <template v-if=\"visitList.length <= 3\">\n              <template v-for=\"(_, vIdx) in visitList\" :key=\"`row-${mIdx}-v-${vIdx}`\">\n                <td v-for=\"(_, gIdx) in groupList\" :key=\"`cell-${mIdx}-${vIdx}-${gIdx}`\">\n                  <label class=\"chk-wrap\" :title=\"`Toggle ${model.title} @ ${visitList[vIdx]?.name} / ${groupList[gIdx]?.name}`\">\n                    <input\n                      type=\"checkbox\"\n                      :checked=\"assignments[mIdx][vIdx][gIdx]\"\n                      @change=\"onToggle(mIdx, vIdx, gIdx, $event.target.checked)\"\n                    />\n                    <!-- Unchecked: outline square; Checked: check-square -->\n                    <i class=\"fa-chk\" :class=\"[assignments[mIdx][vIdx][gIdx] ? 'fas fa-check-square' : 'far fa-square']\"></i>\n                  </label>\n                </td>\n              </template>\n            </template>\n\n            <!-- Single-visit cells -->\n            <template v-else>\n              <td v-for=\"(_, gIdx) in groupList\" :key=\"`celln-${mIdx}-${gIdx}`\">\n                <label class=\"chk-wrap\" :title=\"`Toggle ${model.title} @ ${visitList[currentVisitIndex]?.name} / ${groupList[gIdx]?.name}`\">\n                  <input\n                    type=\"checkbox\"\n                    :checked=\"assignments[mIdx][currentVisitIndex][gIdx]\"\n                    @change=\"onToggle(mIdx, currentVisitIndex, gIdx, $event.target.checked)\"\n                  />\n                  <i class=\"fa-chk\" :class=\"[assignments[mIdx][currentVisitIndex][gIdx] ? 'fas fa-check-square' : 'far fa-square']\"></i>\n                </label>\n              </td>\n            </template>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- 3. Preview Modal -->\n    <div v-if=\"showPreviewModal\" class=\"modal-overlay\">\n      <div class=\"modal protocol-preview-modal\">\n        <div class=\"preview-header\">\n          <!-- Visit nav -->\n          <button @click=\"prevPreviewVisit\" :disabled=\"previewVisitIndex === 0\" class=\"nav-btn\">&lt;</button>\n          <span class=\"preview-label\">\n            Visit:\n            <span class=\"th-chip\">{{ visitList[previewVisitIndex].name }}</span>\n          </span>\n          <button @click=\"nextPreviewVisit\" :disabled=\"previewVisitIndex === visitList.length - 1\" class=\"nav-btn\">&gt;</button>\n          <span class=\"spacer\"></span>\n          <!-- Group nav -->\n          <button @click=\"prevPreviewGroup\" :disabled=\"previewGroupPos === 0\" class=\"nav-btn\">&lt;</button>\n          <span class=\"preview-label\">\n            Group/Cohort:\n            <span class=\"th-chip\">{{ groupList[assignedGroups[previewGroupPos]].name }}</span>\n          </span>\n          <button\n            @click=\"nextPreviewGroup\"\n            :disabled=\"previewGroupPos === assignedGroups.length - 1\"\n            class=\"nav-btn\"\n          >&gt;</button>\n        </div>\n\n        <div class=\"preview-content\">\n          <FormPreview :form=\"previewForm\" />\n        </div>\n        <div class=\"modal-actions\">\n          <button @click=\"closePreview\" class=\"btn-option\">\n            <i :class=\"icons.times\" class=\"mr-6\"></i> Close\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 4. Custom Dialog for Notifications -->\n    <CustomDialog :message=\"dialogMessage\" :isVisible=\"showDialog\" @close=\"closeDialog\" />\n\n    <!-- 4a. Info dialog for ProtocolMatrix -->\n    <div v-if=\"showInfo\" class=\"modal-overlay\">\n      <div class=\"modal validation-modal\">\n        <h3 class=\"validation-title\">\n          <i :class=\"icons.infoCircle\" class=\"li-icon\"></i> What is this screen?\n        </h3>\n        <p class=\"validation-text\">\n          This matrix helps you decide which <strong>forms/data models</strong> are collected for each\n          study <strong>Visit</strong> and <strong>Group/Cohort</strong>. Click a checkbox to assign a form\n          to that visit and group. Use the arrows to move between visits when there are many.\n        </p>\n        <ul class=\"empty-visits-list\">\n          <li>Checked = that form will appear for participants in that group at that visit.</li>\n          <li>Use <strong>Preview</strong> to see what participants will fill out.</li>\n          <li><strong>Save</strong> stores your setup. Well warn you if a visit has nothing assigned.</li>\n        </ul>\n        <div class=\"modal-actions\">\n          <button class=\"btn-primary\" @click=\"showInfo = false\">\n            <i :class=\"icons.check\" class=\"mr-6\"></i> Got it\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 4b. Empty-visit warning modal -->\n    <div v-if=\"showEmptyVisitsModal\" class=\"modal-overlay\">\n      <div class=\"modal validation-modal\">\n        <h3 class=\"validation-title\">\n          <i :class=\"icons.infoCircle\" class=\"li-icon\"></i> Some visits have no assigned models\n        </h3>\n        <p class=\"validation-text\">\n          We found visits without any model assigned. You can go fix them, or save anyway.\n        </p>\n        <ul class=\"empty-visits-list\">\n          <li v-for=\"vIdx in emptyVisitIndices\" :key=\"`empty-v-${vIdx}`\">\n            <span class=\"visit-item-title\">Visit {{ vIdx + 1 }}  {{ visitList[vIdx]?.name || 'Visit' }}</span>\n          </li>\n        </ul>\n        <div class=\"modal-actions\">\n          <button class=\"btn-option\" @click=\"goToFirstEmptyVisit\">\n            <i :class=\"icons.exchangeAlt\" class=\"mr-6\"></i> Go to first empty visit\n          </button>\n          <button class=\"btn-primary\" :disabled=\"isSavingInProgress\" @click=\"saveAnyway\">\n            <i :class=\"icons.check\" class=\"mr-6\"></i> {{ isSavingInProgress ? 'Saving' : 'Save anyway' }}\n          </button>\n          <button class=\"btn-option\" @click=\"closeEmptyVisitsModal\">\n            <i :class=\"icons.times\" class=\"mr-6\"></i> Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 4c. Confirm Template Changes (scrollable) -->\n    <div v-if=\"showConfirmChanges\" class=\"modal-overlay\">\n      <div class=\"modal validation-modal confirm-scroll\">\n        <h3 class=\"validation-title\">\n          <i :class=\"icons.infoCircle\" class=\"li-icon\"></i> Confirm Template Changes\n        </h3>\n        <p class=\"validation-text\">\n          You made structural changes. Saving will create a <strong>new template version</strong>.\n          Existing data remains attached to its original versions and is not lost.\n        </p>\n\n        <!-- Scrolling area -->\n        <div class=\"diff-scroll\">\n          <TemplateDiffView v-if=\"snapshotFrom && snapshotTo\" :from=\"snapshotFrom\" :to=\"snapshotTo\" />\n        </div>\n\n        <div class=\"modal-actions sticky-actions\">\n          <button class=\"btn-option\" @click=\"cancelConfirm\">\n            <i :class=\"icons.times\" class=\"mr-6\"></i> Cancel\n          </button>\n          <button class=\"btn-primary\" @click=\"confirmAndSave\">\n            <i :class=\"icons.check\" class=\"mr-6\"></i> Confirm &amp; Save\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 5. Footer Actions -->\n    <div class=\"matrix-actions card-surface\">\n      <button @click=\"$emit('edit-template')\" class=\"btn-option\">Edit Template</button>\n      <button @click=\"saveStudy\" class=\"btn-primary\">Save</button>\n      <button @click=\"openPreview\" :disabled=\"!hasAssignment(currentVisitIndex)\" class=\"btn-option\">Preview</button>\n      <button @click=\"goToSaved\" class=\"btn-option\">View Saved Study</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\nimport axios from \"axios\";\nimport FormPreview from \"@/components/FormPreview.vue\";\nimport CustomDialog from \"@/components/CustomDialog.vue\";\nimport TemplateDiffView, { deepClone, computeTemplateDiff } from \"@/components/TemplateDiffView.vue\";\nimport icons from \"@/assets/styles/icons\";\n\nexport default {\n  name: \"ProtocolMatrix\",\n  components: { FormPreview, CustomDialog, TemplateDiffView },\n  props: {\n    visits:         { type: Array, required: true },\n    groups:         { type: Array, required: true },\n    selectedModels: { type: Array, required: true },\n    assignments:    { type: Array, required: true }\n  },\n  emits: [\"assignment-updated\", \"edit-template\"],\n  setup(props, { emit }) {\n    const router = useRouter();\n    const store = useStore();\n\n    const isEditing = computed(() => !!(store.state.studyDetails?.study_metadata?.id));\n\n    // Matrix indices\n    const currentVisitIndex = ref(0);\n\n    // Preview indices + modal control\n    const showPreviewModal  = ref(false);\n    const previewVisitIndex = ref(0);\n    const previewGroupIndex = ref(0);\n\n    // Dialog state\n    const showInfo = ref(false);\n    const showDialog = ref(false);\n    const dialogMessage = ref(\"\");\n\n    // Empty-visit modal state\n    const showEmptyVisitsModal = ref(false);\n    const emptyVisitIndices = ref([]);\n    const isSavingInProgress = ref(false);\n\n    // Confirm changes\n    const showConfirmChanges = ref(false);\n    const snapshotFrom = ref(null);\n    const snapshotTo   = ref(null);\n\n    // Baseline (server)\n    const baseline = ref(null);\n\n    // Has any data already been saved for this study?\n    const hasAnyData = ref(false);\n\n    // Display lists\n    const visitList = computed(() => props.visits.length ? props.visits : [{ name: \"All Visits\" }]);\n    const groupList = computed(() => props.groups.length ? props.groups : [{ name: \"All Groups\" }]);\n\n    function onToggle(mIdx, vIdx, gIdx, checked) {\n      emit(\"assignment-updated\", { mIdx, vIdx, gIdx, checked });\n    }\n\n    // Matrix nav\n    function prevVisit() { if (currentVisitIndex.value > 0) currentVisitIndex.value--; }\n    function nextVisit() { if (currentVisitIndex.value < visitList.value.length - 1) currentVisitIndex.value++; }\n\n    // Preview helpers\n    function groupsForVisit(vIdx) {\n      return groupList.value\n        .map((_, idx) => idx)\n        .filter(gIdx =>\n          props.selectedModels.some((_, mIdx) =>\n            props.assignments[mIdx][vIdx]?.[gIdx]\n          )\n        );\n    }\n    const assignedGroups = computed(() => groupsForVisit(previewVisitIndex.value));\n    const previewGroupPos = computed(() => assignedGroups.value.indexOf(previewGroupIndex.value));\n    function setFirstGroup(vIdx) {\n      const arr = groupsForVisit(vIdx);\n      previewGroupIndex.value = arr.length ? arr[0] : 0;\n    }\n\n    // Preview nav\n    function prevPreviewVisit() {\n      if (previewVisitIndex.value > 0) { previewVisitIndex.value--; setFirstGroup(previewVisitIndex.value); }\n    }\n    function nextPreviewVisit() {\n      if (previewVisitIndex.value < visitList.value.length - 1) { previewVisitIndex.value++; setFirstGroup(previewVisitIndex.value); }\n    }\n    function prevPreviewGroup() {\n      if (previewGroupPos.value > 0) { previewGroupIndex.value = assignedGroups.value[previewGroupPos.value - 1]; }\n    }\n    function nextPreviewGroup() {\n      if (previewGroupPos.value < assignedGroups.value.length - 1) { previewGroupIndex.value = assignedGroups.value[previewGroupPos.value + 1]; }\n    }\n\n    // Build preview form\n    const previewForm = computed(() => {\n      const visitName = visitList.value[previewVisitIndex.value].name;\n      const groupName = groupList.value[previewGroupIndex.value].name;\n      const sections = props.selectedModels\n        .filter((_, mIdx) => props.assignments[mIdx][previewVisitIndex.value]?.[previewGroupIndex.value])\n        .map(m => ({ title: m.title, fields: m.fields }));\n      return { formName: `Preview: ${visitName} / ${groupName}`, sections };\n    });\n\n    // At least one assignment in a visit?\n    function hasAssignment(vIdx) {\n      return groupList.value.some((_, gIdx) =>\n        props.selectedModels.some((_, mIdx) =>\n          props.assignments[mIdx]?.[vIdx]?.[gIdx] === true\n        )\n      );\n    }\n\n    // STRICT check against real visits (for Save)\n    function hasAssignmentInVisit(vIdx) {\n      return props.groups.some((_, gIdx) =>\n        props.selectedModels.some((_, mIdx) =>\n          props.assignments?.[mIdx]?.[vIdx]?.[gIdx] === true\n        )\n      );\n    }\n    function computeEmptyVisits() {\n      const empties = [];\n      const realVisitsCount = props.visits.length;\n      for (let v = 0; v < realVisitsCount; v++) if (!hasAssignmentInVisit(v)) empties.push(v);\n      return empties;\n    }\n\n    // ---------- SNAPSHOT BUILDERS ----------\n    function buildSnapshotFromBaseline(b) {\n      const base = b || {};\n      return {\n        study: base.study || {},\n        groups: base.groups || [],\n        visits: base.visits || [],\n        subjects: base.subjects || [],\n        selectedModels: base.selectedModels || [],\n        assignments: base.assignments || []\n      };\n    }\n    function buildSnapshotFromCurrent() {\n      const sd = store.state.studyDetails || {};\n      return {\n        study: sd.study || {},\n        groups: deepClone(props.groups || []),\n        visits: deepClone(props.visits || []),\n        subjects: sd.subjects || [],\n        selectedModels: deepClone(props.selectedModels || []),\n        assignments: deepClone(props.assignments || [])\n      };\n    }\n\n    // ---------- BASELINE & DATA PRESENCE ----------\n    async function loadBaselineFromServer() {\n      const studyId = store.state.studyDetails?.study_metadata?.id;\n      if (!studyId) {\n        baseline.value = buildSnapshotFromCurrent();\n        return;\n      }\n      try {\n        const resp = await axios.get(`/forms/studies/${studyId}`, { headers: { Authorization: `Bearer ${store.state.token}` } });\n        const payload = resp.data || {};\n        const metadata = payload.metadata || {};\n        const studyData = payload.content?.study_data || {};\n\n        baseline.value = {\n          study: {\n            id: metadata.id,\n            title: (studyData.study?.title ?? metadata.study_name) || \"\",\n            description: (studyData.study?.description ?? metadata.study_description) || \"\"\n          },\n          groups: studyData.groups || [],\n          visits: studyData.visits || [],\n          subjects: studyData.subjects || [],\n          selectedModels: studyData.selectedModels || [],\n          assignments: studyData.assignments || []\n        };\n      } catch (e) {\n        // fall back to current snapshot\n        baseline.value = buildSnapshotFromCurrent();\n      }\n    }\n\n    async function loadHasAnyData() {\n      const studyId = store.state.studyDetails?.study_metadata?.id;\n      if (!studyId) { hasAnyData.value = false; return; }\n      try {\n        const resp = await axios.get(\n          `/forms/studies/${studyId}/data_entries`,\n          { headers: { Authorization: `Bearer ${store.state.token}` } }\n        );\n        const list = Array.isArray(resp.data) ? resp.data : (resp.data?.entries || []);\n        hasAnyData.value = list.length > 0;\n      } catch (e) {\n        // If we cannot check, assume no data to avoid false prompts\n        hasAnyData.value = false;\n      }\n    }\n\n    onMounted(async () => {\n      await Promise.all([loadBaselineFromServer(), loadHasAnyData()]);\n    });\n\n    // ---------- SAVE ----------\n    async function saveStudy() {\n      const empties = computeEmptyVisits();\n      if (empties.length > 0) {\n        emptyVisitIndices.value = empties;\n        showEmptyVisitsModal.value = true;\n        return;\n      }\n\n      if (isEditing.value) {\n        const fromSnap = buildSnapshotFromBaseline(baseline.value);\n        const toSnap   = buildSnapshotFromCurrent();\n        const diff = computeTemplateDiff(fromSnap, toSnap);\n\n        //  Only prompt when we ALREADY have data AND the change is STRUCTURAL.\n        const shouldPrompt = hasAnyData.value && diff.anyStructural;\n        if (shouldPrompt) {\n          snapshotFrom.value = fromSnap;\n          snapshotTo.value   = toSnap;\n          showConfirmChanges.value = true;\n          return;\n        }\n      }\n      await saveStudyImpl();\n    }\n\n    function showDialogMessage(message) { dialogMessage.value = message; showDialog.value = true; }\n    function closeDialog() { showDialog.value = false; dialogMessage.value = \"\"; }\n\n    function cancelConfirm() { showConfirmChanges.value = false; }\n    async function confirmAndSave() {\n      showConfirmChanges.value = false;\n      await saveStudyImpl();\n    }\n\n    function closeEmptyVisitsModal() { showEmptyVisitsModal.value = false; }\n    function goToFirstEmptyVisit() {\n      if (emptyVisitIndices.value.length) currentVisitIndex.value = emptyVisitIndices.value[0];\n      showEmptyVisitsModal.value = false;\n    }\n    async function saveAnyway() {\n      isSavingInProgress.value = true;\n      try { await saveStudyImpl(); }\n      finally {\n        isSavingInProgress.value = false;\n        showEmptyVisitsModal.value = false;\n      }\n    }\n\n    // --- Save impl (unchanged logic aside from baseline refresh) ---\n    async function saveStudyImpl() {\n      const studyDetails = store.state.studyDetails || {};\n      const userId = store.state.user?.id;\n      const studyId = studyDetails.study_metadata?.id;\n\n      if (!userId) {\n        showDialogMessage(\"Please log in again.\");\n        return;\n      }\n\n      // Use new values first, then fall back to existing, then empty.\n      const existingMeta = studyDetails.study_metadata || {};\n      const metadata = studyId\n        ? {\n            created_by: existingMeta.created_by ?? userId,\n            study_name:\n              studyDetails.study?.title ??\n              existingMeta.study_name ??\n              existingMeta.name ??\n              \"\",\n            study_description:\n              studyDetails.study?.description ??\n              existingMeta.study_description ??\n              existingMeta.description ??\n              \"\",\n          }\n        : {\n            created_by: userId,\n            study_name: studyDetails.study?.title ?? \"\",\n            study_description: studyDetails.study?.description ?? \"\",\n          };\n\n      // Build schema explicitly  do NOT spread all of studyDetails.\n      const studyData = {\n        study: {\n          ...(studyDetails.study || {}),\n          title:\n            studyDetails.study?.title ??\n            metadata.study_name ??\n            \"\",\n          description:\n            studyDetails.study?.description ??\n            metadata.study_description ??\n            \"\",\n        },\n        groups: props.groups,\n        visits: props.visits,\n        subjects: Array.isArray(studyDetails.subjects) ? studyDetails.subjects : [],\n        selectedModels: props.selectedModels,\n        assignments: props.assignments,\n        subjectCount: studyDetails.subjectCount ?? 0,\n        assignmentMethod: studyDetails.assignmentMethod ?? \"random\",\n      };\n\n      const payload = { study_metadata: metadata, study_content: { study_data: studyData } };\n      const url = studyId ? `/forms/studies/${studyId}` : \"/forms/studies/\";\n      const method = studyId ? \"put\" : \"post\";\n\n      try {\n        const headers = { headers: { Authorization: `Bearer ${store.state.token}` } };\n        const response = await axios[method](url, payload, headers);\n\n        const updatedMetadata = response.data.study_metadata || response.data.metadata || metadata;\n        const updatedStudyData = response.data.content?.study_data || studyData;\n\n        // Store both `study_name` and `name` so old code paths keep working.\n        store.commit(\"setStudyDetails\", {\n          study_metadata: {\n            id: studyId || updatedMetadata?.id,\n            study_name: updatedMetadata.study_name,\n            name: updatedMetadata.study_name,\n            description: updatedMetadata.study_description,\n            study_description: updatedMetadata.study_description,\n            created_at: updatedMetadata.created_at,\n            updated_at: updatedMetadata.updated_at,\n            created_by: updatedMetadata.created_by,\n          },\n          study: { id: studyId || updatedMetadata?.id, ...(updatedStudyData.study || {}) },\n          groups: updatedStudyData.groups || [],\n          visits: updatedStudyData.visits || [],\n          subjectCount: updatedStudyData.subjectCount ?? 0,\n          assignmentMethod: updatedStudyData.assignmentMethod ?? \"random\",\n          subjects: updatedStudyData.subjects || [],\n          assignments: updatedStudyData.assignments || [],\n          selectedModels: updatedStudyData.selectedModels || [],\n        });\n\n        // Refresh baseline AND data presence so subsequent diffs are against latest snapshot\n        await Promise.all([loadBaselineFromServer(), loadHasAnyData()]);\n\n        showDialogMessage(studyId ? \"Study successfully updated!\" : \"Study successfully saved!\");\n      } catch (error) {\n        console.error(`Error ${studyId ? \"updating\" : \"saving\"} study:`, error);\n        showDialogMessage(`Failed to ${studyId ? \"update\" : \"save\"} study. Check console for details.`);\n      }\n    }\n\n    function openPreview() {\n      if (!hasAssignment(currentVisitIndex.value)) return;\n      previewVisitIndex.value = currentVisitIndex.value;\n      setFirstGroup(currentVisitIndex.value);\n      showPreviewModal.value = true;\n    }\n    function closePreview() { showPreviewModal.value = false; }\n\n    function goToSaved() {\n      router.push({ name: \"Dashboard\", query: { openStudies: \"true\" } });\n    }\n\n    return {\n      icons,\n\n      // state\n      visitList,\n      groupList,\n      isEditing,\n\n      // matrix nav\n      currentVisitIndex,\n      prevVisit,\n      nextVisit,\n\n      // preview\n      showPreviewModal,\n      previewVisitIndex,\n      previewGroupIndex,\n      assignedGroups,\n      previewGroupPos,\n      prevPreviewVisit,\n      nextPreviewVisit,\n      prevPreviewGroup,\n      nextPreviewGroup,\n      openPreview,\n      closePreview,\n      previewForm,\n\n      // toggles\n      onToggle,\n      hasAssignment,\n\n      // dialogs\n      showInfo,\n      showDialog,\n      dialogMessage,\n      closeDialog,\n\n      // empty-visit modal\n      showEmptyVisitsModal,\n      emptyVisitIndices,\n      isSavingInProgress,\n      closeEmptyVisitsModal,\n      goToFirstEmptyVisit,\n      saveAnyway,\n\n      // confirm changes\n      showConfirmChanges,\n      cancelConfirm,\n      confirmAndSave,\n      snapshotFrom,\n      snapshotTo,\n\n      // save + route\n      saveStudy,\n      goToSaved,\n    };\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"@/assets/styles/_base.scss\";\n\n/* Subtle app-like surface and spacing */\n.protocol-matrix-container {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: 20px;\n  background: linear-gradient(180deg, #f7f9fc 0%, #ffffff 100%);\n  border-radius: 12px;\n}\n\n/* Header */\n.screen-header { position: relative; text-align: center; padding: 4px 4px 0; }\n.screen-title { margin: 0 0 4px; font-weight: 800; font-size: 18px; color: #101828; }\n.icon-btn { background: transparent; cursor: pointer; border: none; padding: 0; }\n.header-info-btn { position: absolute; right: 6px; top: 50%; transform: translateY(-50%); font-size: 18px; color: #667085; }\n.header-info-btn:hover { color: #111827; }\n\n/* Reusable surface */\n.card-surface { border: 1px solid $border-color; border-radius: 12px; background: #fff; box-shadow: 0 10px 25px rgba(16, 24, 40, 0.06); }\n\n/* Visit Pagination */\n.visit-nav {\n  display: grid; grid-template-columns: 1fr auto 1fr;\n  position: relative; align-items: center; gap: 10px; padding: 10px 12px;\n  border-radius: 12px; background: #f5f6fa; border: 1px solid $border-color;\n}\n.visit-nav .nav-btn { justify-self: start; }\n.visit-nav .nav-btn:last-child { justify-self: end; }\n\n.visit-nav-center { display: flex; flex-direction: column; align-items: center; gap: 2px; }\n.visit-counter { font-weight: 700; letter-spacing: 0.2px; color: $text-color; }\n\n.th-chip, .visit-name {\n  display: inline-block; white-space: normal; overflow-wrap: anywhere; word-break: break-word; hyphens: auto; line-height: 1.25;\n  max-width: clamp(30ch, 36vw, 64ch); text-align: center;\n}\n\n.nav-btn {\n  background: #ffffff; padding: 8px 12px; border: 1px solid $border-color; border-radius: $button-border-radius; cursor: pointer; font-size: 16px;\n  transition: transform .05s ease, box-shadow .2s ease, background .2s ease;\n}\n.nav-btn:hover:not(:disabled) { background: #f8fafc; box-shadow: 0 4px 10px rgba(16,24,40,.08); }\n.nav-btn:disabled { opacity: 0.6; cursor: not-allowed; }\n\n/* Matrix */\n.table-container { overflow: auto; }\n.protocol-table { width: 100%; border-collapse: separate; border-spacing: 0; background: white; border-radius: 12px; overflow: hidden; }\n.protocol-table thead th { position: sticky; top: 0; z-index: 1; background: #f8fafc; border-bottom: 1px solid $border-color; white-space: normal; vertical-align: middle; }\n.protocol-table th, .protocol-table td { border-right: 1px solid $border-color; border-bottom: 1px solid $border-color; padding: 12px; text-align: center; font-size: 14px; }\n.protocol-table th:first-child, .protocol-table td:first-child { border-left: 1px solid $border-color; }\n.protocol-table tr:nth-child(even) td { background: #fbfdff; }\n.protocol-table tbody tr:hover td { background: #eef6ff; }\n.th-title { color: #667085; font-size: 12px; margin-right: 6px; }\n.group-name { font-weight: 600; color: #101828; white-space: normal; overflow-wrap: anywhere; word-break: break-word; }\n.th-chip { display: inline-block; font-size: 12px; background: #eef2ff; color: #3538cd; border: 1px solid #e0e7ff; padding: 1px 8px; border-radius: 999px; }\n.model-cell { text-align: left; background: #fff; }\n.model-title { font-weight: 600; color: #101828; }\n\n/* Checkbox using Font Awesome */\n.chk-wrap { --size: 18px; display: inline-flex; align-items: center; justify-content: center; width: var(--size); height: var(--size); position: relative; cursor: pointer; background: transparent; }\n.chk-wrap input { opacity: 0; width: var(--size); height: var(--size); position: absolute; margin: 0; }\n.fa-chk { font-size: 18px; line-height: 1; pointer-events: none; color: #98a2b3; }\n.chk-wrap input:checked + .fa-chk { color: $primary-color; }\n.chk-wrap:focus-within .fa-chk { outline: 2px solid rgba(52, 96, 255, .25); outline-offset: 2px; }\n\n/* Modals */\n.modal-overlay { position: fixed; inset: 0; background: rgba(0, 12, 34, 0.45); display: flex; justify-content: center; align-items: center; z-index: 1000; padding: 12px; }\n.protocol-preview-modal, .validation-modal { background: white; border-radius: 12px; width: 96%; max-width: 900px; padding: 20px; box-shadow: 0 20px 50px rgba(16,24,40,.18); }\n.validation-title { margin: 0 0 6px; font-size: 18px; font-weight: 800; color: #101828; display: flex; align-items: center; gap: 8px; }\n.validation-text { margin: 0 0 10px; color: #475467; }\n.modal-actions { display: flex; justify-content: flex-end; gap: 12px; margin-top: 16px; }\n\n/* Confirm changes scroll handling */\n.confirm-scroll { max-width: 1100px; }\n.diff-scroll {\n  max-height: 60vh;         /* vertical scroll */\n  overflow-y: auto;\n  overflow-x: auto;          /* horizontal scroll */\n  border: 1px solid $border-color;\n  border-radius: 10px;\n  padding: 12px;\n  background: #fff;\n}\n\n/* Sticky footer inside confirm dialog */\n.sticky-actions { position: sticky; bottom: 0; background: #fff; padding-top: 12px; margin-top: 12px; border-top: 1px solid $border-color; }\n\n/* Footer */\n.matrix-actions { position: sticky; bottom: 0; padding: 14px; display: flex; justify-content: flex-end; gap: 12px; z-index: 10; background: #fff; border: 1px solid $border-color; border-radius: 12px; }\n.btn-option, .btn-primary { padding: $button-padding; border-radius: $button-border-radius; cursor: pointer; font-size: 14px; border: 1px solid transparent; transition: transform .05s ease, box-shadow .2s ease, background .2s ease, color .2s ease, border-color .2s ease; }\n.btn-option { background: #ffffff; border: 1px solid $border-color; color: #111827; }\n.btn-option:hover { background: #f8fafc; box-shadow: 0 6px 14px rgba(16,24,40,.08); }\n.btn-primary { background: $primary-color; color: #fff; }\n.btn-primary:hover { background: darken($primary-color, 6%); box-shadow: 0 8px 18px rgba(52, 96, 255, .25); }\n\n/* Empty-visit list */\n.empty-visits-list { margin: 0 0 8px 18px; padding: 0; list-style: disc; color: #344054; max-height: 40vh; overflow-y: auto; }\n.empty-visits-list .visit-item-title { display: inline-block; white-space: normal; overflow-wrap: anywhere; word-break: break-word; line-height: 1.3; }\n\n/* Small utility */\n.li-icon { margin-right: 6px; }\n.mr-6 { margin-right: 6px; }\n</style>\n","<template>\n  <div class=\"form-preview\">\n    <h2 class=\"form-title\">{{ form.formName }}</h2>\n    <div\n      v-for=\"(section, sIndex) in form.sections\"\n      :key=\"sIndex\"\n      class=\"preview-section\"\n    >\n      <div class=\"section-header\">\n        <h3 class=\"section-title\">{{ section.title }}</h3>\n        <button class=\"toggle-section-btn\" @click=\"toggleSection(sIndex)\">\n          <i :class=\"expandedSections[sIndex] ? icons.toggleUp : icons.toggleDown\"></i>\n        </button>\n      </div>\n      <div class=\"fields-container\" v-show=\"expandedSections[sIndex]\">\n        <div v-for=\"(field, fIndex) in section.fields\" :key=\"fIndex\" class=\"preview-field\">\n          <label class=\"field-label\">{{ field.label }}</label>\n          <div class=\"field-value\">\n            <!-- Text Field -->\n            <BaseTextField\n              v-if=\"field.type === 'text'\"\n              v-model=\"field.value\"\n              :id=\"field.name\"\n              :label=\"''\"\n              :placeholder=\"field.placeholder\"\n              :required=\"false\"\n              :disabled=\"true\"\n              :error=\"''\"\n            />\n\n            <!-- Textarea Field -->\n            <BaseTextarea\n              v-else-if=\"field.type === 'textarea'\"\n              v-model=\"field.value\"\n              :id=\"field.name\"\n              :label=\"''\"\n              :placeholder=\"field.placeholder\"\n              :required=\"false\"\n              :disabled=\"true\"\n              :error=\"''\"\n            />\n\n            <!-- Number Field -->\n            <BaseNumberField\n              v-else-if=\"field.type === 'number'\"\n              v-model=\"field.value\"\n              :id=\"field.name\"\n              :label=\"''\"\n              :placeholder=\"field.placeholder\"\n              :required=\"false\"\n              :disabled=\"true\"\n              :error=\"''\"\n            />\n\n            <!-- Date Field -->\n            <BaseDateField\n              v-else-if=\"field.type === 'date'\"\n              v-model=\"field.value\"\n              :id=\"field.name\"\n              :label=\"''\"\n              :required=\"false\"\n              :disabled=\"true\"\n              :error=\"''\"\n            />\n\n            <!-- Select Field -->\n            <BaseSelectField\n              v-else-if=\"field.type === 'select'\"\n              v-model=\"field.value\"\n              :id=\"field.name\"\n              :label=\"''\"\n              :options=\"field.options\"\n              :placeholder=\"field.placeholder || '---'\"\n              :required=\"false\"\n              :disabled=\"true\"\n              :error=\"''\"\n            />\n\n            <!-- Fallback for everything else -->\n            <template v-else>\n              <!-- Checkbox -->\n              <div v-if=\"field.type === 'checkbox'\" class=\"checkbox-values\">\n                <span\n                  v-for=\"(item, i) in (Array.isArray(field.value) ? field.value : [field.value])\"\n                  :key=\"i\"\n                >{{ item || '---' }}</span>\n              </div>\n\n              <!-- Radio -->\n              <span v-else-if=\"field.type === 'radio'\">\n                {{ field.value || '---' }}\n              </span>\n\n              <!-- Button -->\n              <button v-else-if=\"field.type === 'button'\" disabled>\n                {{ field.label }}\n              </button>\n            </template>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport icons from \"@/assets/styles/icons\";\nimport BaseTextField   from \"@/components/forms/BaseTextField.vue\";\nimport BaseTextarea    from \"@/components/forms/BaseTextarea.vue\";\nimport BaseNumberField from \"@/components/forms/BaseNumberField.vue\";\nimport BaseDateField   from \"@/components/forms/BaseDateField.vue\";\nimport BaseSelectField from \"@/components/forms/BaseSelectField.vue\";\n\nexport default {\n  name: \"FormPreview\",\n  components: {\n    BaseTextField,\n    BaseTextarea,\n    BaseNumberField,\n    BaseDateField,\n    BaseSelectField\n  },\n  props: {\n    form: {\n      type: Object,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      expandedSections: [],\n    };\n  },\n  computed: {\n    icons() {\n      return icons;\n    },\n  },\n  created() {\n    this.initializeSections();\n  },\n  watch: {\n    form: {\n      handler() {\n        this.initializeSections();\n      },\n      immediate: true,\n      deep: true,\n    },\n  },\n  methods: {\n    initializeSections() {\n      this.expandedSections = this.form.sections.map(() => true);\n    },\n    toggleSection(index) {\n      this.expandedSections[index] = !this.expandedSections[index];\n    },\n  },\n};\n</script>\n<style scoped>\n.form-preview {\n  padding: 20px;\n  background: #ffffff;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n}\n.form-title {\n  text-align: center;\n  margin-bottom: 20px;\n  font-size: 24px;\n}\n.preview-section {\n  margin-bottom: 20px;\n  padding: 15px;\n  border: 1px solid #eee;\n  border-radius: 6px;\n  background: #f9f9f9;\n  transition: all 0.3s ease;\n}\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n.section-title {\n  font-size: 18px;\n  margin: 0;\n}\n.toggle-section-btn {\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  font-size: 18px;\n  color: black; /* Ensure the icon color is black */\n}\n.fields-container {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.preview-field {\n  display: flex;\n  flex-direction: column;\n}\n.field-label {\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.field-value input,\n.field-value select,\n.field-value button {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  background: #eee;\n  color: #333;\n}\n.field-value input:disabled,\n.field-value select:disabled,\n.field-value button:disabled {\n  background: #f5f5f5;\n  color: #777;\n}\n.checkbox-values {\n  display: flex;\n  gap: 5px;\n  flex-wrap: wrap;\n  font-size: 14px;\n}\n</style>\n","<template>\n  <div class=\"form-field\">\n    <label :for=\"id\" class=\"form-label\">\n      {{ label }}<span v-if=\"required\" class=\"required\">*</span>\n    </label>\n    <input\n      :id=\"id\"\n      type=\"text\"\n      :class=\"['form-input', { 'input-error': error }]\"\n      :value=\"modelValue\"\n      @input=\"$emit('update:modelValue', $event.target.value)\"\n      :placeholder=\"placeholder\"\n      :pattern=\"pattern\"\n      :maxlength=\"maxlength\"\n      :required=\"required\"\n      :disabled=\"disabled\"\n    />\n    <div v-if=\"error\" class=\"form-error\">\n      <slot name=\"error\">{{ error }}</slot>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"BaseTextField\",\n  props: {\n    modelValue: { type: String, default: \"\" },\n    id:         { type: String,   required: true },\n    label:      { type: String,   required: true },\n    placeholder:{ type: String,   default: \"\" },\n    pattern:    { type: String,   default: null },\n    maxlength:  { type: [Number,String], default: null },\n    required:   { type: Boolean,  default: false },\n    disabled:   { type: Boolean,  default: false },\n    error:      { type: [String,Boolean], default: false },\n  }\n};\n</script>\n\n<style scoped>\n.form-field {\n  margin-bottom: 1rem;\n}\n.form-label {\n  display: block;\n  margin-bottom: 0.25rem;\n}\n.form-input {\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font: inherit;\n  box-sizing: border-box;\n  transition: border-color 0.2s;\n}\n.input-error {\n  border-color: #c00 !important;\n}\n.required {\n  color: red;\n  margin-left: 0.25rem;\n}\n.form-error {\n  color: #c00;\n  font-size: 0.875rem;\n  margin-top: 0.25rem;\n}\n</style>\n","import { render } from \"./BaseTextField.vue?vue&type=template&id=68f0a365&scoped=true\"\nimport script from \"./BaseTextField.vue?vue&type=script&lang=js\"\nexport * from \"./BaseTextField.vue?vue&type=script&lang=js\"\n\nimport \"./BaseTextField.vue?vue&type=style&index=0&id=68f0a365&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-68f0a365\"]])\n\nexport default __exports__","<template>\n  <div class=\"form-field\">\n    <label :for=\"id\" class=\"form-label\">\n      {{ label }}<span v-if=\"required\" class=\"required\">*</span>\n    </label>\n    <textarea\n      :id=\"id\"\n      :class=\"['form-textarea', { 'input-error': error }]\"\n      :value=\"modelValue\"\n      @input=\"$emit('update:modelValue', $event.target.value)\"\n      :placeholder=\"placeholder\"\n      :rows=\"rows\"\n      :maxlength=\"maxlength\"\n      :required=\"required\"\n      :disabled=\"disabled\"\n    />\n    <div v-if=\"error\" class=\"form-error\">\n      <slot name=\"error\">{{ error }}</slot>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"BaseTextarea\",\n  props: {\n    modelValue: { type: String, default: \"\" },\n    id:         { type: String,   required: true },\n    label:      { type: String,   required: true },\n    placeholder:{ type: String,   default: \"\" },\n    rows:       { type: Number,   default: 4 },\n    maxlength:  { type: [Number,String], default: null },\n    required:   { type: Boolean,  default: false },\n    disabled:   { type: Boolean,  default: false },\n    error:      { type: [String,Boolean], default: false },\n  }\n};\n</script>\n\n<style scoped>\n.form-textarea {\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font: inherit;\n  box-sizing: border-box;\n  resize: vertical;\n  transition: border-color 0.2s;\n}\n.input-error {\n  border-color: #c00 !important;\n}\n</style>\n","import { render } from \"./BaseTextarea.vue?vue&type=template&id=48a91c56&scoped=true\"\nimport script from \"./BaseTextarea.vue?vue&type=script&lang=js\"\nexport * from \"./BaseTextarea.vue?vue&type=script&lang=js\"\n\nimport \"./BaseTextarea.vue?vue&type=style&index=0&id=48a91c56&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-48a91c56\"]])\n\nexport default __exports__","<template>\n  <div class=\"form-field\">\n    <label :for=\"id\" class=\"form-label\">\n      {{ label }}<span v-if=\"required\" class=\"required\">*</span>\n    </label>\n    <input\n      :id=\"id\"\n      type=\"number\"\n      :class=\"['form-input', { 'input-error': error }]\"\n      :value=\"modelValue\"\n      @input=\"onInput\"\n      :min=\"min\"\n      :max=\"max\"\n      :step=\"step\"\n      :placeholder=\"placeholder\"\n      :required=\"required\"\n      :disabled=\"disabled\"\n    />\n    <div v-if=\"error\" class=\"form-error\">\n      <slot name=\"error\">{{ error }}</slot>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"BaseNumberField\",\n  props: {\n    modelValue: { type: Number, default: null },\n    id:         { type: String, required: true },\n    label:      { type: String, required: true },\n    placeholder:{ type: String, default: \"\" },\n    min:        { type: Number, default: null },\n    max:        { type: Number, default: null },\n    step:       { type: [Number,String], default: 1 },\n    required:   { type: Boolean, default: false },\n    disabled:   { type: Boolean, default: false },\n    error:      { type: [String,Boolean], default: false },\n  },\n  methods: {\n    onInput(e) {\n      const val = e.target.valueAsNumber\n      this.$emit('update:modelValue', isNaN(val) ? null : val)\n    }\n  }\n};\n</script>\n\n<style scoped>\n.form-field { margin-bottom: 1rem; }\n.form-label {\n  display: block;\n  margin-bottom: 0.25rem;\n}\n.form-input {\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font: inherit;\n  box-sizing: border-box;\n  transition: border-color 0.2s;\n}\n.input-error {\n  border-color: #c00 !important;\n}\n.required {\n  color: red;\n  margin-left: 0.25rem;\n}\n.form-error {\n  color: #c00;\n  font-size: 0.875rem;\n  margin-top: 0.25rem;\n}\n</style>\n","import { render } from \"./BaseNumberField.vue?vue&type=template&id=bf9b0696&scoped=true\"\nimport script from \"./BaseNumberField.vue?vue&type=script&lang=js\"\nexport * from \"./BaseNumberField.vue?vue&type=script&lang=js\"\n\nimport \"./BaseNumberField.vue?vue&type=style&index=0&id=bf9b0696&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-bf9b0696\"]])\n\nexport default __exports__","<template>\n  <div class=\"form-field\">\n    <label :for=\"id\" class=\"form-label\">\n      {{ label }}<span v-if=\"required\" class=\"required\">*</span>\n    </label>\n    <input\n      :id=\"id\"\n      type=\"date\"\n      :class=\"['form-input', { 'input-error': error }]\"\n      :value=\"modelValue\"\n      @input=\"$emit('update:modelValue', $event.target.value)\"\n      :min=\"min\"\n      :max=\"max\"\n      :required=\"required\"\n      :disabled=\"disabled\"\n    />\n    <div v-if=\"error\" class=\"form-error\">\n      <slot name=\"error\">{{ error }}</slot>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"BaseDateField\",\n  props: {\n    modelValue: { type: String, default: \"\" },\n    id:         { type: String, required: true },\n    label:      { type: String, required: true },\n    min:        String,\n    max:        String,\n    required:   { type: Boolean, default: false },\n    disabled:   { type: Boolean, default: false },\n    error:      { type: [String,Boolean], default: false },\n  }\n};\n</script>\n\n<style scoped>\n.form-field { margin-bottom: 1rem; }\n.form-label {\n  display: block;\n  margin-bottom: 0.25rem;\n}\n.form-input {\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font: inherit;\n  box-sizing: border-box;\n  transition: border-color 0.2s;\n}\n.input-error {\n  border-color: #c00 !important;\n}\n.required {\n  color: red;\n  margin-left: 0.25rem;\n}\n.form-error {\n  color: #c00;\n  font-size: 0.875rem;\n  margin-top: 0.25rem;\n}\n</style>\n","import { render } from \"./BaseDateField.vue?vue&type=template&id=36e131ee&scoped=true\"\nimport script from \"./BaseDateField.vue?vue&type=script&lang=js\"\nexport * from \"./BaseDateField.vue?vue&type=script&lang=js\"\n\nimport \"./BaseDateField.vue?vue&type=style&index=0&id=36e131ee&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-36e131ee\"]])\n\nexport default __exports__","<template>\n  <div class=\"form-field\">\n    <label :for=\"id\" class=\"form-label\">\n      {{ label }}<span v-if=\"required\" class=\"required\">*</span>\n    </label>\n    <select\n      :id=\"id\"\n      :class=\"['form-input', { 'input-error': error }]\"\n      :value=\"modelValue\"\n      @change=\"$emit('update:modelValue', $event.target.value)\"\n      :required=\"required\"\n      :disabled=\"disabled\"\n    >\n      <option value=\"\" disabled>{{ placeholder || 'Select' }}</option>\n      <option\n        v-for=\"opt in options\"\n        :key=\"opt.value ?? opt\"\n        :value=\"opt.value ?? opt\"\n      >\n        {{ opt.label ?? opt }}\n      </option>\n    </select>\n    <div v-if=\"error\" class=\"form-error\">\n      <slot name=\"error\">{{ error }}</slot>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"BaseSelectField\",\n  props: {\n    modelValue: [String,Number],\n    id:         { type: String,    required: true },\n    label:      { type: String,    required: true },\n    options:    { type: Array,     default: () => [] },\n    placeholder:String,\n    required:   { type: Boolean,   default: false },\n    disabled:   { type: Boolean,   default: false },\n    error:      { type: [String,Boolean], default: false },\n  }\n};\n</script>\n\n<style scoped>\n.form-field { margin-bottom: 1rem; }\n.form-label {\n  display: block;\n  margin-bottom: 0.25rem;\n}\n.form-input {\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font: inherit;\n  box-sizing: border-box;\n  transition: border-color 0.2s;\n}\n.input-error {\n  border-color: #c00 !important;\n}\n.required {\n  color: red;\n  margin-left: 0.25rem;\n}\n.form-error {\n  color: #c00;\n  font-size: 0.875rem;\n  margin-top: 0.25rem;\n}\n</style>\n","import { render } from \"./BaseSelectField.vue?vue&type=template&id=b23f79d8&scoped=true\"\nimport script from \"./BaseSelectField.vue?vue&type=script&lang=js\"\nexport * from \"./BaseSelectField.vue?vue&type=script&lang=js\"\n\nimport \"./BaseSelectField.vue?vue&type=style&index=0&id=b23f79d8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b23f79d8\"]])\n\nexport default __exports__","import { render } from \"./FormPreview.vue?vue&type=template&id=4e1d947d&scoped=true\"\nimport script from \"./FormPreview.vue?vue&type=script&lang=js\"\nexport * from \"./FormPreview.vue?vue&type=script&lang=js\"\n\nimport \"./FormPreview.vue?vue&type=style&index=0&id=4e1d947d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4e1d947d\"]])\n\nexport default __exports__","<template>\n  <div v-if=\"isVisible\" class=\"dialog-overlay\">\n    <div class=\"dialog\">\n      <div class=\"dialog-content\">\n        <p>{{ message }}</p>\n      </div>\n      <div class=\"dialog-actions\">\n        <button @click=\"closeDialog\" class=\"btn-primary\">OK</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\n\nexport default {\n  name: \"CustomDialog\",\n  props: {\n    message: {\n      type: String,\n      required: true,\n    },\n    isVisible: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  emits: [\"close\"],\n  setup(props, { emit }) {\n    function closeDialog() {\n      emit(\"close\");\n    }\n\n    return {\n      closeDialog,\n    };\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.dialog-overlay {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 2000;\n}\n\n.dialog {\n  background: white;\n  border-radius: 8px;\n  width: 90%;\n  max-width: 400px;\n  padding: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.dialog-content {\n  margin-bottom: 20px;\n  font-size: 16px;\n  color: #333;\n  text-align: center;\n}\n\n.dialog-actions {\n  display: flex;\n  justify-content: center;\n}\n\n.btn-primary {\n  background: #007bff;\n  color: white;\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n}\n\n.btn-primary:hover {\n  background: #0056b3;\n}\n</style>\n","import { render } from \"./CustomDialog.vue?vue&type=template&id=7db24b27&scoped=true\"\nimport script from \"./CustomDialog.vue?vue&type=script&lang=js\"\nexport * from \"./CustomDialog.vue?vue&type=script&lang=js\"\n\nimport \"./CustomDialog.vue?vue&type=style&index=0&id=7db24b27&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7db24b27\"]])\n\nexport default __exports__","<template>\n  <div class=\"tdiff-root\">\n    <div v-if=\"!diff.any\" class=\"tdiff-empty\"><em>No changes detected.</em></div>\n\n    <section v-else class=\"tdiff-section\">\n      <!-- Study metadata -->\n      <div v-if=\"diff.metadata.any\" class=\"tdiff-block\">\n        <h4>Study</h4>\n        <ul class=\"tdiff-list\">\n          <li v-for=\"c in diff.metadata.changes\" :key=\"`md-${c.key}`\">\n            <em>Changed</em> <strong>{{ c.label }}</strong>:\n            <span class=\"muted\">{{ showAny(c.from) }}</span>\n            <span class=\"arr\"></span>\n            <span class=\"muted\">{{ showAny(c.to) }}</span>\n          </li>\n        </ul>\n      </div>\n\n      <!-- Groups -->\n      <div v-if=\"diff.groups.any\" class=\"tdiff-block\">\n        <h4>Groups</h4>\n        <ul class=\"tdiff-list\">\n          <li v-for=\"n in diff.groups.added\" :key=\"`ga-${n}`\"><em>Added</em> <strong>{{ n }}</strong></li>\n          <li v-for=\"n in diff.groups.removed\" :key=\"`gr-${n}`\"><em>Removed</em> <strong>{{ n }}</strong></li>\n          <li v-for=\"p in diff.groups.renamed\" :key=\"`gren-${p.from}-${p.to}`\">\n            <em>Renamed</em> <strong>{{ p.from }}</strong> <span class=\"arr\"></span> <strong>{{ p.to }}</strong>\n          </li>\n          <li v-for=\"chg in diff.groups.changed\" :key=\"`gchg-${chg.name}`\">\n            <em>Updated</em> <strong>{{ chg.name }}</strong>\n            <ul class=\"tdiff-sublist\">\n              <li v-for=\"f in chg.fields\" :key=\"`gchg-${chg.name}-${f.key}`\">\n                {{ f.label }}:\n                <span class=\"muted\">{{ showAny(f.from) }}</span>\n                <span class=\"arr\"></span>\n                <span class=\"muted\">{{ showAny(f.to) }}</span>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n\n      <!-- Visits -->\n      <div v-if=\"diff.visits.any\" class=\"tdiff-block\">\n        <h4>Visits</h4>\n        <ul class=\"tdiff-list\">\n          <li v-for=\"n in diff.visits.added\" :key=\"`va-${n}`\"><em>Added</em> <strong>{{ n }}</strong></li>\n          <li v-for=\"n in diff.visits.removed\" :key=\"`vr-${n}`\"><em>Removed</em> <strong>{{ n }}</strong></li>\n          <li v-for=\"p in diff.visits.renamed\" :key=\"`vren-${p.from}-${p.to}`\">\n            <em>Renamed</em> <strong>{{ p.from }}</strong> <span class=\"arr\"></span> <strong>{{ p.to }}</strong>\n          </li>\n          <li v-for=\"chg in diff.visits.changed\" :key=\"`vchg-${chg.name}`\">\n            <em>Updated</em> <strong>{{ chg.name }}</strong>\n            <ul class=\"tdiff-sublist\">\n              <li v-for=\"f in chg.fields\" :key=\"`vchg-${chg.name}-${f.key}`\">\n                {{ f.label }}:\n                <span class=\"muted\">{{ showAny(f.from) }}</span>\n                <span class=\"arr\"></span>\n                <span class=\"muted\">{{ showAny(f.to) }}</span>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n\n      <!-- Models -->\n      <div v-if=\"diff.models.meta.any\" class=\"tdiff-block\">\n        <h4>Data Models</h4>\n        <ul class=\"tdiff-list\">\n          <li v-for=\"n in diff.models.meta.added\" :key=\"`ma-${n}`\"><em>Added</em> <strong>{{ n }}</strong></li>\n          <li v-for=\"n in diff.models.meta.removed\" :key=\"`mr-${n}`\"><em>Removed</em> <strong>{{ n }}</strong></li>\n          <li v-for=\"p in diff.models.meta.renamed\" :key=\"`mren-${p.from}-${p.to}`\">\n            <em>Renamed</em> <strong>{{ p.from }}</strong> <span class=\"arr\"></span> <strong>{{ p.to }}</strong>\n          </li>\n        </ul>\n      </div>\n\n      <!-- Model assignments -->\n      <div v-if=\"diff.models.assign.any\" class=\"tdiff-block\">\n        <h4>Model Assignments</h4>\n        <p class=\"muted\">\n          Turned ON: <strong>{{ diff.models.assign.turnedOn }}</strong>,\n          Turned OFF: <strong>{{ diff.models.assign.turnedOff }}</strong>\n        </p>\n        <details>\n          <summary>Details</summary>\n          <ul class=\"tdiff-list\">\n            <li v-for=\"t in diff.models.assign.toggles\" :key=\"t.key\">\n              <strong>{{ t.section }}</strong> @ {{ t.visit }} / {{ t.group }}  <em>{{ t.to ? 'Enabled' : 'Disabled' }}</em>\n            </li>\n          </ul>\n        </details>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\n/* ------------------ shared utils ------------------ */\nfunction deepClone(o) { return JSON.parse(JSON.stringify(o ?? null)); }\nfunction asName(obj) {\n  if (!obj) return \"\";\n  if (typeof obj === \"string\") return obj.trim();\n  if (typeof obj === \"object\") return String(obj.name || obj.title || \"\").trim();\n  return String(obj).trim();\n}\nfunction normalizeNameList(arr) {\n  const list = Array.isArray(arr) ? arr : [];\n  return list.map(it => (typeof it === \"string\" ? { name: it } : it));\n}\n\n/* Treat undefined/null/empty/whitespace as the same empty */\nfunction canon(v) {\n  if (v == null) return \"\";\n  if (typeof v === \"string\") return v.trim();\n  return v;\n}\nfunction eq(a, b) {\n  const ca = canon(a), cb = canon(b);\n  return ca === cb;\n}\n\n/* Subjects can be \"ID\", [\"ID\",\"GROUP\"], or { id, group } */\nfunction normalizeSubjects(list) {\n  const arr = Array.isArray(list) ? list : [];\n  return arr\n    .map(s => {\n      if (typeof s === \"string\") {\n        return { id: s.trim(), group: \"\" };\n      } else if (Array.isArray(s)) {\n        const id = (s[0] ?? \"\").toString().trim();\n        const group = (s[1] ?? \"\").toString().trim();\n        return { id, group };\n      } else if (typeof s === \"object\" && s) {\n        const id = (s.id ?? s[0] ?? \"\").toString().trim();\n        const group = (s.group ?? s[1] ?? s.assignment ?? \"\").toString().trim();\n        return { id, group };\n      }\n      return { id: \"\", group: \"\" };\n    })\n    .filter(s => s.id);\n}\n\nfunction normalizeModels(list) {\n  const arr = Array.isArray(list) ? list : [];\n  return arr.map(m => (typeof m === \"string\" ? { title: m } : m));\n}\n\nfunction normalizeSnapshot(snap) {\n  const s = deepClone(snap || {});\n  const st = (s.study && typeof s.study === \"object\") ? s.study : {};\n  s.study = {\n    ...st,\n    title: canon(st.title ?? s.title),\n    description: canon(st.description ?? s.description),\n  };\n\n  s.groups = normalizeNameList(s.groups);\n  s.visits = normalizeNameList(s.visits);\n\n  s.selectedModels = normalizeModels(s.selectedModels ?? s.models ?? []);\n  s.assignments = Array.isArray(s.assignments) ? s.assignments : [];\n\n  s.subjects = normalizeSubjects(s.subjects);\n\n  return s;\n}\n\n/* ------------------ diff helpers ------------------ */\nfunction levenshtein(a, b) {\n  a = a || \"\"; b = b || \"\";\n  const m = a.length, n = b.length;\n  const dp = Array.from({ length: m + 1 }, () => Array(n + 1).fill(0));\n  for (let i = 0; i <= m; i++) dp[i][0] = i;\n  for (let j = 0; j <= n; j++) dp[0][j] = j;\n  for (let i = 1; i <= m; i++) {\n    for (let j = 1; j <= n; j++) {\n      const cost = a[i-1] === b[j-1] ? 0 : 1;\n      dp[i][j] = Math.min(dp[i-1][j] + 1, dp[i][j-1] + 1, dp[i-1][j-1] + cost);\n    }\n  }\n  return dp[m][n];\n}\nfunction similarity(a, b) {\n  const L = Math.max((a || \"\").length, (b || \"\").length) || 1;\n  return 1 - (levenshtein((a||\"\").toLowerCase(), (b||\"\").toLowerCase()) / L);\n}\nfunction mapBy(arr, keyFn) {\n  const m = new Map();\n  (arr || []).forEach((x, i) => m.set(keyFn(x, i), { item: x, idx: i }));\n  return m;\n}\n\nfunction diffListByName(oldList, newList, getName) {\n  const oldNames = (oldList || []).map(getName);\n  const newNames = (newList || []).map(getName);\n\n  const oldSet = new Set(oldNames);\n  const newSet = new Set(newNames);\n\n  const added = newNames.filter(n => !oldSet.has(n));\n  const removed = oldNames.filter(n => !newSet.has(n));\n\n  const renamed = [];\n  const stillAdded = [];\n  const stillRemoved = [];\n\n  const usedAdded = new Set();\n  removed.forEach(r => {\n    let best = { name: null, score: 0, j: -1 };\n    added.forEach((a, j) => {\n      if (usedAdded.has(j)) return;\n      const sc = similarity(r, a);\n      if (sc > best.score) best = { name: a, score: sc, j };\n    });\n    if (best.score >= 0.6 && best.j >= 0) {\n      usedAdded.add(best.j);\n      renamed.push({ from: r, to: best.name, score: Number(best.score.toFixed(2)) });\n    } else {\n      stillRemoved.push(r);\n    }\n  });\n  added.forEach((a, j) => { if (!usedAdded.has(j)) stillAdded.push(a); });\n\n  const changed = [];\n  const oldByName = mapBy(oldList || [], x => getName(x));\n  const newByName = mapBy(newList || [], x => getName(x));\n  newSet.forEach(nm => {\n    if (oldSet.has(nm)) {\n      const o = oldByName.get(nm)?.item || {};\n      const n = newByName.get(nm)?.item || {};\n      const local = [];\n      const keys = new Set([...Object.keys(o || {}), ...Object.keys(n || {})]);\n      keys.forEach(k => {\n        if (k === \"name\" || k === \"title\") return;\n        const ov = o?.[k], nv = n?.[k];\n        const primO = (ov == null || typeof ov !== \"object\");\n        const primN = (nv == null || typeof nv !== \"object\");\n        if (primO && primN && !eq(ov, nv)) {\n          const label = k.replace(/[_-]+/g, \" \").replace(/\\b\\w/g, c => c.toUpperCase());\n          local.push({ key: k, label, from: ov ?? \"\", to: nv ?? \"\" });\n        }\n      });\n      if (local.length) changed.push({ name: nm, fields: local });\n    }\n  });\n\n  return {\n    any: !!(stillAdded.length || stillRemoved.length || renamed.length || changed.length),\n    added: stillAdded,\n    removed: stillRemoved,\n    renamed,\n    changed\n  };\n}\n\nfunction diffMetadata(oldSnap, newSnap) {\n  const o = oldSnap.study || {};\n  const n = newSnap.study || {};\n  const pairs = [];\n  const add = (key, label, from, to) => { if (!eq(from, to)) pairs.push({ key, label, from: from ?? \"\", to: to ?? \"\" }); };\n\n  add(\"title\", \"Title\", o.title, n.title);\n  add(\"description\", \"Description\", o.description, n.description);\n\n  const keys = new Set([...Object.keys(o || {}), ...Object.keys(n || {})]);\n  keys.forEach(k => {\n    if (k === \"title\" || k === \"description\" || k === \"id\") return;\n    const ov = o?.[k], nv = n?.[k];\n    const primO = (ov == null || typeof ov !== \"object\");\n    const primN = (nv == null || typeof nv !== \"object\");\n    if (primO && primN && !eq(ov, nv)) {\n      const label = k.replace(/[_-]+/g, \" \").replace(/\\b\\w/g, c => c.toUpperCase());\n      pairs.push({ key: k, label, from: ov ?? \"\", to: nv ?? \"\" });\n    }\n  });\n\n  return { any: pairs.length > 0, changes: pairs };\n}\n\nfunction diffSubjects(oldSubs, newSubs) {\n  const oldNorm = normalizeSubjects(oldSubs);\n  const newNorm = normalizeSubjects(newSubs);\n\n  const oldIds = new Set(oldNorm.map(s => s.id));\n  const newIds = new Set(newNorm.map(s => s.id));\n\n  const added = [...newIds].filter(id => !oldIds.has(id));\n  const removed = [...oldIds].filter(id => !newIds.has(id));\n\n  const oldById = new Map(oldNorm.map(s => [s.id, s]));\n  const newById = new Map(newNorm.map(s => [s.id, s]));\n  const reassigned = [];\n  [...newIds].forEach(id => {\n    if (oldIds.has(id)) {\n      const og = oldById.get(id)?.group ?? \"\";\n      const ng = newById.get(id)?.group ?? \"\";\n      if (!eq(og, ng)) reassigned.push({ id, from: og, to: ng });\n    }\n  });\n\n  return { any: !!(added.length || removed.length || reassigned.length), added, removed, reassigned };\n}\n\nfunction diffModelsMeta(oldModels, newModels) {\n  return diffListByName(oldModels || [], newModels || [], m => asName(m));\n}\n\nfunction diffModelAssignments(oldModels, newModels, oldAssign, newAssign, visitsOld, visitsNew, groupsOld, groupsNew) {\n  const oldIdx = mapBy(oldModels || [], m => asName(m));\n  const newIdx = mapBy(newModels || [], m => asName(m));\n  const vOld = (visitsOld || []).map(v => asName(v));\n  const vNew = (visitsNew || []).map(v => asName(v));\n  const gOld = (groupsOld || []).map(g => asName(g));\n  const gNew = (groupsNew || []).map(g => asName(g));\n\n  const toggles = [];\n  let on = 0, off = 0;\n\n  newIdx.forEach((val, title) => {\n    if (!oldIdx.has(title)) return;\n    const mNew = val.idx;\n    const mOld = oldIdx.get(title).idx;\n\n    const vMax = Math.min((oldAssign?.[mOld] || []).length, (newAssign?.[mNew] || []).length);\n    const gMaxOld = Math.max(0, ...(oldAssign?.[mOld] || []).map(r => (r || []).length), 0);\n    const gMaxNew = Math.max(0, ...(newAssign?.[mNew] || []).map(r => (r || []).length), 0);\n    const gMax = Math.min(gMaxOld, gMaxNew);\n\n    for (let v = 0; v < vMax; v++) {\n      for (let g = 0; g < gMax; g++) {\n        const before = !!(oldAssign?.[mOld]?.[v]?.[g]);\n        const after  = !!(newAssign?.[mNew]?.[v]?.[g]);\n        if (before !== after) {\n          if (after) on++; else off++;\n          toggles.push({\n            key: `${title}|v${v}|g${g}`,\n            section: title,\n            visit: vNew[v] ?? vOld[v] ?? `Visit ${v+1}`,\n            group: gNew[g] ?? gOld[g] ?? `Group ${g+1}`,\n            from: before, to: after\n          });\n        }\n      }\n    }\n  });\n\n  return { any: toggles.length > 0, toggles, turnedOn: on, turnedOff: off };\n}\n\nfunction computeTemplateDiff(fromRaw, toRaw) {\n  const from = normalizeSnapshot(fromRaw);\n  const to   = normalizeSnapshot(toRaw);\n\n  const metadata = diffMetadata(from, to);\n  const groups   = diffListByName(from.groups, to.groups, g => asName(g));\n  const visits   = diffListByName(from.visits, to.visits, v => asName(v));\n  const subjects = diffSubjects(from.subjects, to.subjects);\n  const modelsMeta = diffModelsMeta(from.selectedModels, to.selectedModels);\n  const modelsAssign = diffModelAssignments(\n    from.selectedModels, to.selectedModels,\n    from.assignments, to.assignments,\n    from.visits, to.visits, from.groups, to.groups\n  );\n\n  //  Structural = add/remove/rename of groups/visits/models or any assignment toggle.\n  //    Non-structural = metadata changes (incl. study) + groups/visits \"changed\" fields (e.g., descriptions) + subjects.\n  const groupsStructural =\n    (groups.added?.length || 0) > 0 ||\n    (groups.removed?.length || 0) > 0 ||\n    (groups.renamed?.length || 0) > 0;\n\n  const visitsStructural =\n    (visits.added?.length || 0) > 0 ||\n    (visits.removed?.length || 0) > 0 ||\n    (visits.renamed?.length || 0) > 0;\n\n  const modelsMetaStructural =\n    (modelsMeta.added?.length || 0) > 0 ||\n    (modelsMeta.removed?.length || 0) > 0 ||\n    (modelsMeta.renamed?.length || 0) > 0;\n\n  const assignmentsStructural = !!modelsAssign.any;\n\n  const anyStructural = groupsStructural || visitsStructural || modelsMetaStructural || assignmentsStructural;\n\n  return {\n    any: metadata.any || groups.any || visits.any || subjects.any || modelsMeta.any || modelsAssign.any,\n    anyStructural,\n    metadata, groups, visits, subjects,\n    models: { meta: modelsMeta, assign: modelsAssign }\n  };\n}\n\n/* ------------------ summary for StudyView cards ------------------ */\nfunction buildVersionSummary(diff) {\n  if (!diff || !diff.any) return \"No changes.\";\n\n  const parts = [];\n  const plural = (n, w) => `${n} ${w}${n === 1 ? \"\" : \"s\"}`;\n\n  const addCounts = (label, d) => {\n    if (!d) return;\n    const segs = [];\n    if (Array.isArray(d.added)   && d.added.length)   segs.push(`Added ${d.added.length}`);\n    if (Array.isArray(d.removed) && d.removed.length) segs.push(`Removed ${d.removed.length}`);\n    if (Array.isArray(d.renamed) && d.renamed.length) segs.push(`Renamed ${d.renamed.length}`);\n    if (Array.isArray(d.changed) && d.changed.length) segs.push(`Updated ${d.changed.length}`);\n    if (segs.length) parts.push(`${label}: ${segs.join(\", \")}`);\n  };\n\n  if (diff.metadata?.any) {\n    const n = diff.metadata.changes?.length || 0;\n    parts.push(`Study: Updated ${plural(n, \"field\")}`);\n  }\n  addCounts(\"Groups\", diff.groups);\n  addCounts(\"Visits\", diff.visits);\n\n  const subs = diff.subjects || {};\n  const subsSeg = [];\n  if (Array.isArray(subs.added)      && subs.added.length)      subsSeg.push(`Added ${subs.added.length}`);\n  if (Array.isArray(subs.removed)    && subs.removed.length)    subsSeg.push(`Removed ${subs.removed.length}`);\n  if (Array.isArray(subs.reassigned) && subs.reassigned.length) subsSeg.push(`Moved ${subs.reassigned.length}`);\n  if (subsSeg.length) parts.push(`Subjects: ${subsSeg.join(\", \")}`);\n\n  addCounts(\"Data Models\", diff.models?.meta);\n\n  if (diff.models?.assign?.any) {\n    parts.push(`Assignments: Turned ON ${diff.models.assign.turnedOn}, Turned OFF ${diff.models.assign.turnedOff}`);\n  }\n\n  return parts.join(\" | \");\n}\n\nexport default {\n  name: \"TemplateDiffView\",\n  props: {\n    from: { type: Object, required: true },\n    to:   { type: Object, required: true },\n    compact: { type: Boolean, default: false }\n  },\n  computed: {\n    diff() { return computeTemplateDiff(this.from, this.to); }\n  },\n  methods: {\n    showAny(v) {\n      const c = canon(v);\n      if (c === \"\") return \"\";\n      if (typeof c === \"boolean\") return c ? \"Yes\" : \"No\";\n      if (Array.isArray(c)) return c.length ? JSON.stringify(c) : \"\";\n      if (typeof c === \"object\") return Object.keys(c).length ? JSON.stringify(c) : \"\";\n      return String(c);\n    }\n  }\n};\n\nexport {\n  deepClone,\n  computeTemplateDiff,\n  normalizeSnapshot,\n  buildVersionSummary\n};\n</script>\n\n<style scoped>\n.tdiff-root { min-width: 680px; }\n.tdiff-empty { color: #6b7280; }\n.tdiff-section { display: grid; gap: 12px; }\n.tdiff-block { border-top: 1px dashed #e5e7eb; padding-top: 10px; }\n.tdiff-block h4 { margin: 0 0 6px; font-weight: 700; color: #0f172a; }\n.tdiff-list, .tdiff-sublist { list-style: none; padding-left: 0; margin: 0; }\n.tdiff-list li { margin: 6px 0; }\n.tdiff-sublist { margin-top: 6px; padding-left: 16px; }\n.muted { color: #6b7280; }\n.arr { margin: 0 6px; }\n</style>\n","import { render } from \"./TemplateDiffView.vue?vue&type=template&id=e60d7480&scoped=true\"\nimport script from \"./TemplateDiffView.vue?vue&type=script&lang=js\"\nexport * from \"./TemplateDiffView.vue?vue&type=script&lang=js\"\n\nimport \"./TemplateDiffView.vue?vue&type=style&index=0&id=e60d7480&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e60d7480\"]])\n\nexport default __exports__","import { render } from \"./ProtocolMatrix.vue?vue&type=template&id=5c0b0e0b&scoped=true\"\nimport script from \"./ProtocolMatrix.vue?vue&type=script&lang=js\"\nexport * from \"./ProtocolMatrix.vue?vue&type=script&lang=js\"\n\nimport \"./ProtocolMatrix.vue?vue&type=style&index=0&id=5c0b0e0b&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5c0b0e0b\"]])\n\nexport default __exports__","<template>\n  <div class=\"constraints-edit-modal\">\n    <div class=\"head\">\n      <h3>Field Settings & Constraints</h3>\n      <span class=\"type-chip\">{{ currentTypeLabel }}</span>\n    </div>\n\n    <!-- COMMON -->\n    <section class=\"group\">\n      <div class=\"row\" v-if=\"isSlider\">\n        <label>Control type</label>\n        <div class=\"choice-row\">\n          <label class=\"chk\">\n            <input type=\"radio\" value=\"slider\" v-model=\"local.mode\" />\n            Slider\n          </label>\n          <label class=\"chk\">\n            <input type=\"radio\" value=\"linear\" v-model=\"local.mode\" />\n            Likert scale\n          </label>\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <label class=\"chk\">\n          <input type=\"checkbox\" v-model=\"local.required\" />\n          Required\n        </label>\n        <label class=\"chk\">\n          <input type=\"checkbox\" v-model=\"local.readonly\" />\n          Readonly\n        </label>\n      </div>\n\n      <div class=\"row\" v-if=\"!isCheckbox && !(isSlider && local.mode==='slider') && !isFile\">\n        <label>Placeholder</label>\n        <input type=\"text\" v-model=\"local.placeholder\" placeholder=\"Shown when empty\" />\n      </div>\n\n      <div class=\"row\">\n        <label>Help text</label>\n        <input type=\"text\" v-model=\"local.helpText\" placeholder=\"Shown below the control\" />\n      </div>\n\n      <div class=\"row\" v-if=\"isTime\">\n        <label>Hour format</label>\n        <select v-model=\"local.hourCycle\">\n          <option value=\"24\">24-hour</option>\n          <option value=\"12\">12-hour (AM/PM)</option>\n        </select>\n      </div>\n\n      <div class=\"row\" v-if=\"!isDate && !(isSlider && local.mode==='slider') && !isFile\">\n        <label>Default value</label>\n\n        <select v-if=\"isChoice && !local.allowMultiple\" v-model=\"local.defaultValue\">\n          <option value=\"\">(none)</option>\n          <option v-for=\"(opt, i) in localOptions\" :key=\"i\" :value=\"opt\">{{ opt }}</option>\n        </select>\n\n        <div v-else-if=\"isRadio && local.allowMultiple\" class=\"chips\">\n          <div class=\"chip-input-row\">\n            <input\n              type=\"text\"\n              v-model=\"chipInput\"\n              placeholder=\"Type option and press Enter\"\n              @keydown.enter.prevent=\"addChip\"\n              list=\"radio-options\"\n            />\n            <datalist id=\"radio-options\">\n              <option v-for=\"(opt, i) in localOptions\" :key=\"i\" :value=\"opt\" />\n            </datalist>\n          </div>\n          <div class=\"chip-group\">\n            <span\n              v-for=\"(val, i) in (Array.isArray(local.defaultValue) ? local.defaultValue : [])\"\n              :key=\"i\"\n              class=\"chip\"\n            >\n              {{ val }}\n              <button class=\"chip-x\" @click.prevent=\"removeChip(i)\"></button>\n            </span>\n          </div>\n          <small class=\"note\">Press Enter to add; duplicates are ignored.</small>\n        </div>\n\n        <input\n          v-else-if=\"isTextLike\"\n          type=\"text\"\n          v-model=\"local.defaultValue\"\n          placeholder=\"Default value\"\n        />\n\n        <input\n          v-else-if=\"isNumber\"\n          type=\"number\"\n          v-model.number=\"local.defaultValue\"\n          placeholder=\"Default number\"\n        />\n\n        <FieldTime\n          v-else-if=\"isTime\"\n          v-model=\"local.defaultValue\"\n          :hourCycle=\"local.hourCycle || '24'\"\n          :readonly=\"false\"\n          :disabled=\"false\"\n        />\n\n        <label class=\"chk\" v-else-if=\"isCheckbox\">\n          <input type=\"checkbox\" v-model=\"local.defaultValue\" />\n          Checked by default\n        </label>\n\n        <input\n          v-else\n          type=\"text\"\n          v-model=\"local.defaultValue\"\n          placeholder=\"Default value\"\n        />\n\n        <small v-if=\"defaultError && !isDate\" class=\"err\">{{ defaultError }}</small>\n      </div>\n    </section>\n\n    <!-- TEXT / TEXTAREA -->\n    <section class=\"group\" v-if=\"isTextLike\">\n      <div class=\"row two\">\n        <div>\n          <label>Min length</label>\n          <input type=\"number\" v-model.number=\"local.minLength\" min=\"0\" />\n        </div>\n        <div>\n          <label>Max length</label>\n          <input type=\"number\" v-model.number=\"local.maxLength\" min=\"0\" />\n        </div>\n      </div>\n      <div class=\"row\">\n        <label>Regex pattern</label>\n        <input type=\"text\" v-model=\"local.pattern\" placeholder=\"e.g. ^[A-Za-z]+$\" />\n      </div>\n      <div class=\"row\">\n        <label>Transform</label>\n        <select v-model=\"local.transform\">\n          <option value=\"none\">None</option>\n          <option value=\"uppercase\">Uppercase</option>\n          <option value=\"lowercase\">Lowercase</option>\n          <option value=\"capitalize\">Capitalize</option>\n        </select>\n      </div>\n    </section>\n\n    <!-- NUMBER -->\n    <section class=\"group\" v-if=\"isNumber\">\n      <div class=\"row two\">\n        <div>\n          <label>Min value</label>\n          <input type=\"number\" v-model.number=\"local.min\" />\n        </div>\n        <div>\n          <label>Max value</label>\n          <input type=\"number\" v-model.number=\"local.max\" />\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <label>Step</label>\n        <input type=\"number\" v-model.number=\"local.step\" placeholder=\"Leave empty if not applicable\" />\n      </div>\n\n      <div class=\"row\">\n        <label class=\"chk\">\n          <input type=\"checkbox\" v-model=\"local.integerOnly\" />\n          Integer only\n        </label>\n      </div>\n\n      <div class=\"row two\">\n        <div>\n          <label>Min digits (integer part)</label>\n          <input type=\"number\" v-model.number=\"local.minDigits\" min=\"0\" />\n        </div>\n        <div>\n          <label>Max digits (integer part)</label>\n          <input type=\"number\" v-model.number=\"local.maxDigits\" min=\"0\" />\n        </div>\n      </div>\n      <div class=\"row note\">\n        <span>\n          Digit limits apply to the integer part. In preview we enforce these when <b>Integer only</b> is checked.\n          For values that need leading zeros, consider a <b>Text</b> field with a pattern.\n        </span>\n      </div>\n    </section>\n\n    <!-- TIME -->\n    <section class=\"group\" v-if=\"isTime\">\n      <div class=\"row two\">\n        <div>\n          <label>Min time</label>\n          <FieldTime\n            v-model=\"local.minTime\"\n            :hourCycle=\"local.hourCycle || '24'\"\n            :readonly=\"false\"\n            :disabled=\"false\"\n            :placeholder=\"(local.hourCycle==='12' ? 'hh:mm AM/PM' : 'HH:mm')\"\n          />\n        </div>\n        <div>\n          <label>Max time</label>\n          <FieldTime\n            v-model=\"local.maxTime\"\n            :hourCycle=\"local.hourCycle || '24'\"\n            :readonly=\"false\"\n            :disabled=\"false\"\n            :placeholder=\"(local.hourCycle==='12' ? 'hh:mm AM/PM' : 'HH:mm')\"\n          />\n        </div>\n      </div>\n    </section>\n\n    <!-- DATE -->\n    <section class=\"group\" v-if=\"isDate\">\n      <div class=\"row\">\n        <label>Date format</label>\n        <select v-model=\"local.dateFormat\">\n          <option v-for=\"fmt in DATE_FORMATS\" :key=\"fmt\" :value=\"fmt\">{{ fmt }}</option>\n        </select>\n      </div>\n\n      <div class=\"row two\">\n        <div>\n          <label>Min date</label>\n          <DateFormatPicker\n            v-model=\"local.minDate\"\n            :format=\"local.dateFormat\"\n            :placeholder=\"local.dateFormat\"\n          />\n        </div>\n        <div>\n          <label>Max date</label>\n          <DateFormatPicker\n            v-model=\"local.maxDate\"\n            :format=\"local.dateFormat\"\n            :placeholder=\"local.dateFormat\"\n          />\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <label>Default date</label>\n        <DateFormatPicker\n          v-model=\"local.defaultValue\"\n          :format=\"local.dateFormat\"\n          :placeholder=\"local.dateFormat\"\n          :min-date=\"local.minDate || null\"\n          :max-date=\"local.maxDate || null\"\n        />\n        <small v-if=\"defaultError && isDate\" class=\"err\">{{ defaultError }}</small>\n      </div>\n    </section>\n\n    <!-- FILE -->\n    <section class=\"group\" v-if=\"isFile\">\n      <div class=\"row\">\n        <label>Allowed formats</label>\n        <input\n          type=\"text\"\n          v-model=\"allowedFormatsText\"\n          placeholder=\"Examples: .pdf, .csv, .tsv, image/*, application/zip\"\n        />\n        <small class=\"note\">\n          Comma-separated list. Client validates on upload; re-validate server-side if needed.\n        </small>\n      </div>\n\n      <div class=\"row two\">\n        <div>\n          <label>Max size (MB)</label>\n          <input type=\"number\" min=\"1\" step=\"1\" v-model.number=\"local.maxSizeMB\" />\n        </div>\n        <div>\n          <label>Storage behavior</label>\n          <select v-model=\"local.storagePreference\">\n            <option value=\"local\">Local storage (upload)</option>\n            <option value=\"url\">Link via URL</option>\n          </select>\n          <small class=\"note\">This decides which input appears in the form.</small>\n        </div>\n      </div>\n      <div class=\"row\">\n        <label class=\"chk\">\n          <input type=\"checkbox\" v-model=\"local.allowMultipleFiles\" />\n          Allow multiple files\n        </label>\n      </div>\n\n      <div class=\"row\">\n        <label>Modalities (BIDS)</label>\n        <div class=\"chips\">\n          <div class=\"chip-group\">\n            <label\n              v-for=\"mod in allModalities\"\n              :key=\"mod\"\n              class=\"chip selectable\"\n            >\n              <input type=\"checkbox\" :value=\"mod\" v-model=\"local.modalities\" />\n              {{ mod }}\n              <button\n                v-if=\"!builtInSet.has(mod)\"\n                class=\"chip-x\"\n                @click.prevent=\"removeCustomModByName(mod)\"\n                title=\"Remove custom modality\"\n              ></button>\n            </label>\n          </div>\n\n          <div class=\"chip-input-row add-mod-row\">\n            <input\n              type=\"text\"\n              v-model=\"customMod\"\n              placeholder=\"Custom modality (Enter or +)\"\n              @keydown.enter.prevent=\"addCustomMod\"\n            />\n            <button type=\"button\" class=\"btn-option add-mod-btn\" @click=\"addCustomMod\">+</button>\n          </div>\n\n          <small class=\"note\">Used to help organize and name files in BIDS folders.</small>\n        </div>\n      </div>\n    </section>\n\n    <!-- SLIDER mode -->\n    <section class=\"group\" v-if=\"isSlider && local.mode==='slider'\">\n      <div class=\"row two\">\n        <div>\n          <label>Min</label>\n          <input type=\"number\" v-model.number=\"local.min\" :disabled=\"local.percent\" />\n        </div>\n        <div>\n          <label>Max</label>\n          <input type=\"number\" v-model.number=\"local.max\" :disabled=\"local.percent\" />\n        </div>\n      </div>\n\n      <div class=\"row two\">\n        <div>\n          <label>Step</label>\n          <input type=\"number\" min=\"0.000001\" step=\"0.000001\" v-model.number=\"local.step\" />\n        </div>\n        <div>\n          <label class=\"chk\">\n            <input type=\"checkbox\" v-model=\"local.percent\" />\n            Show as percentage (1100)\n          </label>\n        </div>\n      </div>\n\n      <div class=\"row note\">\n        <span>No default selection for sliders. Clicking the track jumps to the nearest step.</span>\n      </div>\n\n      <div class=\"row\">\n        <label>Step labels</label>\n        <div class=\"options-scroll\">\n          <div class=\"opt-row\">\n            <span class=\"opt-index\">#</span>\n            <input\n              type=\"number\"\n              v-model.number=\"markEditValue\"\n              :min=\"useMin\"\n              :max=\"useMax\"\n              :step=\"useStep\"\n              placeholder=\"Step value\"\n            />\n          </div>\n          <div class=\"opt-row\">\n            <span class=\"opt-index\"></span>\n            <input\n              type=\"text\"\n              v-model=\"markEditLabel\"\n              placeholder=\"Label\"\n              @keydown.enter.prevent=\"addOrUpdateMark('slider')\"\n            />\n            <button class=\"icon-btn\" title=\"Add/Update\" @click.prevent=\"addOrUpdateMark('slider')\"></button>\n          </div>\n\n          <div class=\"opt-row\" v-for=\"(m, i) in marksSorted\" :key=\"'s'+i\">\n            <span class=\"opt-index\">{{ m.value }}</span>\n            <input type=\"text\" :value=\"m.label\" disabled />\n            <button class=\"icon-btn\" title=\"Delete\" @click.prevent=\"removeMark(m.value)\"></button>\n          </div>\n        </div>\n        <small class=\"note\">We only store labels you add; no snap behavior.</small>\n      </div>\n    </section>\n\n    <!-- LINEAR mode -->\n    <section class=\"group\" v-if=\"isSlider && local.mode==='linear'\">\n      <div class=\"row two\">\n        <div>\n          <label>Min</label>\n          <input type=\"number\" v-model.number=\"local.min\" />\n        </div>\n        <div>\n          <label>Max</label>\n          <input type=\"number\" v-model.number=\"local.max\" />\n        </div>\n      </div>\n      <div class=\"row two\">\n        <div>\n          <label>Left label</label>\n          <input type=\"text\" v-model=\"local.leftLabel\" placeholder=\"e.g., Not happy\" />\n        </div>\n        <div>\n          <label>Right label</label>\n          <input type=\"text\" v-model=\"local.rightLabel\" placeholder=\"e.g., Very happy\" />\n        </div>\n      </div>\n      <div class=\"row note\" v-if=\"linearCount > LINEAR_MAX\">\n        <span class=\"err\">Too many points ({{ linearCount }}). Limit is {{ LINEAR_MAX }} to avoid clutter.</span>\n      </div>\n      <div class=\"row note\">\n        <span>Likert scale shows only endpoints (left/right). No step labels.</span>\n      </div>\n    </section>\n\n    <!-- RADIO / SELECT -->\n    <section class=\"group\" v-if=\"isChoice\">\n      <div class=\"row\">\n        <label class=\"chk\" v-if=\"isRadio\">\n          <input type=\"checkbox\" v-model=\"local.allowMultiple\" />\n          Allow multiple selections\n        </label>\n      </div>\n\n      <div class=\"row two\">\n        <div>\n          <label>Number of options</label>\n          <input type=\"number\" min=\"1\" v-model.number=\"optionsCount\" @input=\"syncOptionsCount\" />\n        </div>\n        <div>\n          <label>Quick add</label>\n          <div class=\"quick\">\n            <button type=\"button\" class=\"btn-option\" @click=\"addOption()\">+ Add</button>\n            <button type=\"button\" class=\"btn-option\" @click=\"removeLastOption()\" :disabled=\"localOptions.length<=1\"> Remove</button>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"options-scroll\">\n        <div class=\"opt-row\" v-for=\"(opt, idx) in localOptions\" :key=\"idx\">\n          <span class=\"opt-index\">{{ idx + 1 }}.</span>\n          <input type=\"text\" v-model=\"localOptions[idx]\" placeholder=\"Option label\" />\n          <button class=\"icon-btn\" title=\"Delete\" @click.prevent=\"deleteOption(idx)\" :disabled=\"localOptions.length<=1\"></button>\n        </div>\n      </div>\n      <div class=\"row note\" v-if=\"isSelect\">\n        <span>Dropdowns are single-select in this builder.</span>\n      </div>\n    </section>\n\n    <section class=\"group\" v-if=\"isCheckbox\">\n      <div class=\"row note\">\n        <span>Checkbox has no placeholder. Use help text for guidance.</span>\n      </div>\n    </section>\n\n    <div class=\"modal-actions\">\n      <button class=\"btn-primary\" @click=\"save\" :disabled=\"isSaveDisabled\">Save</button>\n      <button class=\"btn-option\" @click=\"clearToInitial\">Clear</button>\n      <button class=\"btn-option\" @click=\"$emit('closeConstraintsDialog')\">Cancel</button>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport { normalizeConstraints, coerceDefaultForType } from \"@/utils/constraints\";\nimport DateFormatPicker from \"@/components/DateFormatPicker.vue\";\nimport FieldTime from \"@/components/fields/FieldTime.vue\";\n\nconst DATE_FORMATS = [\n  \"dd.MM.yyyy\",\"MM-dd-yyyy\",\"dd-MM-yyyy\",\"yyyy-MM-dd\",\n  \"MM/yyyy\",\"MM-yyyy\",\"yyyy/MM\",\"yyyy-MM\",\"yyyy\"\n];\n\n// MRI included\nconst BIDS_MODALITIES = Object.freeze([\n  \"MRI\",\"T1w\",\"T2w\",\"bold\",\"dwi\",\"FLAIR\",\"PD\",\"inplaneT2\",\n  \"fmap\",\"fieldmap\",\"epi\",\"phasediff\",\"magnitude\",\n  \"MEG\",\"EEG\",\"iEEG\",\"NIRS\",\"PET\",\"ASL\",\n  \"beh\",\"events\",\"physio\",\"scans\",\n  \"func\",\"anat\",\"fmap\",\"swi\"\n]);\n\nexport default {\n  name: \"FieldConstraintsDialog\",\n  components: { DateFormatPicker, FieldTime },\n  props: {\n    currentFieldType: { type: String, default: \"text\" },\n    constraintsForm:  { type: Object, default: () => ({}) }\n  },\n  created() {\n    // snapshot the state as it was when the dialog opened\n    this._initialSnapshot = {\n      local: JSON.parse(JSON.stringify(this.local)),\n      localOptions: JSON.parse(JSON.stringify(this.localOptions)),\n      optionsCount: this.optionsCount,\n      allowedFormatsText: this.allowedFormatsText\n    };\n    },\n  data() {\n    const base = this.constraintsForm || {};\n    const type = (this.currentFieldType || \"text\").toLowerCase();\n    const initialOptions =\n      (Array.isArray(base.options) ? base.options : []).filter(Boolean).map(String);\n\n    const defaultValue =\n      base.defaultValue !== undefined\n        ? base.defaultValue\n        : (type === \"checkbox\" ? false : type === \"radio\" && base.allowMultiple ? [] : \"\");\n\n    const allowedFormats = Array.isArray(base.allowedFormats)\n      ? base.allowedFormats.map(String).map(s => s.trim()).filter(Boolean)\n      : [];\n    const allowedFormatsText = allowedFormats.join(\", \");\n\n    return {\n      DATE_FORMATS,\n      LINEAR_MAX: 10,\n      BIDS_MODALITIES,\n      customMod: \"\",\n      allowedFormatsText,\n      local: {\n        // shared\n        required: !!base.required,\n        readonly: !!base.readonly,\n        helpText: base.helpText || \"\",\n        placeholder: base.placeholder || \"\",\n        defaultValue,\n\n        // text-like\n        minLength: isFinite(base.minLength) ? Number(base.minLength) : undefined,\n        maxLength: isFinite(base.maxLength) ? Number(base.maxLength) : undefined,\n        pattern: base.pattern || \"\",\n        transform: base.transform || \"none\",\n\n        // numeric\n        min: isFinite(base.min) ? Number(base.min) : (type === \"slider\" ? 1 : undefined),\n        max: isFinite(base.max) ? Number(base.max) : (type === \"slider\" ? 5 : undefined),\n        step: isFinite(base.step) ? Number(base.step) : (type === \"slider\" ? 1 : undefined),\n        integerOnly: !!base.integerOnly,\n        minDigits: isFinite(base.minDigits) ? Number(base.minDigits) : undefined,\n        maxDigits: isFinite(base.maxDigits) ? Number(base.maxDigits) : undefined,\n\n        // time/date\n        minTime: base.minTime || \"\",\n        maxTime: base.maxTime || \"\",\n        hourCycle: base.hourCycle || \"24\",\n        minDate: base.minDate || \"\",\n        maxDate: base.maxDate || \"\",\n        dateFormat: base.dateFormat || \"dd.MM.yyyy\",\n\n        // choice\n        allowMultiple: !!base.allowMultiple,\n\n        // slider\n        mode: base.mode === \"linear\" ? \"linear\" : \"slider\",\n        percent: !!base.percent,\n\n        // linear labels\n        leftLabel: base.leftLabel || \"\",\n        rightLabel: base.rightLabel || \"\",\n\n        // marks\n        marks: Array.isArray(base.marks)\n          ? base.marks\n              .map(m => ({ value: Number(m?.value), label: String(m?.label ?? \"\") }))\n              .filter(m => Number.isFinite(m.value) && m.label)\n          : (base.marks && typeof base.marks === \"object\")\n            ? Object.keys(base.marks)\n                .map(k => ({ value: Number(k), label: String(base.marks[k]) }))\n                .filter(m => Number.isFinite(m.value) && m.label)\n            : [],\n\n        // file\n        allowedFormats,\n        maxSizeMB: (isFinite(base.maxSizeMB) && Number(base.maxSizeMB) > 0)\n          ? Number(base.maxSizeMB)\n          : undefined,                         // undefined => no size limit\n        storagePreference: (base.storagePreference === \"url\") ? \"url\" : \"local\",\n        allowMultipleFiles: base.allowMultipleFiles === undefined ? true : !!base.allowMultipleFiles,\n        modalities: Array.isArray(base.modalities)\n          ? base.modalities.filter(Boolean).map(String)\n          : []\n      },\n\n      localOptions: initialOptions.length ? initialOptions : [\"Option 1\"],\n      optionsCount: Math.max(1, initialOptions.length || 1),\n\n      chipInput: \"\",\n      markEditValue: null,\n      markEditLabel: \"\"\n    };\n  },\n  computed: {\n    type() { return (this.currentFieldType || \"text\").toLowerCase(); },\n    isTextLike() { return this.type === \"text\" || this.type === \"textarea\"; },\n    isNumber()   { return this.type === \"number\"; },\n    isTime()     { return this.type === \"time\"; },\n    isDate()     { return this.type === \"date\"; },\n    isCheckbox() { return this.type === \"checkbox\"; },\n    isRadio()    { return this.type === \"radio\"; },\n    isSelect()   { return this.type === \"select\"; },\n    isChoice()   { return this.isRadio || this.isSelect; },\n    isSlider()   { return this.type === \"slider\"; },\n    isFile()     { return this.type === \"file\"; },\n    currentTypeLabel() {\n      return this.type.charAt(0).toUpperCase() + this.type.slice(1);\n    },\n\n    useMin(){ return Number.isFinite(this.local.min) ? this.local.min : 1; },\n    useMax(){ return Number.isFinite(this.local.max) ? this.local.max : 5; },\n    useStep(){ return (Number.isFinite(this.local.step) && this.local.step>0) ? this.local.step : 1; },\n\n    linearCount() {\n      const min = Number.isFinite(+this.local.min) ? +this.local.min : 1;\n      const max = Number.isFinite(+this.local.max) ? +this.local.max : 5;\n      return Math.max(0, max - min + 1);\n    },\n\n    marksSorted() {\n      return [...(this.local.marks || [])]\n        .sort((a, b) => a.value - b.value)\n        .filter((m, idx, arr) => idx === 0 || m.value !== arr[idx-1].value);\n    },\n\n    defaultError() {\n      if (!(this.local.required && this.local.readonly)) return \"\";\n      const t = this.type;\n      const dv = this.local.defaultValue;\n      if (t === \"radio\") {\n        const ok = this.local.allowMultiple\n          ? Array.isArray(dv) && dv.length > 0\n          : (typeof dv === \"string\" && dv !== \"\");\n        return ok ? \"\" : \"Default value is required when the field is both Required and Readonly.\";\n      }\n      if (t === \"select\") {\n        const ok = (typeof dv === \"string\" && dv !== \"\");\n        return ok ? \"\" : \"Default value is required when the field is both Required and Readonly.\";\n      }\n      if (t === \"checkbox\") {\n        const ok = !!dv;\n        return ok ? \"\" : \"Default value (Checked) is required when the field is both Required and Readonly.\";\n      }\n      if (t === \"number\") {\n        const ok = dv !== \"\" && dv !== null && dv !== undefined && !Number.isNaN(Number(dv));\n        return ok ? \"\" : \"Default value is required when the field is both Required and Readonly.\";\n      }\n      return (dv !== \"\" && dv !== null && dv !== undefined) ? \"\" :\n        \"Default value is required when the field is both Required and Readonly.\";\n    },\n\n    isSaveDisabled() {\n      if (this.isSlider && this.local.mode === \"linear\") {\n        return this.linearCount < 2 || this.linearCount > this.LINEAR_MAX;\n      }\n      if (!this.isDate && !(this.isSlider && this.local.mode==='slider') && (this.local.required && this.local.readonly)) {\n        return !!this.defaultError;\n      }\n      return false;\n    },\n\n    builtInSet() {\n      return new Set(BIDS_MODALITIES);\n    },\n    allModalities() {\n      const extras = (this.local.modalities || []).filter(m => !!m && !this.builtInSet.has(m));\n      return [...BIDS_MODALITIES, ...Array.from(new Set(extras))];\n    }\n  },\n  watch: {\n    constraintsForm: {\n      deep: true,\n      handler(nv) {\n        const base = nv || {};\n        const allowedFormats = Array.isArray(base.allowedFormats)\n          ? base.allowedFormats.map(String).map(s => s.trim()).filter(Boolean)\n          : [];\n        this.allowedFormatsText = allowedFormats.join(\", \");\n        this.local = {\n          ...this.local,\n          required: !!base.required,\n          readonly: !!base.readonly,\n          helpText: base.helpText || \"\",\n          placeholder: base.placeholder || \"\",\n          defaultValue: base.defaultValue !== undefined\n            ? base.defaultValue\n            : this.local.defaultValue,\n\n          minLength: isFinite(base.minLength) ? Number(base.minLength) : undefined,\n          maxLength: isFinite(base.maxLength) ? Number(base.maxLength) : undefined,\n          pattern: base.pattern || \"\",\n          transform: base.transform || \"none\",\n\n          min: isFinite(base.min) ? Number(base.min) : this.local.min ?? (this.isSlider ? 1 : undefined),\n          max: isFinite(base.max) ? Number(base.max) : this.local.max ?? (this.isSlider ? 5 : undefined),\n          step: isFinite(base.step) ? Number(base.step) : this.local.step ?? (this.isSlider ? 1 : undefined),\n          integerOnly: !!base.integerOnly,\n          minDigits: isFinite(base.minDigits) ? Number(base.minDigits) : this.local.minDigits,\n          maxDigits: isFinite(base.maxDigits) ? Number(base.maxDigits) : this.local.maxDigits,\n\n          minTime: base.minTime || \"\",\n          maxTime: base.maxTime || \"\",\n          hourCycle: base.hourCycle || this.local.hourCycle,\n\n          minDate: base.minDate || \"\",\n          maxDate: base.maxDate || \"\",\n          dateFormat: base.dateFormat || this.local.dateFormat,\n\n          allowMultiple: !!base.allowMultiple,\n\n          mode: base.mode === \"linear\" ? \"linear\" : \"slider\",\n          percent: !!base.percent,\n\n          leftLabel: base.leftLabel || \"\",\n          rightLabel: base.rightLabel || \"\",\n\n          marks: Array.isArray(base.marks)\n            ? base.marks\n                .map(m => ({ value: Number(m?.value), label: String(m?.label ?? \"\") }))\n                .filter(m => Number.isFinite(m.value) && m.label)\n            : [],\n\n          // file\n          allowedFormats,\n          maxSizeMB: (isFinite(base.maxSizeMB) && Number(base.maxSizeMB) > 0) ? Number(base.maxSizeMB) : undefined,\n          storagePreference: (base.storagePreference === \"url\") ? \"url\" : \"local\",\n          allowMultipleFiles: base.allowMultipleFiles === undefined ? true : !!base.allowMultipleFiles,\n          modalities: Array.isArray(base.modalities)\n            ? base.modalities.filter(Boolean).map(String)\n            : []\n        };\n\n        if (Array.isArray(base.options)) {\n          const cleaned = base.options.filter(Boolean).map(String);\n          this.localOptions = cleaned.length ? cleaned : [\"Option 1\"];\n          this.optionsCount = this.localOptions.length;\n        }\n      }\n    },\n    \"local.percent\"(on) {\n      if (this.isSlider && this.local.mode === \"slider\" && on) {\n        this.local.min = 1;\n        this.local.max = 100;\n        if (!Number.isFinite(this.local.step) || this.local.step <= 0) this.local.step = 1;\n        this.local.marks = (this.local.marks || []).filter(m => m.value >= 1 && m.value <= 100);\n      }\n    },\n    currentFieldType(val) {\n      const t = (val || \"\").toLowerCase();\n      if (t === \"checkbox\") {\n        this.local.defaultValue = !!this.local.defaultValue;\n        this.local.placeholder = \"\";\n      }\n    },\n    \"local.allowMultiple\"(nv) {\n      if (!this.isRadio) return;\n      if (nv) {\n        this.local.defaultValue = Array.isArray(this.local.defaultValue)\n          ? this.local.defaultValue.filter((v) => this.localOptions.includes(v))\n          : (this.local.defaultValue && this.localOptions.includes(this.local.defaultValue)\n              ? [this.local.defaultValue]\n              : []);\n      } else {\n        if (Array.isArray(this.local.defaultValue)) {\n          this.local.defaultValue = this.local.defaultValue[0] || \"\";\n        }\n      }\n    },\n    localOptions: {\n      deep: true,\n      handler() {\n        if (!this.isChoice) return;\n        if (this.isRadio && this.local.allowMultiple) {\n          if (Array.isArray(this.local.defaultValue)) {\n            this.local.defaultValue = this.local.defaultValue.filter((v) =>\n              this.localOptions.includes(v)\n            );\n          }\n        } else {\n          if (!this.localOptions.includes(this.local.defaultValue)) {\n            this.local.defaultValue = \"\";\n          }\n        }\n        this.optionsCount = this.localOptions.length;\n      }\n    }\n  },\n  methods: {\n    // Slider marks\n    addOrUpdateMark(kind) {\n      if (kind !== 'slider') return;\n      let v = Number(this.markEditValue);\n      const lbl = String(this.markEditLabel || \"\").trim();\n      if (!Number.isFinite(v) || !lbl) return;\n\n      const min = this.useMin;\n      const max = this.useMax;\n      const step = this.useStep;\n\n      v = Math.max(min, Math.min(max, v));\n      v = Math.round((v - min) / step) * step + min;\n      v = Math.max(min, Math.min(max, v));\n\n      const i = (this.local.marks || []).findIndex(m => m.value === v);\n      if (i >= 0) this.local.marks.splice(i, 1, { value: v, label: lbl });\n      else (this.local.marks || (this.local.marks = [])).push({ value: v, label: lbl });\n\n      this.markEditLabel = \"\";\n      this.markEditValue = null;\n    },\n    removeMark(v) {\n      const i = (this.local.marks || []).findIndex(m => m.value === v);\n      if (i >= 0) this.local.marks.splice(i, 1);\n    },\n\n    // Radio multi default chips\n    addChip() {\n      const v = (this.chipInput || \"\").trim();\n      if (!v) return;\n      if (!this.localOptions.includes(v)) return;\n      if (!Array.isArray(this.local.defaultValue)) this.local.defaultValue = [];\n      if (!this.local.defaultValue.includes(v)) this.local.defaultValue.push(v);\n      this.chipInput = \"\";\n    },\n    removeChip(i) {\n      if (!Array.isArray(this.local.defaultValue)) return;\n      this.local.defaultValue.splice(i, 1);\n    },\n\n    // Choice options\n    syncOptionsCount() {\n      const count = Math.max(1, Number(this.optionsCount || 1));\n      if (count > this.localOptions.length) {\n        const add = count - this.localOptions.length;\n        for (let i = 0; i < add; i++) {\n          this.localOptions.push(`Option ${this.localOptions.length + 1}`);\n        }\n      } else if (count < this.localOptions.length) {\n        this.localOptions.splice(count);\n      }\n      this.optionsCount = this.localOptions.length;\n    },\n    addOption() {\n      this.localOptions.push(`Option ${this.localOptions.length + 1}`);\n      this.optionsCount = this.localOptions.length;\n    },\n    removeLastOption() {\n      if (this.localOptions.length > 1) {\n        const removed = this.localOptions.pop();\n        if (Array.isArray(this.local.defaultValue)) {\n          this.local.defaultValue = this.local.defaultValue.filter((v) => v !== removed);\n        } else if (this.local.defaultValue === removed) {\n          this.local.defaultValue = \"\";\n        }\n        this.optionsCount = this.localOptions.length;\n      }\n    },\n    deleteOption(idx) {\n      if (this.localOptions.length <= 1) return;\n      const removed = this.localOptions.splice(idx, 1)[0];\n      if (Array.isArray(this.local.defaultValue)) {\n        this.local.defaultValue = this.local.defaultValue.filter((v) => v !== removed);\n      } else if (this.local.defaultValue === removed) {\n        this.local.defaultValue = \"\";\n      }\n      this.optionsCount = this.localOptions.length;\n    },\n\n    // Custom modalities\n    addCustomMod() {\n      const v = (this.customMod || \"\").trim();\n      if (!v) return;\n      const exists = (this.local.modalities || []).some(m => (m || \"\").toLowerCase() === v.toLowerCase());\n      if (!exists) {\n        if (!Array.isArray(this.local.modalities)) this.local.modalities = [];\n        this.local.modalities.push(v); // add as CHECKED\n      }\n      this.customMod = \"\";\n    },\n    removeCustomModByName(name) {\n      this.local.modalities = (this.local.modalities || []).filter(m => m !== name);\n    },\n\n    // File formats\n    parseAllowedFormats(text) {\n      return String(text || \"\")\n        .split(\",\")\n        .map(s => s.trim())\n        .filter(Boolean);\n    },\n\n    // Save\n    save() {\n      if (this.isSaveDisabled) return;\n\n      // FILE: emit cleaned constraints with allowMultipleFiles defaulting to true and no implied limits\n      if (this.isFile) {\n        const parsedFormats = String(this.allowedFormatsText || \"\")\n          .split(\",\")\n          .map(s => s.trim())\n          .filter(Boolean);\n\n        const cleaned = {\n          required: !!this.local.required,\n          readonly: !!this.local.readonly,\n          helpText: this.local.helpText || \"\",\n          allowedFormats: parsedFormats,                     // [] => any type\n          maxSizeMB: (Number.isFinite(this.local.maxSizeMB) && this.local.maxSizeMB > 0)\n            ? Number(this.local.maxSizeMB)\n            : undefined,                                     // undefined => no size limit\n          storagePreference: (this.local.storagePreference === \"url\") ? \"url\" : \"local\",\n          allowMultipleFiles: this.local.allowMultipleFiles !== false,  // default true\n          modalities: Array.isArray(this.local.modalities)\n            ? Array.from(new Set(this.local.modalities.filter(Boolean).map(String)))\n            : []\n        };\n        this.$emit(\"updateConstraints\", cleaned);\n        return;\n      }\n\n\n      if (!this.isSlider) {\n        const cleaned = normalizeConstraints(this.type, { ...this.local });\n        if (this.isChoice) {\n          const opts = this.localOptions.map(o => String(o || \"\").trim()).filter(Boolean);\n          const finalOpts = opts.length ? Array.from(new Set(opts)) : [\"Option 1\"];\n\n          if (this.isRadio && this.local.allowMultiple) {\n            const arr = Array.isArray(cleaned.defaultValue) ? cleaned.defaultValue : [];\n            cleaned.defaultValue = arr.filter(v => finalOpts.includes(v));\n          } else {\n            if (!finalOpts.includes(cleaned.defaultValue)) cleaned.defaultValue = \"\";\n          }\n          cleaned.options = finalOpts;\n          if (this.isSelect) delete cleaned.allowMultiple;\n        }\n        cleaned.defaultValue = coerceDefaultForType(\n          this.isRadio && this.local.allowMultiple ? \"radio\" : this.type,\n          cleaned.defaultValue\n        );\n        cleaned.hourCycle = this.local.hourCycle || \"24\";\n\n        this.$emit(\"updateConstraints\", cleaned);\n        return;\n      }\n\n      if (this.local.mode === \"slider\") {\n        const min = this.local.percent ? 1 : this.useMin;\n        const max = this.local.percent ? 100 : this.useMax;\n        const step = this.local.percent ? 1 : this.useStep;\n\n        const marks = (this.local.marks || [])\n          .map(m => {\n            let v = Number(m.value);\n            if (!Number.isFinite(v)) return null;\n            v = Math.round((v - min) / step) * step + min;\n            v = Math.max(min, Math.min(max, v));\n            return { value: v, label: String(m.label || \"\") };\n          })\n          .filter(m => m && m.label)\n          .filter((m, idx, arr) => arr.findIndex(x => x.value === m.value) === idx)\n          .sort((a, b) => a.value - b.value);\n\n        const cleaned = {\n          mode: \"slider\",\n          required: !!this.local.required,\n          readonly: !!this.local.readonly,\n          helpText: this.local.helpText || \"\",\n          percent: !!this.local.percent,\n          min, max, step,\n          marks\n        };\n        this.$emit(\"updateConstraints\", cleaned);\n        return;\n      }\n\n      const LIM = this.LINEAR_MAX;\n      let linMin = this.useMin;\n      let linMax = this.useMax;\n      if (linMax - linMin + 1 > LIM) {\n        linMax = linMin + (LIM - 1);\n      }\n      if (linMax < linMin) linMax = linMin + 1;\n\n      const cleaned = {\n        mode: \"linear\",\n        required: !!this.local.required,\n        readonly: !!this.local.readonly,\n        helpText: this.local.helpText || \"\",\n        min: linMin,\n        max: linMax,\n        leftLabel: this.local.leftLabel || \"\",\n        rightLabel: this.local.rightLabel || \"\"\n      };\n      this.$emit(\"updateConstraints\", cleaned);\n    },\n    clearToInitial() {\n      const s = this._initialSnapshot;\n      if (!s) return;\n      // restore the original values from when dialog was opened\n      this.local = JSON.parse(JSON.stringify(s.local));\n      this.localOptions = JSON.parse(JSON.stringify(s.localOptions));\n      this.optionsCount = s.optionsCount;\n      this.allowedFormatsText = s.allowedFormatsText;\n\n      // clear transient editor inputs\n      this.chipInput = \"\";\n      this.markEditValue = null;\n      this.markEditLabel = \"\";\n      this.customMod = \"\";\n    }\n  }\n};\n</script>\n\n\n\n<style scoped>\n.constraints-edit-modal{width:480px;background:#fff;padding:16px 16px 12px;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,0.18);max-height:80vh;overflow-y:auto;box-sizing:border-box}\n.head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}\n.type-chip{background:#eef2ff;color:#3730a3;border:1px solid #c7d2fe;padding:2px 8px;border-radius:999px;font-size:12px}\n.group{border:1px solid #e5e7eb;border-radius:8px;padding:12px;margin-top:10px}\n.row{display:flex;flex-direction:column;gap:6px;margin-bottom:10px}\n.row.two{display:grid;gap:10px;grid-template-columns:1fr 1fr}\n.choice-row{display:flex;gap:16px}\nlabel{font-size:12px;color:#374151}\ninput[type=\"text\"],input[type=\"number\"],input[type=\"time\"],select{width:100%;padding:8px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;box-sizing:border-box}\n.chk{display:inline-flex;align-items:center;gap:8px}\n.note{color:#6b7280;font-size:12px}\n.options-scroll{max-height:220px;overflow:auto;border:1px dashed #e5e7eb;border-radius:8px;padding:8px}\n.opt-row{display:grid;grid-template-columns:24px 1fr 32px;gap:8px;align-items:center;margin-bottom:8px}\n.opt-index{text-align:right;color:#6b7280;font-size:12px}\n.icon-btn{border:1px solid #e5e7eb;border-radius:6px;background:#f9fafb;cursor:pointer;padding:4px 0}\n.quick{display:flex;gap:6px}\n.chips{display:flex;flex-direction:column;gap:6px}\n.chip-input-row input{width:100%}\n.add-mod-row{display:grid;grid-template-columns:1fr 40px;gap:6px}\n.add-mod-btn{padding:8px;border-radius:6px}\n.chip-group{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}\n.chip{background:#eef2ff;color:#111827;border:1px solid #c7d2fe;border-radius:999px;padding:2px 10px;font-size:12px;display:inline-flex;align-items:center;gap:6px}\n.chip.selectable input{margin-right:6px}\n.chip-x{background:transparent;border:none;cursor:pointer}\n.modal-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:12px}\n.btn-primary{background:#2563eb;color:#fff;border:none;padding:8px 14px;border-radius:6px;cursor:pointer;transition:background .2s ease,opacity .2s ease}\n.btn-primary:hover:not(:disabled){background:#1d4ed8}\n.btn-primary:disabled{background:#93c5fd;cursor:not-allowed;opacity:.7}\n.btn-option{background:#e5e7eb;color:#111827;border:none;padding:8px 14px;border-radius:6px;cursor:pointer}\n.err{color:#dc2626;font-size:12px;margin-top:4px}\n</style>\n","/* eslint-disable */\n\n/**\n * Coerce a \"defaultValue\" into the correct shape for a field type.\n * This keeps the preview value and stored constraints consistent.\n */\nexport function coerceDefaultForType(fieldType = \"text\", value) {\n  const t = String(fieldType || \"text\").toLowerCase();\n\n  if (value === undefined) return undefined;\n\n  switch (t) {\n    case \"slider\":\n      // No default for slider or linear scale (both are type \"slider\")\n      return undefined;\n\n    case \"file\":\n      // No default for file/link fields\n      return undefined;\n\n    case \"checkbox\":\n      return !!value;\n\n    case \"number\": {\n      if (value === \"\" || value === null) return \"\";\n      const n = Number(value);\n      return Number.isFinite(n) ? n : \"\";\n    }\n\n    case \"radio\":\n      if (Array.isArray(value)) return value.map(v => String(v));\n      return typeof value === \"string\" ? value : \"\";\n\n    case \"select\":\n      return typeof value === \"string\" ? value : \"\"\n\n    case \"date\":\n    case \"time\":\n      return typeof value === \"string\" ? value : \"\";\n\n    case \"textarea\":\n    case \"text\":\n    default:\n      return value == null ? \"\" : String(value);\n  }\n}\n\n/**\n * Normalize constraints per field type:\n * - strips unsupported keys\n * - coerces types\n * - enforces invariants\n * - removes nonsensical entries (e.g., placeholder for checkbox)\n * - coerces defaultValue via coerceDefaultForType\n *\n * NOTE: For radio/select, OPTIONS ARE FIELD-LEVEL (not a constraint).\n */\nexport function normalizeConstraints(fieldType = \"text\", raw = {}) {\n  const c = { ...(raw || {}) };\n\n  // Options belong to the field, not constraints.\n  if (Array.isArray(c.options)) delete c.options;\n\n  [\"required\", \"readonly\", \"allowMultiple\",\"allowMultipleFiles\", \"integerOnly\", \"percent\", \"showTicks\"].forEach((k) => {\n    if (k in c) c[k] = !!c[k];\n  });\n\n  [\n    \"min\", \"max\", \"step\",\n    \"maxLength\", \"minLength\",\n    \"maxLengthDigits\",\n    \"minDigits\", \"maxDigits\"\n  ].forEach((k) => {\n    if (k in c && c[k] !== \"\" && c[k] != null) {\n      const n = Number(c[k]);\n      c[k] = Number.isFinite(n) ? n : undefined;\n    }\n  });\n\n  // Migrate legacy maxLengthDigits -> maxDigits (if present)\n  if (\"maxLengthDigits\" in c && c.maxLengthDigits != null) {\n    if (!(\"maxDigits\" in c)) c.maxDigits = c.maxLengthDigits;\n    delete c.maxLengthDigits;\n  }\n\n  // Default value: type-aware\n  if (\"defaultValue\" in c) {\n    c.defaultValue = coerceDefaultForType(fieldType, c.defaultValue);\n  }\n\n  // Date normalization\n  if (fieldType === \"date\") {\n    [\"minDate\", \"maxDate\"].forEach((k) => {\n      if (c[k] == null) c[k] = \"\";\n    });\n    c.dateFormat = c.dateFormat || \"dd.MM.yyyy\";\n  }\n\n  // Time normalization\n  if (fieldType === \"time\") {\n    if (\"step\" in c && c.step !== \"\" && c.step != null) {\n      const n = Number(c.step);\n      c.step = Number.isFinite(n) ? n : undefined;\n    }\n    [\"minTime\", \"maxTime\"].forEach((k) => {\n      if (!(k in c)) return;\n      if (typeof c[k] !== \"string\") c[k] = \"\";\n    });\n  }\n\n  // Text-like normalization\n  if ([\"text\", \"textarea\"].includes(fieldType)) {\n    if (\"transform\" in c && ![\"none\", \"uppercase\", \"lowercase\", \"capitalize\"].includes(c.transform)) {\n      c.transform = \"none\";\n    }\n    if (c.pattern && typeof c.pattern !== \"string\") {\n      delete c.pattern;\n    }\n  }\n\n  // Checkbox: no placeholder\n  if (fieldType === \"checkbox\") {\n    delete c.placeholder;\n  }\n\n  // Enforce numeric range order for generic numeric\n  if (\"min\" in c && \"max\" in c && c.min != null && c.max != null) {\n    if (Number.isFinite(c.min) && Number.isFinite(c.max) && c.max < c.min) {\n      const t = c.min; c.min = c.max; c.max = t;\n    }\n  }\n  if (fieldType === \"date\" && c.minDate && c.maxDate && c.maxDate < c.minDate) {\n    const t = c.minDate; c.minDate = c.maxDate; c.maxDate = t;\n  }\n\n  if (String(fieldType).toLowerCase() === \"slider\") {\n    const mode = (String(c.mode || \"slider\").toLowerCase() === \"linear\") ? \"linear\" : \"slider\";\n    c.mode = mode;\n\n    const snap = (v, base, step) => {\n      if (!Number.isFinite(v)) return null;\n      if (!Number.isFinite(step) || step <= 0) return v;\n      const r = Math.round((v - base) / step);\n      return Number((base + r * step).toFixed(6));\n    };\n    const normalizeMarks = (marks, min, max, step) => {\n      let arr = [];\n      if (Array.isArray(marks)) arr = marks;\n      else if (marks && typeof marks === \"object\") {\n        arr = Object.keys(marks).map(k => ({ value: Number(k), label: String(marks[k]) }));\n      }\n      arr = arr\n        .map(m => ({ value: Number(m?.value), label: String(m?.label || \"\").trim() }))\n        .filter(m => Number.isFinite(m.value) && !!m.label)\n        .map(m => {\n          let v = snap(m.value, min, step);\n          if (!Number.isFinite(v)) v = m.value;\n          if (v < min) v = min;\n          if (v > max) v = max;\n          return { value: v, label: m.label };\n        });\n\n      const byVal = new Map();\n      arr.forEach(m => { if (!byVal.has(m.value)) byVal.set(m.value, m.label); });\n      return [...byVal.entries()]\n        .map(([value, label]) => ({ value, label }))\n        .sort((a, b) => a.value - b.value);\n    };\n\n    if (mode === \"slider\") {\n      if (c.percent) {\n        c.min = 1;\n        c.max = 100;\n        c.step = Math.max(1, Number.isFinite(c.step) && c.step > 0 ? Math.round(c.step) : 1);\n      } else {\n        c.min = Number.isFinite(c.min) ? c.min : 1;\n        c.max = Number.isFinite(c.max) ? c.max : 5;\n        if (c.max <= c.min) c.max = c.min + 1;\n        c.step = Number.isFinite(c.step) && c.step > 0 ? c.step : 1;\n      }\n\n      if (\"marks\" in c) {\n        c.marks = normalizeMarks(c.marks, c.min, c.max, c.step);\n      }\n\n      delete c.placeholder;\n      delete c.defaultValue;\n    } else {\n      c.min = Number.isFinite(c.min) ? Math.round(c.min) : 1;\n      c.max = Number.isFinite(c.max) ? Math.round(c.max) : 5;\n      if (c.max <= c.min) c.max = c.min + 1;\n\n      delete c.percent;\n      delete c.step;\n      delete c.marks;\n      delete c.placeholder;\n      delete c.defaultValue;\n    }\n\n    const COMMON_SLIDER = [\"required\", \"readonly\", \"helpText\"];\n    const allowed = mode === \"slider\"\n      ? [...COMMON_SLIDER, \"mode\", \"percent\", \"min\", \"max\", \"step\", \"marks\", \"showTicks\"]\n      : [...COMMON_SLIDER, \"mode\", \"min\", \"max\", \"leftLabel\", \"rightLabel\"];\n\n    const cleanedSlider = {};\n    for (const k of allowed) {\n      if (k in c && c[k] !== undefined) cleanedSlider[k] = c[k];\n    }\n    return cleanedSlider;\n  }\n\n  if (String(fieldType).toLowerCase() === \"file\") {\n    const sp = String(c.storagePreference || \"local\").toLowerCase();\n    c.storagePreference = (sp === \"url\") ? \"url\" : \"local\";\n\n    if (\"maxSizeMB\" in c && c.maxSizeMB !== \"\" && c.maxSizeMB != null) {\n      const n = Number(c.maxSizeMB);\n      c.maxSizeMB = Number.isFinite(n) && n > 0 ? n : 100;\n    } else {\n      c.maxSizeMB = 100;\n    }\n\n    let formats = Array.isArray(c.allowedFormats) ? c.allowedFormats : [];\n    formats = formats\n      .map(x => String(x || \"\").trim().toLowerCase())\n      .filter(Boolean);\n    c.allowedFormats = Array.from(new Set(formats));\n\n    let mods = Array.isArray(c.modalities) ? c.modalities : [];\n    mods = mods.map(x => String(x || \"\").trim()).filter(Boolean);\n    c.modalities = Array.from(new Set(mods));\n\n    const allowed = [\n      \"required\", \"readonly\", \"helpText\", \"placeholder\",\n      \"storagePreference\", \"allowedFormats\", \"maxSizeMB\", \"modalities\", \"allowMultipleFiles\"\n    ];\n\n    const cleanedFile = {};\n    for (const k of allowed) {\n      if (k in c && c[k] !== undefined) cleanedFile[k] = c[k];\n    }\n    return cleanedFile;\n  }\n\n  const COMMON = [\"required\", \"readonly\", \"helpText\", \"placeholder\", \"defaultValue\"];\n  const TEXTLIKE = [\"minLength\", \"maxLength\", \"pattern\", \"transform\"];\n  const NUMBER = [\"min\", \"max\", \"step\", \"integerOnly\", \"minDigits\", \"maxDigits\"];\n  const DATE = [\"minDate\", \"maxDate\", \"dateFormat\", \"defaultValue\"];\n  const TIME = [\"minTime\", \"maxTime\", \"step\"];\n\n  let allowed = [...COMMON];\n\n  switch (String(fieldType).toLowerCase()) {\n    case \"text\":\n    case \"textarea\":\n      allowed = [...COMMON, ...TEXTLIKE];\n      break;\n    case \"number\":\n      allowed = [...COMMON, ...NUMBER];\n      break;\n    case \"date\":\n      allowed = [...COMMON, ...DATE];\n      break;\n    case \"time\":\n      allowed = [...COMMON, ...TIME];\n      break;\n    case \"select\":\n      allowed = [...COMMON];\n      delete c.allowMultiple;\n      break;\n    case \"radio\":\n      allowed = [...COMMON, \"allowMultiple\"];\n      break;\n    case \"checkbox\":\n      allowed = [\"required\", \"readonly\", \"helpText\", \"defaultValue\"];\n      break;\n    default:\n      allowed = [...COMMON];\n  }\n\n  const cleaned = {};\n  for (const k of allowed) {\n    if (k in c && c[k] !== undefined) cleaned[k] = c[k];\n  }\n\n  if (String(fieldType).toLowerCase() === \"number\") {\n    if (Number.isFinite(cleaned.minDigits) && cleaned.minDigits < 0) cleaned.minDigits = 0;\n    if (Number.isFinite(cleaned.maxDigits) && cleaned.maxDigits < 0) cleaned.maxDigits = 0;\n    if (Number.isFinite(cleaned.minDigits) && Number.isFinite(cleaned.maxDigits) && cleaned.maxDigits < cleaned.minDigits) {\n      const t = cleaned.minDigits; cleaned.minDigits = cleaned.maxDigits; cleaned.maxDigits = t;\n    }\n    if (cleaned.integerOnly && \"step\" in cleaned && cleaned.step != null && !Number.isInteger(cleaned.step)) {\n      delete cleaned.step;\n    }\n  }\n\n  return cleaned;\n}\n","<template>\n  <div class=\"dfp-wrapper\" :class=\"{ readonly: isReadonly }\">\n    <VueDatePicker\n      v-model=\"innerValue\"\n      :model-type=\"'format'\"\n      :format=\"resolvedFormat\"\n      :placeholder=\"placeholder || resolvedFormat\"\n      :min-date=\"dateMinResolved\"\n      :max-date=\"dateMaxResolved\"\n      :teleport=\"false\"\n      :enable-time-picker=\"mode === 'time'\"\n      :time-picker=\"mode === 'time'\"\n      :month-picker=\"mode === 'date' && isMonthPicker\"\n      :year-picker=\"mode === 'date' && isYearPicker\"\n      :auto-apply=\"true\"\n      :clearable=\"!isReadonly\"\n      :disabled=\"isReadonly\"\n      input-class=\"dfp-input\"\n      class=\"dfp-picker\"\n      @update:model-value=\"emitChange\"\n      v-bind=\"$attrs\"\n    />\n    <!-- overlay to guarantee no edits when readonly -->\n    <div v-if=\"isReadonly\" class=\"dfp-overlay\" aria-hidden=\"true\"></div>\n  </div>\n</template>\n\n<script>\nimport VueDatePicker from '@vuepic/vue-datepicker';\nimport '@vuepic/vue-datepicker/dist/main.css';\n\nexport default {\n  name: 'DateFormatPicker',\n  components: { VueDatePicker },\n  inheritAttrs: false,\n  props: {\n    modelValue: { type: [String, Date, null], default: '' },\n    format: { type: String, default: 'dd.MM.yyyy' },\n    placeholder: { type: String, default: '' },\n    minDate: { type: [String, Date], default: null },\n    maxDate: { type: [String, Date], default: null },\n    mode: { type: String, default: 'date' }, // 'date' | 'time'\n    readonly: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n  },\n  emits: ['update:modelValue'],\n  computed: {\n    isYearPicker() {\n      return this.mode === 'date' && this.format.toLowerCase() === 'yyyy';\n    },\n    isMonthPicker() {\n      if (this.mode !== 'date') return false;\n      const f = this.format.toLowerCase();\n      // support common month-year patterns\n      return (\n        f === 'mm-yyyy' || f === 'yyyy-mm' ||\n        f === 'mm/yyyy' || f === 'yyyy/mm' ||\n        f === 'mm.yyyy' || f === 'yyyy.mm'\n      );\n    },\n    resolvedFormat() {\n      // normalize to datepicker tokens\n      return this.format\n        .replace(/yyyy/gi, 'yyyy')\n        .replace(/dd/gi, 'dd')\n        .replace(/mm/gi, 'MM')  // month\n        .replace(/hh/gi, 'HH'); // 24h\n    },\n    // block edits when explicit readonly/disabled attrs are true\n    isReadonly() {\n      const isTrue = (v) => v === true || v === 'true' || v === '';\n      return !!(\n        this.readonly ||\n        this.disabled ||\n        isTrue(this.$attrs.readonly) ||\n        isTrue(this.$attrs.disabled) ||\n        isTrue(this.$attrs['aria-readonly']) ||\n        isTrue(this.$attrs['data-readonly'])\n      );\n    },\n    innerValue: {\n      get() {\n        return this.modelValue || '';\n      },\n      set(v) {\n        if (!this.isReadonly) this.$emit('update:modelValue', v || '');\n      }\n    },\n    // Proper min/max handling for month/year formats\n    dateMinResolved() {\n      const d = this.resolveDate(this.minDate, 'min');\n      return d || undefined;\n    },\n    dateMaxResolved() {\n      const d = this.resolveDate(this.maxDate, 'max');\n      return d || undefined;\n    },\n  },\n  methods: {\n    emitChange(v) {\n      if (!this.isReadonly) this.$emit('update:modelValue', v || '');\n    },\n    // turn string/date into Date object respecting current format\n    resolveDate(input, kind /* 'min' | 'max' */) {\n      if (!input) return null;\n      if (input instanceof Date) return this.normalizeBoundary(input, kind);\n\n      const s = String(input).trim();\n      const d =\n        this.parseByFormat(s, this.format) ||\n        this.parseByFormat(s, this.resolvedFormat);\n      return d ? this.normalizeBoundary(d, kind) : null;\n    },\n    // For month/year pickers, bound to first/last day of month/year\n    normalizeBoundary(dateObj, kind) {\n      const y = dateObj.getFullYear();\n      const m = dateObj.getMonth();\n      if (this.isYearPicker) {\n        return new Date(kind === 'min' ? y : y, kind === 'min' ? 0 : 11, kind === 'min' ? 1 : 31);\n      }\n      if (this.isMonthPicker) {\n        if (kind === 'min') return new Date(y, m, 1);\n        return new Date(y, m + 1, 0); // last day of month\n      }\n      return dateObj; // day-level date as-is\n    },\n    // small parser for common patterns supported in constraints\n    parseByFormat(str, fmt) {\n      if (!str || !fmt) return null;\n      const f = fmt.toLowerCase();\n      const s = String(str).trim();\n\n      // yyyy\n      if (f === 'yyyy') {\n        const m = /^(\\d{4})$/.exec(s);\n        if (!m) return null;\n        return new Date(+m[1], 0, 1);\n      }\n\n      // MM-yyyy / MM/yyyy / MM.yyyy\n      if (f === 'mm-yyyy' || f === 'mm/yyyy' || f === 'mm.yyyy') {\n        const m = /^(\\d{2})[-/.](\\d{4})$/.exec(s);\n        if (!m) return null;\n        return new Date(+m[2], +m[1] - 1, 1);\n      }\n\n      // yyyy-MM / yyyy/MM / yyyy.MM\n      if (f === 'yyyy-mm' || f === 'yyyy/mm' || f === 'yyyy.mm') {\n        const m = /^(\\d{4})[-/.](\\d{2})$/.exec(s);\n        if (!m) return null;\n        return new Date(+m[1], +m[2] - 1, 1);\n      }\n\n      // dd.MM.yyyy\n      if (f === 'dd.mm.yyyy') {\n        const m = /^(\\d{2})\\.(\\d{2})\\.(\\d{4})$/.exec(s);\n        if (!m) return null;\n        return new Date(+m[3], +m[2] - 1, +m[1]);\n      }\n\n      // dd-MM-yyyy\n      if (f === 'dd-mm-yyyy') {\n        const m = /^(\\d{2})-(\\d{2})-(\\d{4})$/.exec(s);\n        if (!m) return null;\n        return new Date(+m[3], +m[2] - 1, +m[1]);\n      }\n\n      // MM-dd-yyyy\n      if (f === 'mm-dd-yyyy') {\n        const m = /^(\\d{2})-(\\d{2})-(\\d{4})$/.exec(s);\n        if (!m) return null;\n        return new Date(+m[3], +m[1] - 1, +m[2]);\n      }\n\n      // yyyy-MM-dd\n      if (f === 'yyyy-mm-dd') {\n        const m = /^(\\d{4})-(\\d{2})-(\\d{2})$/.exec(s);\n        if (!m) return null;\n        return new Date(+m[1], +m[2] - 1, +m[3]);\n      }\n\n      return null;\n    },\n  }\n};\n</script>\n\n<style scoped>\n.dfp-wrapper {\n  position: relative;\n  width: 100%;\n}\n.dfp-picker {\n  width: 100%;\n}\n.dfp-input {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  box-sizing: border-box;\n  font-size: 14px;\n  color: #1f2937;\n}\n/* overlay to fully block interaction when readonly */\n.dfp-overlay {\n  position: absolute;\n  inset: 0;\n  background: transparent;\n  pointer-events: all;\n  z-index: 3;\n  cursor: not-allowed;\n}\n.dfp-wrapper.readonly .dfp-input {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n</style>\n","import { render } from \"./DateFormatPicker.vue?vue&type=template&id=0479acb3&scoped=true\"\nimport script from \"./DateFormatPicker.vue?vue&type=script&lang=js\"\nexport * from \"./DateFormatPicker.vue?vue&type=script&lang=js\"\n\nimport \"./DateFormatPicker.vue?vue&type=style&index=0&id=0479acb3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0479acb3\"]])\n\nexport default __exports__","<template>\n  <div class=\"ftm-wrap\" :class=\"{ readonly: isReadonly }\">\n    <!-- Display input -->\n    <div\n      class=\"ftm-input\"\n      :tabindex=\"isReadonly ? -1 : 0\"\n      @click=\"toggleOpen\"\n      @keydown.enter.prevent=\"toggleOpen\"\n      @keydown.space.prevent=\"toggleOpen\"\n      :aria-readonly=\"isReadonly ? 'true' : 'false'\"\n    >\n      <i :class=\"icons.clock\" class=\"ftm-clock-icon\" aria-hidden=\"true\"></i>\n      <span\n        class=\"ftm-text\"\n        :class=\"{ placeholder: !displayValue }\"\n      >{{ displayValue || placeholderText }}</span>\n    </div>\n\n    <!-- Popover (no long lists; stepper controls) -->\n    <div v-if=\"menuOpen\" class=\"ftm-pop\" @mousedown.stop>\n      <div class=\"ftm-row\">\n        <!-- HOURS -->\n        <div class=\"ftm-step\">\n          <button class=\"ftm-step-btn\" @click=\"stepHour( +1 )\" :disabled=\"isReadonly\"> <i :class=\"icons.toggleUp\"></i></button>\n          <input\n            class=\"ftm-step-input\"\n            type=\"number\"\n            :min=\"is12h ? 1 : 0\"\n            :max=\"is12h ? 12 : 23\"\n            v-model.number=\"uiHour\"\n            :disabled=\"isReadonly\"\n          />\n          <button class=\"ftm-step-btn\" @click=\"stepHour( -1 )\" :disabled=\"isReadonly\"><i :class=\"icons.toggleDown\"></i></button>\n        </div>\n\n        <span class=\"ftm-colon\">:</span>\n\n        <!-- MINUTES -->\n        <div class=\"ftm-step\">\n          <button class=\"ftm-step-btn\" @click=\"stepMinute( +1 )\" :disabled=\"isReadonly\"> <i :class=\"icons.toggleUp\"></i></button>\n          <input\n            class=\"ftm-step-input\"\n            type=\"number\"\n            min=\"0\"\n            max=\"59\"\n            v-model.number=\"uiMinute\"\n            :disabled=\"isReadonly\"\n          />\n          <button class=\"ftm-step-btn\" @click=\"stepMinute( -1 )\" :disabled=\"isReadonly\"><i :class=\"icons.toggleDown\"></i></button>\n        </div>\n\n        <!-- AM/PM -->\n        <div v-if=\"is12h\" class=\"ftm-ap-toggle\">\n          <button\n            class=\"ftm-ap-btn\"\n            :class=\"{ active: ap==='AM' }\"\n            @click=\"ap='AM'\"\n            :disabled=\"isReadonly\"\n          >AM</button>\n          <button\n            class=\"ftm-ap-btn\"\n            :class=\"{ active: ap==='PM' }\"\n            @click=\"ap='PM'\"\n            :disabled=\"isReadonly\"\n          >PM</button>\n        </div>\n      </div>\n\n      <div class=\"ftm-actions\">\n        <button class=\"ftm-btn\" @click=\"apply\" :disabled=\"isReadonly\">OK</button>\n        <button class=\"ftm-btn ghost\" @click=\"close\">Cancel</button>\n        <button class=\"ftm-btn ghost\" v-if=\"!isReadonly\" @click=\"setNow\">Now</button>\n        <small v-if=\"boundText\" class=\"ftm-bounds\">{{ boundText }}</small>\n      </div>\n    </div>\n\n    <!-- Readonly shield -->\n    <div v-if=\"isReadonly\" class=\"ftm-overlay\" aria-hidden=\"true\"></div>\n  </div>\n</template>\n\n<script>\nimport icons from \"@/assets/styles/icons\";\nexport default {\n  name: \"FieldTime\",\n  inheritAttrs: false,\n  props: {\n    modelValue:   { type: String, default: \"\" },       // stored \"HH:mm\"\n    placeholder:  { type: String, default: \"\" },\n    id:           { type: String, default: null },\n\n    // constraints (may come via v-bind=\"constraints\")\n    minTime:      { type: String, default: \"\" },       // \"HH:mm\" or \"hh:mm AM/PM\"\n    maxTime:      { type: String, default: \"\" },\n    readonly:     { type: Boolean, default: false },\n    disabled:     { type: Boolean, default: false },\n    required:     { type: Boolean, default: false },\n    defaultValue: { type: String,  default: undefined },\n    hourCycle:    { type: String,  default: \"24\" }     // \"24\" | \"12\"\n  },\n  emits: [\"update:modelValue\"],\n  data() {\n    return {\n      menuOpen: false,\n      uiHour: 12,        // 1..12 in 12h mode; 0..23 in 24h mode\n      uiMinute: 0,\n      ap: \"AM\",\n      icons,\n    };\n  },\n  computed: {\n    isReadonly() {\n      const a = this.$attrs, isTrue = (v) => v === true || v === \"true\" || v === \"\";\n      return !!(this.readonly || this.disabled || isTrue(a.readonly) || isTrue(a.disabled) || isTrue(a[\"aria-readonly\"]) || isTrue(a[\"data-readonly\"]));\n    },\n    isRequired() {\n      const a = this.$attrs, isTrue = (v) => v === true || v === \"true\" || v === \"\";\n      return !!(this.required || isTrue(a.required));\n    },\n    is12h() {\n      const raw = this.hourCycle || this.$attrs.hourCycle || \"24\";\n      return String(raw) === \"12\";\n    },\n    displayValue() {\n      const d = this.parseToDate(this.modelValue);\n      if (!d) return \"\";\n      return this.is12h ? this.to12(d) : this.to24(d);\n    },\n    placeholderText() { return this.placeholder || (this.is12h ? \"hh:mm AM/PM\" : \"HH:mm\"); },\n    minDate() { return this.parseToDate(this.minTime); },\n    maxDate() { return this.parseToDate(this.maxTime); },\n    boundText() {\n      const s = [];\n      if (this.minDate) s.push(`min ${this.is12h ? this.to12(this.minDate) : this.to24(this.minDate)}`);\n      if (this.maxDate) s.push(`max ${this.is12h ? this.to12(this.maxDate) : this.to24(this.maxDate)}`);\n      return s.join(\"  \");\n    }\n  },\n  watch: {\n    hourCycle() { this.syncPanelFromValue(); }\n  },\n  mounted() {\n    if (!this.hasValue(this.modelValue)) {\n      const eff = this.effectiveDefault();\n      if (eff) this.$emit(\"update:modelValue\", eff);\n    } else {\n      const norm = this.normalizeHHMM(this.modelValue);\n      if (norm !== this.modelValue) this.$emit(\"update:modelValue\", norm);\n    }\n    this.syncPanelFromValue();\n    document.addEventListener(\"mousedown\", this.onDocDown);\n  },\n  beforeUnmount() { document.removeEventListener(\"mousedown\", this.onDocDown); },\n  methods: {\n    // open/close\n    toggleOpen() { if (!this.isReadonly) { this.menuOpen = !this.menuOpen; if (this.menuOpen) this.syncPanelFromValue(); } },\n    close() { this.menuOpen = false; },\n    onDocDown(e) { if (!this.$el.contains(e.target)) this.close(); },\n\n    // utils\n    pad2(n) { return String(n).padStart(2, \"0\"); },\n    hasValue(v) { return typeof v === \"string\" && v.trim() !== \"\"; },\n    nowHHMM() {\n      const d = new Date();\n      return `${this.pad2(d.getHours())}:${this.pad2(d.getMinutes())}`;\n    },\n    effectiveDefault() {\n      const hasProp = Object.prototype.hasOwnProperty.call(this.$props, \"defaultValue\");\n      if (hasProp && this.hasValue(this.defaultValue)) {\n        const d = this.parseToDate(this.defaultValue);\n        return d ? this.to24(d) : \"\";\n      }\n      const hasAttr = Object.prototype.hasOwnProperty.call(this.$attrs, \"defaultValue\");\n      if (hasAttr && this.hasValue(this.$attrs.defaultValue)) {\n        const d = this.parseToDate(String(this.$attrs.defaultValue));\n        return d ? this.to24(d) : \"\";\n      }\n      if (this.isReadonly && this.isRequired) return this.nowHHMM();\n      return \"\";\n    },\n\n    // parsing / formatting\n    parseToDate(v) {\n      const s = String(v || \"\").trim();\n      let m = /^(\\d{1,2}):(\\d{2})\\s*(AM|PM)$/i.exec(s);\n      if (m) {\n        let hh = +m[1], mm = +m[2];\n        if (hh < 1 || hh > 12 || mm < 0 || mm > 59) return null;\n        const ap = m[3].toUpperCase();\n        if (ap === \"PM\" && hh < 12) hh += 12;\n        if (ap === \"AM\" && hh === 12) hh = 0;\n        const d = new Date();\n        d.setHours(hh, mm, 0, 0);\n        return d;\n      }\n      m = /^(\\d{1,2}):(\\d{2})$/.exec(s);\n      if (m) {\n        let hh = +m[1], mm = +m[2];\n        if (hh < 0 || hh > 23 || mm < 0 || mm > 59) return null;\n        const d = new Date();\n        d.setHours(hh, mm, 0, 0);\n        return d;\n      }\n      return null;\n    },\n    normalizeHHMM(v) { const d = this.parseToDate(v); return d ? this.to24(d) : \"\"; },\n    to24(d) { return `${this.pad2(d.getHours())}:${this.pad2(d.getMinutes())}`; },\n    to12(d) {\n      let h = d.getHours(), ap = h >= 12 ? \"PM\" : \"AM\";\n      h = h % 12; if (h === 0) h = 12;\n      return `${this.pad2(h)}:${this.pad2(d.getMinutes())} ${ap}`;\n    },\n\n    // panel sync\n    syncPanelFromValue() {\n      const d = this.parseToDate(this.modelValue) || this.parseToDate(this.effectiveDefault()) || new Date();\n      let h = d.getHours();\n      this.uiMinute = d.getMinutes();\n      if (this.is12h) {\n        this.ap = h >= 12 ? \"PM\" : \"AM\";\n        h = h % 12; if (h === 0) h = 12;\n        this.uiHour = h; // 1..12\n      } else {\n        this.uiHour = h; // 0..23\n      }\n    },\n    currentSelectionToDate() {\n      let h = Number(this.uiHour) || 0;\n      const m = Number(this.uiMinute) || 0;\n      if (this.is12h) {\n        if (this.ap === \"PM\" && h < 12) h += 12;\n        if (this.ap === \"AM\" && h === 12) h = 0;\n      }\n      const d = new Date();\n      d.setHours(Math.min(23, Math.max(0, h)), Math.min(59, Math.max(0, m)), 0, 0);\n      return d;\n    },\n    clampToBounds(d) {\n      const min = this.minDate, max = this.maxDate;\n      if (min && d < min) return new Date(min);\n      if (max && d > max) return new Date(max);\n      return d;\n    },\n\n    // actions\n    apply() {\n      if (this.isReadonly) return;\n      let d = this.currentSelectionToDate();\n      d = this.clampToBounds(d);\n      this.$emit(\"update:modelValue\", this.to24(d)); // store HH:mm\n      this.close();\n    },\n    setNow() {\n      if (this.isReadonly) return;\n      let d = new Date();\n      d = this.clampToBounds(d);\n      this.$emit(\"update:modelValue\", this.to24(d));\n      this.syncPanelFromValue();\n    },\n\n    // steppers\n    stepHour(delta) {\n      if (this.is12h) {\n        let h = (Number(this.uiHour) || 12) + delta;\n        if (h > 12) h = 1;\n        if (h < 1) h = 12;\n        this.uiHour = h;\n      } else {\n        let h = (Number(this.uiHour) || 0) + delta;\n        if (h > 23) h = 0;\n        if (h < 0) h = 23;\n        this.uiHour = h;\n      }\n    },\n    stepMinute(delta) {\n      let m = (Number(this.uiMinute) || 0) + delta;\n      if (m > 59) m = 0;\n      if (m < 0) m = 59;\n      this.uiMinute = m;\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* container */\n.ftm-wrap {\n  position: relative;\n  width: 100%;\n  min-width: 0; /* allow children to shrink inside narrow columns */\n}\n\n/* faux input (always same UI for 12h/24h) */\n.ftm-input {\n  width: 100%;\n  padding: 8px 10px;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 14px;\n  color: #1f2937;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: text;\n  background: #fff;\n  box-sizing: border-box;\n}\n.ftm-input:focus {\n  outline: none;\n  box-shadow: 0 0 0 3px rgba(107,114,128,.15);\n}\n.ftm-clock-icon { font-size: 14px; opacity: .85; }\n.ftm-text { flex: 1; user-select: none; }\n.ftm-text.placeholder { color: #9ca3af; /* gray-400 */ }\n.readonly .ftm-input { opacity: .6; cursor: not-allowed; }\n\n/* popover */\n.ftm-pop {\n  position: absolute;\n  z-index: 20;\n  top: calc(100% + 6px);\n  left: 0;\n  right: 0;               /* stretch within the column */\n  margin-top: 0;\n  background: #fff;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 10px;\n  box-shadow: 0 10px 25px rgba(0,0,0,.12);\n  width: 100%;\n  max-width: 100%;\n  min-width: 0;           /* remove rigid minimum */\n  box-sizing: border-box; /* include padding in width */\n}\n\n/* row with steppers */\n.ftm-row {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;        /* wrap controls instead of overflowing */\n}\n.ftm-colon { font-weight: 600; color: #374151; }\n\n/* hour/minute steppers */\n.ftm-step {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.ftm-step-btn {\n  padding: 4px 6px;\n  border: 1px solid #d1d5db;\n  background: #f9fafb;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 12px;\n  line-height: 1;\n}\n.ftm-step-input {\n  width: 64px;\n  min-width: 60px;\n  max-width: 100%;\n  text-align: center;\n  padding: 6px 8px;\n  margin: 4px 0;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 14px;\n  box-sizing: border-box;\n}\n\n/* AM/PM toggle */\n.ftm-ap-toggle {\n  display: inline-flex;\n  gap: 6px;\n  margin-left: auto; /* push nicely when space allows */\n}\n.ftm-ap-btn {\n  padding: 6px 10px;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: #fff;\n  cursor: pointer;\n}\n.ftm-ap-btn.active {\n  background: #111827;\n  color: #fff;\n  border-color: #111827;\n}\n\n/* actions */\n.ftm-actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-top: 10px;\n  flex-wrap: wrap;\n}\n.ftm-btn {\n  padding: 6px 10px;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: #f9fafb;\n  cursor: pointer;\n  font-size: 13px;\n}\n.ftm-btn.ghost { background: #fff; }\n.ftm-btn:disabled { cursor: not-allowed; opacity: .5; }\n.ftm-bounds { margin-left: auto; color: #6b7280; font-size: 12px; }\n\n/* readonly shield */\n.ftm-overlay {\n  position: absolute;\n  inset: 0;\n  background: transparent;\n  pointer-events: all;\n  z-index: 3;\n  cursor: not-allowed;\n}\n</style>\n","import { render } from \"./FieldTime.vue?vue&type=template&id=782774e8&scoped=true\"\nimport script from \"./FieldTime.vue?vue&type=script&lang=js\"\nexport * from \"./FieldTime.vue?vue&type=script&lang=js\"\n\nimport \"./FieldTime.vue?vue&type=style&index=0&id=782774e8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-782774e8\"]])\n\nexport default __exports__","import { render } from \"./FieldConstraintsDialog.vue?vue&type=template&id=78da675a&scoped=true\"\nimport script from \"./FieldConstraintsDialog.vue?vue&type=script&lang=js\"\nexport * from \"./FieldConstraintsDialog.vue?vue&type=script&lang=js\"\n\nimport \"./FieldConstraintsDialog.vue?vue&type=style&index=0&id=78da675a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-78da675a\"]])\n\nexport default __exports__","<template>\n  <label class=\"fcx-wrapper\" :class=\"{ readonly: isReadonly }\">\n    <input\n      type=\"checkbox\"\n      :id=\"id\"\n      v-model=\"proxy\"\n      :disabled=\"isReadonly\"\n      :aria-readonly=\"isReadonly ? 'true' : 'false'\"\n      @click=\"onMaybeBlock\"\n      @keydown.exact=\"onMaybeBlock\"\n      @wheel=\"onMaybeBlock\"\n    />\n  </label>\n</template>\n\n<script>\nexport default {\n  name: \"FieldCheckbox\",\n  inheritAttrs: true,\n  props: {\n    modelValue: { type: Boolean, default: false },\n    id: { type: String, default: null },\n\n    // Constraints (may come via v-bind=\"$field.constraints\")\n    readonly: { type: Boolean, default: false },\n    required: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n    defaultValue: { type: [Boolean, String, Number, null], default: undefined },\n  },\n  emits: [\"update:modelValue\"],\n  computed: {\n    isReadonly() {\n      const attrRO =\n        this.$attrs.readonly === \"\" ||\n        this.$attrs.readonly === \"true\" ||\n        this.$attrs.readonly === true;\n      const attrDisabled =\n        this.$attrs.disabled === \"\" ||\n        this.$attrs.disabled === \"true\" ||\n        this.$attrs.disabled === true;\n      return this.readonly || this.disabled || attrRO || attrDisabled;\n    },\n    isRequired() {\n      const attrReq =\n        this.$attrs.required === \"\" ||\n        this.$attrs.required === \"true\" ||\n        this.$attrs.required === true;\n      return this.required || attrReq;\n    },\n    effectiveDefault() {\n      // 1) explicit defaultValue (prop or attr) wins\n      if (Object.prototype.hasOwnProperty.call(this.$props, \"defaultValue\")) {\n        return !!this.defaultValue;\n      }\n      if (Object.prototype.hasOwnProperty.call(this.$attrs, \"defaultValue\")) {\n        const v = this.$attrs.defaultValue;\n        return v === \"\" ? true : v === true || v === \"true\";\n      }\n      // 2) impossible state: readonly + required => true\n      if (this.isReadonly && this.isRequired) return true;\n      // 3) otherwise false by default\n      return false;\n    },\n    proxy: {\n      get() {\n        return !!this.modelValue;\n      },\n      set(v) {\n        if (!this.isReadonly) this.$emit(\"update:modelValue\", !!v);\n      },\n    },\n  },\n  mounted() {\n    this.enforceRules(true);\n  },\n  watch: {\n    // Re-enforce when constraints or value change\n    isReadonly() { this.enforceRules(); },\n    isRequired() { this.enforceRules(); },\n    defaultValue() { this.enforceRules(); },\n    modelValue() { this.enforceRules(); },\n  },\n  methods: {\n    onMaybeBlock(e) {\n      if (this.isReadonly) {\n        e.preventDefault?.();\n        e.stopPropagation?.();\n        return false;\n      }\n      // if editable, do nothing (let v-model toggle)\n    },\n    enforceRules(initial = false) {\n      // If value is \"unset\" (null/undefined/empty string), apply effective default\n      const isUnset = this.modelValue === null || this.modelValue === undefined || this.modelValue === \"\";\n      if (isUnset) {\n        this.$emit(\"update:modelValue\", this.effectiveDefault);\n        return;\n      }\n\n      // If readonly + required but not checked, force true\n      if (this.isReadonly && this.isRequired && this.modelValue !== true) {\n        this.$emit(\"update:modelValue\", true);\n        return;\n      }\n\n      // If an explicit defaultValue is provided and this is the first mount with falsy value,\n      // initialize to that (without overriding a deliberate false later).\n      if (initial && Object.prototype.hasOwnProperty.call(this.$props, \"defaultValue\")) {\n        if (this.modelValue !== !!this.defaultValue) {\n          this.$emit(\"update:modelValue\", !!this.defaultValue);\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.fcx-wrapper input[type=\"checkbox\"] {\n  display: inline-block !important;\n  width: 16px;\n  height: 16px;\n  margin: 0;\n  cursor: pointer;\n  border: 2px solid #ccc;\n  border-radius: 4px;\n  background-color: #fff;\n  appearance: none;\n  position: relative;\n  transition: background-color 0.2s ease, border-color 0.2s ease;\n}\n.fcx-wrapper.readonly input[type=\"checkbox\"] {\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n.fcx-wrapper input[type=\"checkbox\"]:checked {\n  background-color: #444;\n  border-color: #444;\n}\n.fcx-wrapper input[type=\"checkbox\"]:checked::after {\n  content: '';\n  position: absolute;\n  top: 2px;\n  left: 5px;\n  width: 4px;\n  height: 8px;\n  border: solid #fff;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n}\n</style>\n","import { render } from \"./FieldCheckbox.vue?vue&type=template&id=10393368&scoped=true\"\nimport script from \"./FieldCheckbox.vue?vue&type=script&lang=js\"\nexport * from \"./FieldCheckbox.vue?vue&type=script&lang=js\"\n\nimport \"./FieldCheckbox.vue?vue&type=style&index=0&id=10393368&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-10393368\"]])\n\nexport default __exports__","<template>\n  <div class=\"frg\">\n    <!-- MULTI (checkboxes) -->\n    <template v-if=\"allowMultiple\">\n      <label\n        v-for=\"(opt, i) in stringOptions\"\n        :key=\"'m-' + i\"\n        class=\"radio-label\"\n      >\n        <input\n          type=\"checkbox\"\n          :name=\"name + '[]'\"\n          :value=\"opt\"\n          :checked=\"proxyArray.includes(opt)\"\n          :disabled=\"isReadonly\"\n          :aria-readonly=\"isReadonly ? 'true' : 'false'\"\n          @mousedown.prevent=\"isReadonly && $event.preventDefault()\"\n          @change=\"onToggleMulti(opt, $event.target.checked)\"\n        />\n        {{ opt }}\n      </label>\n    </template>\n\n    <!-- SINGLE (radios) -->\n    <template v-else>\n      <label\n        v-for=\"(opt, i) in stringOptions\"\n        :key=\"'s-' + i\"\n        class=\"radio-label\"\n      >\n        <input\n          type=\"radio\"\n          :name=\"name\"\n          :value=\"opt\"\n          :checked=\"proxySingle === opt\"\n          :disabled=\"isReadonly\"\n          :aria-readonly=\"isReadonly ? 'true' : 'false'\"\n          @mousedown.prevent=\"isReadonly && $event.preventDefault()\"\n          @change=\"onSelectSingle(opt)\"\n        />\n        {{ opt }}\n      </label>\n    </template>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FieldRadioGroup\",\n  inheritAttrs: false,\n  props: {\n    modelValue: { type: [String, Number, Array], default: \"\" },\n    options: { type: Array, default: () => [] },\n    name: { type: String, default: \"radio\" },\n\n    // constraints\n    readonly: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n    defaultValue: { type: [String, Number, Array], default: \"\" },\n    allowMultiple: { type: Boolean, default: false },\n  },\n  emits: [\"update:modelValue\", \"change\"],\n  computed: {\n    isReadonly() {\n      const attrReadonly =\n        this.$attrs.readonly === \"\" ||\n        this.$attrs.readonly === true ||\n        this.$attrs.readonly === \"true\";\n      return this.readonly || attrReadonly || this.disabled;\n    },\n    stringOptions() {\n      return this.options.map((o) => (o == null ? \"\" : String(o)));\n    },\n    // single\n    proxySingle() {\n      return this.modelValue == null ? \"\" : String(this.modelValue);\n    },\n    // multi\n    proxyArray() {\n      const v = this.modelValue;\n      if (Array.isArray(v)) return v.map((x) => (x == null ? \"\" : String(x)));\n      // if parent gave scalar while we are in multi mode, coerce to []\n      return [];\n    },\n  },\n  mounted() {\n    this.initFromDefaults();\n  },\n  watch: {\n    options() {\n      // keep current value(s) valid when options change\n      const opts = this.stringOptions;\n\n      if (this.allowMultiple) {\n        const cur = this.proxyArray.filter((v) => opts.includes(v));\n        this.$emit(\"update:modelValue\", cur);\n        this.$emit(\"change\", cur);\n      } else {\n        const cur = this.proxySingle;\n        if (!opts.includes(cur)) {\n          const dv = this.pickSingleDefault();\n          const next = dv && opts.includes(dv) ? dv : \"\";\n          this.$emit(\"update:modelValue\", next);\n          this.$emit(\"change\", next);\n        }\n      }\n    },\n    allowMultiple() {\n      // when the mode flips, coerce the model shape and apply defaults if needed\n      this.initFromDefaults(true);\n    },\n  },\n  methods: {\n    // ----- defaults / init -----\n    pickSingleDefault() {\n      // defaultValue may be scalar or array; for single, pick first valid\n      const opts = this.stringOptions;\n      const dv = this.defaultValue;\n\n      if (Array.isArray(dv)) {\n        const first = dv.map((x) => String(x)).find((x) => opts.includes(x));\n        return first || \"\";\n      }\n      const s = dv == null ? \"\" : String(dv);\n      return opts.includes(s) ? s : \"\";\n    },\n    pickMultiDefault() {\n      // intersect defaults array with options\n      const opts = this.stringOptions;\n      const dv = this.defaultValue;\n\n      if (Array.isArray(dv)) {\n        return dv.map((x) => String(x)).filter((x) => opts.includes(x));\n      }\n      const s = dv == null ? \"\" : String(dv);\n      return opts.includes(s) ? [s] : [];\n    },\n    initFromDefaults(force = false) {\n      const hasValue = (v) =>\n        (Array.isArray(v) ? v.length > 0 : v !== null && String(v).trim() !== \"\");\n\n      if (this.allowMultiple) {\n        const cur = this.proxyArray;\n        if (!hasValue(cur) || force) {\n          const next = this.pickMultiDefault();\n          this.$emit(\"update:modelValue\", next);\n          this.$emit(\"change\", next);\n        }\n      } else {\n        const cur = this.proxySingle;\n        if (!hasValue(cur) || force) {\n          const next = this.pickSingleDefault();\n          this.$emit(\"update:modelValue\", next);\n          this.$emit(\"change\", next);\n        }\n      }\n    },\n\n    // ----- interactions -----\n    onSelectSingle(val) {\n      if (this.isReadonly) return;\n      this.$emit(\"update:modelValue\", val);\n      this.$emit(\"change\", val);\n    },\n    onToggleMulti(opt, checked) {\n      if (this.isReadonly) return;\n      const set = new Set(this.proxyArray);\n      if (checked) set.add(opt);\n      else set.delete(opt);\n      const next = Array.from(set);\n      this.$emit(\"update:modelValue\", next);\n      this.$emit(\"change\", next); //\n    },\n  },\n};\n</script>\n\n<style scoped>\n.frg {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.radio-label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  line-height: 1.2;\n}\n\n/* Make radios & checkboxes look identical (circular dot) */\n.radio-label input[type=\"radio\"],\n.radio-label input[type=\"checkbox\"] {\n  appearance: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n\n  width: 18px;\n  height: 18px;\n  margin: 0;\n\n  border: 2px solid #9ca3af;          /* gray-400 */\n  border-radius: 50%;                  /* always circle */\n  background: #ffffff;\n  position: relative;\n  cursor: pointer;\n  display: inline-block;\n\n  transition: border-color .2s ease, background-color .2s ease, box-shadow .2s ease;\n}\n\n.radio-label input[type=\"radio\"]:hover,\n.radio-label input[type=\"checkbox\"]:hover {\n  border-color: #6b7280;               /* gray-500 */\n}\n\n.radio-label input[type=\"radio\"]:focus,\n.radio-label input[type=\"checkbox\"]:focus {\n  outline: none;\n  box-shadow: 0 0 0 3px rgba(107, 114, 128, 0.25); /* gray focus ring */\n}\n\n/* Checked state: dark circle with white inner dot */\n.radio-label input[type=\"radio\"]:checked,\n.radio-label input[type=\"checkbox\"]:checked {\n  background-color: #111827;           /* gray-900 */\n  border-color: #111827;\n}\n.radio-label input[type=\"radio\"]:checked::after,\n.radio-label input[type=\"checkbox\"]:checked::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 8px;\n  height: 8px;\n  margin-top: -4px;\n  margin-left: -4px;\n  background: #ffffff;\n  border-radius: 50%;\n}\n\n/* Disabled / readonly visual */\n.radio-label input[type=\"radio\"]:disabled,\n.radio-label input[type=\"checkbox\"]:disabled {\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n</style>\n","import { render } from \"./FieldRadioGroup.vue?vue&type=template&id=20a97456&scoped=true\"\nimport script from \"./FieldRadioGroup.vue?vue&type=script&lang=js\"\nexport * from \"./FieldRadioGroup.vue?vue&type=script&lang=js\"\n\nimport \"./FieldRadioGroup.vue?vue&type=style&index=0&id=20a97456&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-20a97456\"]])\n\nexport default __exports__","<template>\n  <div class=\"field-slider\" :class=\"{ readonly }\">\n    <div class=\"slider-header\">\n      <span v-if=\"displayValue !== null\" class=\"slider-value\">\n        {{ displayValueText }}\n      </span>\n    </div>\n\n    <div class=\"slider-track-wrap\" ref=\"wrap\" @click=\"onTrackClick\">\n      <input\n        ref=\"range\"\n        type=\"range\"\n        class=\"slider-range\"\n        :min=\"useMin\"\n        :max=\"useMax\"\n        :step=\"useStep\"\n        :value=\"rangeValue\"\n        :disabled=\"readonly\"\n        @input=\"onInput\"\n        @change=\"onChange\"\n        @mousedown=\"dragging = true\"\n        @mouseup=\"dragging = false\"\n        @touchstart=\"dragging = true\"\n        @touchend=\"dragging = false\"\n      />\n\n      <!-- Step labels (marks) -->\n      <div class=\"marks\" v-if=\"hasMarks\">\n        <div\n          v-for=\"(m, i) in normalizedMarks\"\n          :key=\"i\"\n          class=\"mark\"\n          :style=\"{ left: markPercent(m.value) + '%' }\"\n        >\n          <span class=\"mark-tick\"></span>\n          <span class=\"mark-label\">{{ m.label }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"slider-footer\">\n      <span class=\"min-label\">{{ useMin }}</span>\n      <span class=\"max-label\">{{ useMax }}</span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FieldSlider\",\n  props: {\n    modelValue: { type: [Number, String, null], default: null }, // v-model\n    min: { type: Number, default: 1 },\n    max: { type: Number, default: 5 },\n    step: { type: Number, default: 1 },\n    readonly: { type: Boolean, default: false },\n    percent: { type: Boolean, default: false },\n    marks: { type: Array, default: () => [] } // [{ value: number, label: string }]\n  },\n  emits: [\"update:modelValue\"],\n  data() {\n    return {\n      internalValue: this.toNumberOrNull(this.modelValue),\n      dragging: false\n    };\n  },\n  computed: {\n    useMin() {\n      return this.percent ? 1 : this.min;\n    },\n    useMax() {\n      return this.percent ? 100 : this.max;\n    },\n    useStep() {\n      return this.percent ? 1 : (this.step > 0 ? this.step : 1);\n    },\n    hasMarks() {\n      return this.normalizedMarks.length > 0;\n    },\n    normalizedMarks() {\n      const min = this.useMin, max = this.useMax, step = this.useStep;\n      const seen = new Set();\n      const out = [];\n      (this.marks || []).forEach(m => {\n        let v = Number(m?.value);\n        const label = (m?.label ?? \"\").toString();\n        if (!Number.isFinite(v) || !label) return;\n        // snap to step & clamp\n        v = Math.round((v - min) / step) * step + min;\n        v = Math.max(min, Math.min(max, v));\n        const key = `${v}`;\n        if (!seen.has(key)) {\n          seen.add(key);\n          out.push({ value: v, label });\n        }\n      });\n      out.sort((a, b) => a.value - b.value);\n      return out;\n    },\n    displayValue() {\n      return this.internalValue !== null && Number.isFinite(+this.internalValue)\n        ? Number(this.internalValue)\n        : null;\n    },\n    displayValueText() {\n      if (this.displayValue === null) return \"\";\n      return this.percent ? `${this.displayValue}%` : this.displayValue;\n    },\n    rangeValue() {\n      // the native input needs a number even if we haven't picked yet\n      return this.internalValue === null ? this.useMin : this.internalValue;\n    }\n  },\n  watch: {\n    modelValue(nv) {\n      const n = this.toNumberOrNull(nv);\n      if (n !== this.internalValue) this.internalValue = n;\n    },\n    min() { this.snapWithinBounds(); },\n    max() { this.snapWithinBounds(); },\n    step() { this.snapWithinBounds(); },\n    percent() { this.snapWithinBounds(); },\n    marks() {\n      console.log(\"[FieldSlider] marks updated:\", this.marks);\n    }\n  },\n  mounted() {\n    console.log(\"[FieldSlider] mounted props:\", {\n      percent: this.percent, min: this.min, max: this.max, step: this.step, marks: this.marks\n    });\n  },\n  methods: {\n    toNumberOrNull(v) {\n      const n = Number(v);\n      return Number.isFinite(n) ? n : null;\n    },\n    clampSnap(n) {\n      const min = this.useMin, max = this.useMax, step = this.useStep;\n      if (!Number.isFinite(n)) return null;\n      let v = Math.max(min, Math.min(max, n));\n      v = Math.round((v - min) / step) * step + min;\n      v = Math.max(min, Math.min(max, v));\n      return v;\n    },\n    snapWithinBounds() {\n      // if we haven't chosen a value yet, keep it null; otherwise snap/clamp\n      if (this.internalValue === null) return;\n      const snapped = this.clampSnap(this.internalValue);\n      if (snapped !== this.internalValue) {\n        this.internalValue = snapped;\n        this.$emit(\"update:modelValue\", snapped);\n      }\n    },\n    onInput(e) {\n      const raw = Number(e && e.target ? e.target.value : this.internalValue);\n      const v = this.clampSnap(raw);\n      this.internalValue = v;\n      this.$emit(\"update:modelValue\", v); // continuous update while sliding\n    },\n    onChange(e) {\n      const raw = Number(e && e.target ? e.target.value : this.internalValue);\n      const v = this.clampSnap(raw);\n      this.internalValue = v;\n      this.$emit(\"update:modelValue\", v);\n    },\n    onTrackClick(evt) {\n      if (this.readonly) return;\n      const wrap = this.$refs.wrap;\n      const range = this.$refs.range;\n      if (!wrap || !range) return;\n\n      const rect = wrap.getBoundingClientRect();\n      const x = (evt.clientX ?? (evt.touches && evt.touches[0]?.clientX)) || 0;\n      const rel = (x - rect.left) / rect.width;\n      const min = this.useMin, max = this.useMax;\n      const guess = min + rel * (max - min);\n      const v = this.clampSnap(guess);\n\n      this.internalValue = v;\n      this.$emit(\"update:modelValue\", v);\n\n      // also sync native input UI\n      range.value = v;\n    },\n    markPercent(value) {\n      const min = this.useMin, max = this.useMax;\n      if (max === min) return 0;\n      return ((value - min) / (max - min)) * 100;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.field-slider {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.slider-header {\n  display: flex;\n  justify-content: flex-end;\n  min-height: 18px;\n}\n\n.slider-value {\n  font-size: 12px;\n  color: #111827;\n  background: #eef2ff;\n  border: 1px solid #c7d2fe;\n  padding: 2px 6px;\n  border-radius: 999px;\n}\n\n.slider-track-wrap {\n  position: relative;\n  padding: 12px 0 22px; /* bottom space for labels */\n}\n\n.slider-range {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 100%;\n  height: 4px;\n  background: #e5e7eb;\n  border-radius: 999px;\n  outline: none;\n  cursor: pointer;\n}\n\n/* thumb */\n.slider-range::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: #2563eb;\n  border: 2px solid white;\n  box-shadow: 0 1px 3px rgba(0,0,0,.2);\n  cursor: pointer;\n}\n.slider-range::-moz-range-thumb {\n  width: 16px; height: 16px; border-radius: 50%;\n  background: #2563eb; border: 2px solid white; box-shadow: 0 1px 3px rgba(0,0,0,.2);\n  cursor: pointer;\n}\n\n/* track (Firefox) */\n.slider-range::-moz-range-track {\n  height: 4px;\n  background: #e5e7eb;\n  border: none;\n  border-radius: 999px;\n}\n\n/* marks */\n.marks {\n  position: absolute;\n  left: 0; right: 0;\n  bottom: 0; /* sit closer to the track to avoid \"too low\" issue */\n  height: 18px;\n}\n\n.mark {\n  position: absolute;\n  transform: translateX(-50%);\n  text-align: center;\n  white-space: nowrap;\n}\n\n.mark-tick {\n  display: block;\n  width: 2px;\n  height: 8px;\n  margin: 0 auto 2px;\n  background: #9ca3af;\n  border-radius: 2px;\n}\n\n.mark-label {\n  font-size: 11px;\n  color: #374151;\n  line-height: 1;\n}\n\n.slider-footer {\n  display: flex;\n  justify-content: space-between;\n  color: #6b7280;\n  font-size: 12px;\n}\n\n.readonly .slider-range {\n  cursor: not-allowed;\n  opacity: .7;\n}\n</style>\n","import { render } from \"./FieldSlider.vue?vue&type=template&id=3c3ad86a&scoped=true\"\nimport script from \"./FieldSlider.vue?vue&type=script&lang=js\"\nexport * from \"./FieldSlider.vue?vue&type=script&lang=js\"\n\nimport \"./FieldSlider.vue?vue&type=style&index=0&id=3c3ad86a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3c3ad86a\"]])\n\nexport default __exports__","<template>\n  <div class=\"fls-wrap\" :class=\"{ readonly }\">\n    <div class=\"fls-row\">\n      <span class=\"edge\">{{ leftLabel }}</span>\n\n      <div class=\"fls-scale\" role=\"radiogroup\" :aria-readonly=\"readonly ? 'true' : 'false'\">\n        <button\n          v-for=\"n in points\"\n          :key=\"n\"\n          class=\"fls-point\"\n          :class=\"{ active: modelValue === n }\"\n          type=\"button\"\n          :tabindex=\"readonly ? -1 : 0\"\n          :aria-checked=\"modelValue === n ? 'true' : 'false'\"\n          role=\"radio\"\n          @click=\"onPick(n)\"\n          @keydown=\"onKey($event, n)\"\n        >\n          {{ n }}\n        </button>\n      </div>\n\n      <span class=\"edge\">{{ rightLabel }}</span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FieldLinearScale\",\n  emits: [\"update:modelValue\"],\n  props: {\n    modelValue: { type: [Number, null], default: null }, // no default selection\n    min: { type: Number, default: 1 },\n    max: { type: Number, default: 5 },\n    leftLabel: { type: String, default: \"\" },\n    rightLabel: { type: String, default: \"\" },\n    readonly: { type: Boolean, default: false }\n  },\n  computed: {\n    safeMin() {\n      const m = Number.isFinite(this.min) ? this.min : 1;\n      return Math.max(1, Math.round(m));\n    },\n    safeMax() {\n      const M = Number.isFinite(this.max) ? this.max : 5;\n      // cap to prevent clutter (2..10)\n      const capped = Math.min(10, Math.round(M));\n      return Math.max(this.safeMin + 1, capped);\n    },\n    points() {\n      const arr = [];\n      for (let n = this.safeMin; n <= this.safeMax; n++) arr.push(n);\n      return arr;\n    }\n  },\n  methods: {\n    onPick(n) {\n      if (this.readonly) return;\n      this.$emit(\"update:modelValue\", n);\n    },\n    onKey(e, n) {\n      if (this.readonly) return;\n      if (e.key === \" \" || e.key === \"Enter\") {\n        e.preventDefault();\n        this.onPick(n);\n        return;\n      }\n      let delta = 0;\n      if (e.key === \"ArrowLeft\" || e.key === \"ArrowDown\") delta = -1;\n      else if (e.key === \"ArrowRight\" || e.key === \"ArrowUp\") delta = 1;\n      if (delta !== 0) {\n        e.preventDefault();\n        const cur = Number.isFinite(this.modelValue) ? this.modelValue : this.safeMin;\n        const next = Math.min(this.safeMax, Math.max(this.safeMin, cur + delta));\n        this.$emit(\"update:modelValue\", next);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.fls-wrap { width: 100%; }\n.fls-row { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 12px; }\n.edge { font-size: 12px; color: #6b7280; text-align: center; }\n\n.fls-scale {\n  display: grid;\n  grid-auto-flow: column;\n  gap: 8px;\n  align-items: center;\n}\n.fls-point {\n  min-width: 36px;\n  height: 36px;\n  border-radius: 999px;\n  border: 1px solid #d1d5db;\n  background: #fff;\n  color: #374151;\n  cursor: pointer;\n  font-size: 14px;\n  transition: box-shadow .12s ease, border-color .12s ease, background .12s ease;\n}\n.fls-point:hover { border-color: #9ca3af; }\n.fls-point.active {\n  border-color: #2563eb;\n  background: #2563eb;\n  color: #fff;\n}\n.fls-wrap.readonly .fls-point { cursor: default; opacity: .75; }\n.fls-point:focus-visible { box-shadow: 0 0 0 4px rgba(37,99,235,.25); outline: none; }\n</style>\n","import { render } from \"./FieldLinearScale.vue?vue&type=template&id=229938b0&scoped=true\"\nimport script from \"./FieldLinearScale.vue?vue&type=script&lang=js\"\nexport * from \"./FieldLinearScale.vue?vue&type=script&lang=js\"\n\nimport \"./FieldLinearScale.vue?vue&type=style&index=0&id=229938b0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-229938b0\"]])\n\nexport default __exports__","<template>\n  <div class=\"field-file-upload\" :class=\"{ readonly, invalid: !!error }\">\n    <!-- LOCAL UPLOAD MODE -->\n    <div v-if=\"storagePreference==='local'\" class=\"uploader\">\n      <input\n        ref=\"fileInput\"\n        type=\"file\"\n        :accept=\"acceptAttr\"\n        class=\"hidden-file-input\"\n        :disabled=\"readonly\"\n        :multiple=\"isMultiple\"\n        @change=\"onFilePicked\"\n      />\n      <button\n        class=\"attach-btn\"\n        type=\"button\"\n        :disabled=\"readonly\"\n        @click=\"triggerPick\"\n        title=\"Choose file(s)\"\n      >\n        <i :class=\"icons.paperclip\" />\n        {{ attachLabel }}\n      </button>\n\n      <!-- SINGLE FILE META -->\n      <div v-if=\"!isMultiple && singleLocal\" class=\"meta\">\n        <div class=\"file-row\">\n          <span class=\"name\" :title=\"singleLocal.name\">{{ singleLocal.name }}</span>\n          <span class=\"meta-dot\"></span>\n          <span class=\"size\">{{ humanSize(singleLocal.size) }}</span>\n          <span class=\"meta-dot\" v-if=\"singleLocal.type\"></span>\n          <span class=\"mime\" v-if=\"singleLocal.type\">{{ singleLocal.type }}</span>\n          <button class=\"icon-inline danger\" type=\"button\" @click=\"clearValue\" title=\"Remove\">\n            <i :class=\"icons.trash\" />\n          </button>\n        </div>\n        <small class=\"note\" v-if=\"isBuilderStage\">\n          Files are <b>not persisted</b> during study creation. This control captures metadata only.\n        </small>\n      </div>\n\n      <!-- MULTIPLE FILES META -->\n      <div v-else-if=\"isMultiple && localItems.length\" class=\"meta\">\n        <div\n          class=\"file-row\"\n          v-for=\"(it, i) in localItems\"\n          :key=\"`${it.name}-${it.size}-${it.lastModified}-${i}`\"\n        >\n          <span class=\"name\" :title=\"it.name\">{{ it.name }}</span>\n          <span class=\"meta-dot\"></span>\n          <span class=\"size\">{{ humanSize(it.size) }}</span>\n          <span class=\"meta-dot\" v-if=\"it.type\"></span>\n          <span class=\"mime\" v-if=\"it.type\">{{ it.type }}</span>\n          <button class=\"icon-inline danger\" type=\"button\" @click=\"removeLocalAt(i)\" title=\"Remove\">\n            <i :class=\"icons.trash\" />\n          </button>\n        </div>\n        <small class=\"note\" v-if=\"isBuilderStage\">\n          Files are <b>not persisted</b> during study creation. This control captures metadata only.\n        </small>\n      </div>\n    </div>\n\n    <!-- URL MODE -->\n    <div v-else-if=\"storagePreference==='url'\" class=\"url-box\">\n      <!-- MULTIPLE URLS -->\n      <div v-if=\"isMultiple\">\n        <div class=\"url-add-row\">\n          <input\n            type=\"url\"\n            :placeholder=\"urlPlaceholder\"\n            v-model=\"localUrl\"\n            :readonly=\"readonly\"\n            @keydown.enter.prevent=\"addUrl\"\n          />\n          <button class=\"btn-option add-url-btn\" type=\"button\" :disabled=\"readonly\" @click=\"addUrl\">\n            Add\n          </button>\n        </div>\n        <div v-if=\"urlItems.length\" class=\"meta\">\n          <div class=\"file-row\" v-for=\"(it, i) in urlItems\" :key=\"`${it.url}-${i}`\">\n            <span class=\"name\" :title=\"it.url\">{{ truncate(it.url, 60) }}</span>\n            <button class=\"icon-inline danger\" type=\"button\" @click=\"removeUrlAt(i)\" title=\"Remove\">\n              <i :class=\"icons.trash\" />\n            </button>\n          </div>\n        </div>\n        <small class=\"note\">\n          Use stable, accessible URLs (institutional storage, or DOI).\n        </small>\n      </div>\n\n      <!-- SINGLE URL -->\n      <div v-else class=\"url-row\">\n        <input\n          type=\"url\"\n          :placeholder=\"urlPlaceholder\"\n          :value=\"displayedUrl\"\n          @input=\"onUrlInput\"\n          @blur=\"onUrlBlur\"\n          :readonly=\"readonly\"\n        />\n        <small class=\"note\">\n          Use a stable, accessible URL (institutional storage, or DOI).\n        </small>\n      </div>\n    </div>\n\n    <!-- Help only (constraints removed to avoid duplication with ? dialog) -->\n    <div class=\"rules\">\n      <small v-if=\"helpText\" class=\"help\">{{ helpText }}</small>\n    </div>\n\n    <!-- Error -->\n    <div v-if=\"error\" class=\"error\">{{ error }}</div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport icons from \"@/assets/styles/icons\";\n\nconst KB = 1024;\nconst MB = 1024 * KB;\nconst DEFAULT_ALLOWED = [];       //  no default restriction\nconst DEFAULT_MAX_MB = null;      //  no default size limit\n\nexport default {\n  name: \"FieldFileUpload\",\n  props: {\n    // value can be: null | metaObject | metaObject[]   (when allowMultipleFiles)\n    value: { type: [Object, Array, null], default: null },\n    constraints: { type: Object, default: () => ({}) },\n    readonly: { type: Boolean, default: false },\n    required: { type: Boolean, default: false },\n    stage: { type: String, default: \"builder\" } // 'builder' | 'runtime'\n  },\n  data() {\n    return {\n      icons,\n      localUrl: \"\",\n      error: \"\"\n    };\n  },\n  computed: {\n    isBuilderStage() { return (this.stage || \"builder\") === \"builder\"; },\n    helpText() { return this.constraints?.helpText || \"\"; },\n\n    storagePreference() {\n      const v = (this.constraints?.storagePreference || \"local\").toLowerCase();\n      return (v === \"url\") ? \"url\" : \"local\";\n    },\n\n    // Default to allowing multiple when not explicitly disabled\n    isMultiple() {\n      const flag = this.constraints?.allowMultipleFiles;\n      return flag === undefined ? true : !!flag;\n    },\n\n    maxSizeMB() {\n      const n = Number(this.constraints?.maxSizeMB);\n      return Number.isFinite(n) && n > 0 ? n : null;\n    },\n    effectiveMaxSizeMB() { return this.maxSizeMB ?? DEFAULT_MAX_MB; },\n\n    allowedFormats() {\n      const arr = Array.isArray(this.constraints?.allowedFormats)\n        ? this.constraints.allowedFormats\n        : [];\n      return arr.map(String).map(s => s.trim()).filter(Boolean);\n    },\n    effectiveAllowedFormats() {\n      return this.allowedFormats.length ? this.allowedFormats : DEFAULT_ALLOWED;\n    },\n    acceptAttr() { return this.effectiveAllowedFormats.join(\",\"); },\n\n    // Button label\n    attachLabel() {\n      if (this.storagePreference === 'local') {\n        if (this.isMultiple) return \"Attach files\";\n        return this.value ? \"Change file\" : \"Attach file\";\n      }\n      return this.isMultiple ? \"Add links\" : \"Add link\";\n    },\n\n    // Local (single)\n    singleLocal() {\n      const v = this.value;\n      return (v && !Array.isArray(v) && v.source === \"local\") ? v : null;\n    },\n\n    // Local (multiple)\n    localItems() {\n      if (!this.isMultiple) return [];\n      const v = this.value;\n      const arr = Array.isArray(v) ? v : [];\n      return arr.filter(it => it && it.source === \"local\");\n    },\n\n    // URL (multiple)\n    urlItems() {\n      if (this.storagePreference !== 'url') return [];\n      if (!this.isMultiple) return [];\n      const v = this.value;\n      const arr = Array.isArray(v) ? v : [];\n      return arr.filter(it => it && it.source === \"url\");\n    },\n\n    urlPlaceholder() { return \"https://example.org/path/to/large/file\"; },\n    displayedUrl() {\n      if (this.value && !Array.isArray(this.value) && this.value.source === \"url\") return this.value.url || \"\";\n      return this.localUrl;\n    }\n  },\n  mounted() {\n    if (this.value && !Array.isArray(this.value) && this.value.source === \"url\") {\n      this.localUrl = this.value.url || \"\";\n    }\n  },\n  methods: {\n    triggerPick() {\n      if (this.readonly) return;\n      this.$refs.fileInput && this.$refs.fileInput.click();\n    },\n\n    onFilePicked(e) {\n      this.error = \"\";\n      const fileList = Array.from(e?.target?.files || []);\n      if (!fileList.length) return;\n\n      // Validate + map\n      const accepted = [];\n      for (const file of fileList) {\n        if (this.effectiveMaxSizeMB && file.size > this.effectiveMaxSizeMB * MB) {\n          this.error = `File exceeds max size (${this.effectiveMaxSizeMB} MB).`;\n          continue;\n        }\n        if (this.effectiveAllowedFormats.length && !this.matchesAccept(file, this.effectiveAllowedFormats)) {\n          this.error = `Invalid type. Allowed: ${this.effectiveAllowedFormats.join(\", \")}.`;\n          continue;\n        }\n        accepted.push(file);\n      }\n\n      if (!accepted.length) {\n        e.target.value = \"\";\n        return;\n      }\n\n      if (this.isMultiple) {\n        const newMetas = accepted.map(f => ({\n          source: \"local\",\n          name: f.name,\n          size: f.size,\n          type: f.type || \"\",\n          lastModified: f.lastModified || null\n        }));\n\n        const current = Array.isArray(this.value) ? this.value.slice() : [];\n        // Deduplicate by (name,size,lastModified)\n        const key = (m) => `${m.name}|${m.size}|${m.lastModified ?? \"\"}`;\n        const existingKeys = new Set(current.map(key));\n        for (const m of newMetas) {\n          if (!existingKeys.has(key(m))) {\n            existingKeys.add(key(m));\n            current.push(m);\n          }\n        }\n\n        this.$emit(\"input\", current);\n        this.$emit(\"file-selected\", accepted); // emit array of Files\n      } else {\n        const file = accepted[0];\n        const meta = {\n          source: \"local\",\n          name: file.name,\n          size: file.size,\n          type: file.type || \"\",\n          lastModified: file.lastModified || null\n        };\n        this.$emit(\"input\", meta);\n        this.$emit(\"file-selected\", file);\n      }\n\n      e.target.value = \"\";\n    },\n\n    onUrlInput(evt) {\n      this.localUrl = evt.target.value;\n    },\n\n    onUrlBlur() {\n      if (this.isMultiple) return; // handled by addUrl()\n      const url = String(this.localUrl || \"\").trim();\n      if (!url) { this.$emit(\"input\", null); return; }\n      let parsed;\n      try { parsed = new URL(url); } catch { this.error = \"Invalid URL.\"; return; }\n      if (!/^https?:$/.test(parsed.protocol)) { this.error = \"Only http(s) URLs are supported.\"; return; }\n      this.error = \"\";\n      this.$emit(\"input\", { source: \"url\", url });\n    },\n\n    addUrl() {\n      if (!this.isMultiple) return;\n      const url = String(this.localUrl || \"\").trim();\n      if (!url) return;\n      let parsed;\n      try { parsed = new URL(url); } catch { this.error = \"Invalid URL.\"; return; }\n      if (!/^https?:$/.test(parsed.protocol)) { this.error = \"Only http(s) URLs are supported.\"; return; }\n      this.error = \"\";\n\n      const current = Array.isArray(this.value) ? this.value.slice() : [];\n      if (!current.some(it => it && it.source === \"url\" && it.url === url)) {\n        current.push({ source: \"url\", url });\n        this.$emit(\"input\", current);\n      }\n      this.localUrl = \"\";\n    },\n\n    removeLocalAt(idx) {\n      if (!this.isMultiple) return;\n      const current = Array.isArray(this.value) ? this.value.slice() : [];\n      const localIdxs = current\n        .map((it, i) => ({ it, i }))\n        .filter(x => x.it && x.it.source === \"local\")\n        .map(x => x.i);\n      const toRemove = localIdxs[idx];\n      if (toRemove !== undefined) {\n        current.splice(toRemove, 1);\n        this.$emit(\"input\", current);\n      }\n    },\n\n    removeUrlAt(idx) {\n      if (!this.isMultiple) return;\n      const current = Array.isArray(this.value) ? this.value.slice() : [];\n      const urlIdxs = current\n        .map((it, i) => ({ it, i }))\n        .filter(x => x.it && x.it.source === \"url\")\n        .map(x => x.i);\n      const toRemove = urlIdxs[idx];\n      if (toRemove !== undefined) {\n        current.splice(toRemove, 1);\n        this.$emit(\"input\", current);\n      }\n    },\n\n    clearValue() {\n      this.error = \"\";\n      this.localUrl = \"\";\n      this.$emit(\"input\", this.isMultiple ? [] : null);\n    },\n\n    humanSize(bytes) {\n      if (!Number.isFinite(bytes)) return \"\";\n      if (bytes >= 1024 * 1024) return `${(bytes / (1024 * 1024)).toFixed(2)} MB`;\n      if (bytes >= 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n      return `${bytes} B`;\n    },\n    truncate(s, n) {\n      const str = String(s || \"\");\n      return str.length > n ? str.slice(0, n - 1) + \"\" : str;\n    },\n    matchesAccept(file, accepts) {\n      const name = file.name?.toLowerCase() || \"\";\n      const mime = (file.type || \"\").toLowerCase();\n      const checks = accepts.map(a => a.trim().toLowerCase()).filter(Boolean);\n      if (!checks.length) return true;\n      return checks.some(a => {\n        if (a.endsWith(\"/*\")) {\n          const base = a.slice(0, -2);\n          return mime.startsWith(base + \"/\");\n        }\n        if (a.startsWith(\".\")) {\n          return name.endsWith(a);\n        }\n        if (a.includes(\"/\")) {\n          return mime === a;\n        }\n        return name.endsWith(\".\" + a.replace(/^\\./, \"\"));\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.field-file-upload,\n.field-file-upload .url-box,\n.field-file-upload .url-row {\n  width: 100%;\n  max-width: 100%;\n  min-width: 0;\n}\n.field-file-upload .url-row input,\n.field-file-upload .url-add-row input {\n  width: 100%;\n  max-width: 100%;\n  min-width: 0;\n  box-sizing: border-box;\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.field-file-upload { overflow: hidden; }\n.uploader { display:flex; flex-direction:column; gap:8px }\n.hidden-file-input { display:none }\n.attach-btn { display:inline-flex; align-items:center; gap:8px; border:1px solid #d1d5db; background:white; padding:10px 14px; border-radius:8px; cursor:pointer; }\n.url-box { display:flex; flex-direction:column; gap:6px }\n.url-row { width:100%; }\n.url-add-row { display:grid; grid-template-columns:1fr auto; gap:8px; align-items:center; }\n.add-url-btn { padding:10px 14px; border-radius:8px; border:1px solid #d1d5db; background:#f9fafb; cursor:pointer; }\n.icon-inline { border:none; background:transparent; padding:6px; border-radius:8px; cursor:pointer; }\n.icon-inline.danger i { color:#b91c1c }\n.meta { display:flex; flex-direction:column; gap:4px }\n.file-row { display:flex; align-items:center; gap:8px; flex-wrap:wrap }\n.name { font-weight:600 }\n.size,.mime { color:#6b7280 }\n.meta-dot { color:#9ca3af }\n.rules { display:flex; flex-direction:column; gap:2px }\n.help { color:#6b7280 }\n.error { color:#dc2626; font-size:12px }\n.readonly .attach-btn { opacity:.6; cursor:not-allowed }\n.invalid input { border-color:#dc2626 }\n.btn-option { background:#e5e7eb; color:#111827; border:none; }\n</style>\n","import { render } from \"./FieldFileUpload.vue?vue&type=template&id=27286dd7&scoped=true\"\nimport script from \"./FieldFileUpload.vue?vue&type=script&lang=js\"\nexport * from \"./FieldFileUpload.vue?vue&type=script&lang=js\"\n\nimport \"./FieldFileUpload.vue?vue&type=style&index=0&id=27286dd7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-27286dd7\"]])\n\nexport default __exports__","import { render } from \"./ScratchFormComponent.vue?vue&type=template&id=157437d1&scoped=true\"\nimport script from \"./ScratchFormComponent.vue?vue&type=script&lang=js\"\nexport * from \"./ScratchFormComponent.vue?vue&type=script&lang=js\"\n\nimport \"./ScratchFormComponent.vue?vue&type=style&index=0&id=157437d1&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-157437d1\"]])\n\nexport default __exports__","<template>\n  <div class=\"study-data-container\" v-if=\"study\">\n    <!-- Back Buttons (hidden for shared links) -->\n    <div class=\"back-buttons-container\" v-if=\"!isShared\">\n      <button v-if=\"showSelection\" @click=\"goToDashboard\" class=\"btn-back\">\n        <i :class=\"icons.back\"></i> Back to Dashboard\n      </button>\n      <button v-if=\"!showSelection\" @click=\"backToSelection\" class=\"btn-back\">\n        <i :class=\"icons.back\"></i> Back to Selection\n      </button>\n    </div>\n\n    <!-- Header -->\n    <div class=\"study-header-container\">\n      <div class=\"study-header\">\n        <h1 class=\"study-name\">{{ study.metadata.study_name }}</h1>\n        <p class=\"study-description\">{{ study.metadata.study_description }}</p>\n        <p class=\"study-meta\">\n          Subjects: {{ numberOfSubjects }} | Visits: {{ visitList.length }} | Groups: {{ groupList.length }}\n        </p>\n        <p v-if=\"isShared\" class=\"shared-banner\">\n          Shared link (permission: <strong>{{ sharedPermission }}</strong>)\n        </p>\n      </div>\n\n      <div class=\"details-panel\">\n        <div class=\"details-controls\">\n          <button @click=\"toggleDetails\" class=\"details-toggle-btn\">\n            <i :class=\"showDetails ? icons.toggleUp : icons.toggleDown\"></i>\n            {{ showDetails ? 'Hide Details' : 'Show Details' }}\n          </button>\n\n          <!-- Share icon hidden for shared mode -->\n          <button\n            v-if=\"!showSelection && !isShared\"\n            class=\"share-icon\"\n            title=\"Share this form link\"\n            @click=\"openShareDialog(currentSubjectIndex, currentVisitIndex, currentGroupIndex)\"\n          >\n            <i :class=\"icons.share\"></i>\n          </button>\n        </div>\n\n        <div v-if=\"showDetails\" class=\"details-content\">\n          <div class=\"details-block\">\n            <strong>Study Info:</strong>\n            <ul>\n              <li v-for=\"[key, val] in studyInfoEntries\" :key=\"key\">\n                {{ key }}: {{ val }}\n              </li>\n            </ul>\n          </div>\n          <div v-if=\"!showSelection\" class=\"details-block\">\n            <strong>Visit Info:</strong>\n            <ul>\n              <li v-for=\"[key, val] in Object.entries(visitList[currentVisitIndex] || {})\" :key=\"key\">\n                {{ key }}: {{ val }}\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <hr />\n    </div>\n\n    <!-- Selection (hidden in shared mode; shared preselects) -->\n    <div v-if=\"showSelection && !isShared\">\n      <!-- Initializing message (prevents flashing ALL visits first) -->\n      <div v-if=\"!matrixReady\" class=\"boot-message\">\n        Preparing visit matrix\n      </div>\n\n      <template v-else>\n        <!-- Matrix toolbar: visit filter + helper (left)  info button (far right) -->\n        <div class=\"matrix-toolbar\">\n          <div class=\"matrix-toolbar-left\">\n            <div class=\"visit-filter\">\n              <label>Visit filter</label>\n              <select v-model.number=\"selectedVisitIndex\" class=\"visit-select\">\n                <option :value=\"-1\">All visits</option>\n                <option v-for=\"(v, i) in visitList\" :key=\"'vopt-'+i\" :value=\"i\">\n                  {{ v.name }}\n                </option>\n              </select>\n            </div>\n\n            <!-- Helper message: to which version we add data -->\n            <div v-if=\"selectedVersion\" class=\"version-helper\" :title=\"'All new data will be saved on the latest template version'\">\n              Saving to Version {{ selectedVersion }}\n            </div>\n          </div>\n\n          <!-- Info icon MUST be extreme right -->\n          <button type=\"button\" class=\"legend-icon-btn\" @click=\"openStatusLegend\" :title=\"'Legend / Color meaning'\">\n            <i :class=\"icons.info\"></i>\n          </button>\n        </div>\n\n        <div class=\"matrix-wrap\">\n          <!-- Loading overlay while (re)hydrating visits -->\n          <div v-if=\"visitLoading\" class=\"busy-overlay\"><div class=\"spinner\"></div></div>\n\n          <table class=\"selection-matrix\" :class=\"{ fluid: isFluidMatrix }\">\n            <thead>\n              <tr>\n                <th class=\"subject-col\" :style=\"subjectColStyle\">Subject / Visit</th>\n                <th\n                  v-for=\"vIdx in displayedVisitIndices\"\n                  :key=\"'visit-th-' + vIdx\"\n                  class=\"visit-col\"\n                  :style=\"visitColStyle\"\n                >\n                  {{ visitList[vIdx].name }}\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"(subject, sIdx) in sd.subjects\" :key=\"'sv-row-'+sIdx\">\n                <td class=\"subject-cell\" :style=\"subjectColStyle\">{{ subject.id }}</td>\n                <td\n                  v-for=\"vIdx in displayedVisitIndices\"\n                  :key=\"'visit-td-' + sIdx + '-' + vIdx\"\n                  class=\"visit-cell\"\n                  :style=\"visitColStyle\"\n                >\n                  <button\n                    class=\"select-btn\"\n                    :class=\"statusClassFast(sIdx, vIdx)\"\n                    @click=\"selectCell(sIdx, vIdx)\"\n                  >\n                    Select\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </template>\n    </div>\n\n    <!-- Entry Form -->\n    <div v-else class=\"entry-form-wrapper\">\n      <div class=\"bread-crumb\">\n        <div class=\"crumb-left\">\n          <strong>Study:</strong> {{ study.metadata.study_name }}\n          <strong>Subject:</strong> {{ sd.subjects?.[currentSubjectIndex]?.id }}\n          <strong>Visit:</strong> {{ visitList[currentVisitIndex].name }}\n          <span v-if=\"!isShared && selectedVersion\" class=\"version-helper\">Saving to Version {{ selectedVersion }}</span>\n        </div>\n        <button type=\"button\" class=\"legend-btn\" @click=\"openLegendDialog\" :title=\"'Legend / What does * mean?'\">\n          <i :class=\"icons.help || 'fas fa-question-circle'\"></i>\n        </button>\n      </div>\n\n      <div class=\"entry-form-section\">\n        <h2>\n          Enter Data for Subject: {{ sd.subjects?.[currentSubjectIndex]?.id }},\n          Visit: {{ visitList[currentVisitIndex].name }}\n        </h2>\n\n        <!-- Only assigned sections are shown -->\n        <div v-if=\"assignedModelIndices.length\">\n          <div\n            v-for=\"mIdx in assignedModelIndices\"\n            :key=\"'sec-'+mIdx\"\n            class=\"section-block\"\n          >\n            <h3>{{ selectedModels[mIdx].title }}</h3>\n\n            <div\n              v-for=\"(field, fIdx) in selectedModels[mIdx].fields\"\n              :key=\"'f-'+mIdx+'-'+fIdx\"\n              class=\"form-field\"\n            >\n              <label :for=\"fieldId(mIdx, fIdx)\" class=\"field-label\">\n                <span>{{ field.label || field.name || field.title }}</span>\n                <span v-if=\"field.constraints?.required\" class=\"required\">*</span>\n                <em v-if=\"field.constraints?.helpText\" class=\"help-inline\">\n                  {{ field.constraints.helpText }}\n                </em>\n                <i\n                  v-if=\"hasConstraints(field)\"\n                  class=\"fas fa-question-circle helper-icon\"\n                  @click=\"openConstraintDialog(field)\"\n                ></i>\n              </label>\n\n              <!-- TEXT -->\n              <input\n                v-if=\"field.type === 'text'\"\n                :id=\"fieldId(mIdx, fIdx)\"\n                type=\"text\"\n                v-model=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                :placeholder=\"field.placeholder\"\n                :required=\"!!field.constraints?.required\"\n                :readonly=\"!!field.constraints?.readonly || !canEdit\"\n                :minlength=\"field.constraints?.minLength\"\n                :maxlength=\"field.constraints?.maxLength\"\n                :pattern=\"field.constraints?.pattern\"\n                @blur=\"onFieldBlur(mIdx, fIdx)\"\n                @input=\"clearError(mIdx, fIdx)\"\n              />\n\n              <!-- TEXTAREA -->\n              <textarea\n                v-else-if=\"field.type === 'textarea'\"\n                :id=\"fieldId(mIdx, fIdx)\"\n                v-model=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                :placeholder=\"field.placeholder\"\n                :required=\"!!field.constraints?.required\"\n                :readonly=\"!!field.constraints?.readonly || !canEdit\"\n                :minlength=\"field.constraints?.minLength\"\n                :maxlength=\"field.constraints?.maxLength\"\n                :pattern=\"field.constraints?.pattern\"\n                rows=\"4\"\n                @blur=\"onFieldBlur(mIdx, fIdx)\"\n                @input=\"clearError(mIdx, fIdx)\"\n              ></textarea>\n\n              <!-- NUMBER -->\n              <input\n                v-else-if=\"field.type === 'number'\"\n                :id=\"fieldId(mIdx, fIdx)\"\n                type=\"number\"\n                v-model.number=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                :placeholder=\"field.placeholder\"\n                :required=\"!!field.constraints?.required\"\n                :readonly=\"!!field.constraints?.readonly || !canEdit\"\n                :min=\"field.constraints?.min\"\n                :max=\"field.constraints?.max\"\n                :step=\"field.constraints?.step\"\n                @blur=\"validateField(mIdx, fIdx)\"\n                @input=\"clearError(mIdx, fIdx)\"\n              />\n\n              <!-- CHECKBOX -->\n              <FieldCheckbox\n                v-else-if=\"field.type === 'checkbox'\"\n                :id=\"fieldId(mIdx, fIdx)\"\n                v-model=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                v-bind=\"selectedModels[mIdx].fields[fIdx].constraints\"\n                :disabled=\"!canEdit\"\n                @change=\"validateField(mIdx, fIdx)\"\n              />\n\n              <!-- RADIO -->\n              <FieldRadioGroup\n                v-else-if=\"field.type === 'radio'\"\n                :id=\"fieldId(mIdx, fIdx)\"\n                :name=\"fieldId(mIdx, fIdx)\"\n                :options=\"field.options || []\"\n                v-model=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                :default-value=\"field.constraints?.defaultValue\"\n                v-bind=\"selectedModels[mIdx].fields[fIdx].constraints\"\n                :disabled=\"!canEdit\"\n                @change=\"validateField(mIdx, fIdx)\"\n                @update:modelValue=\"() => { clearError(mIdx, fIdx); validateField(mIdx, fIdx); }\"\n              />\n\n              <!-- DATE -->\n              <DateFormatPicker\n                v-else-if=\"field.type === 'date'\"\n                :id=\"fieldId(mIdx, fIdx)\"\n                v-model=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                :format=\"field.constraints?.dateFormat || 'dd.MM.yyyy'\"\n                :placeholder=\"field.placeholder || (field.constraints?.dateFormat || 'dd.MM.yyyy')\"\n                :min-date=\"field.constraints?.minDate || null\"\n                :max-date=\"field.constraints?.maxDate || null\"\n                :readonly=\"!!field.constraints?.readonly || !canEdit\"\n                @change=\"validateField(mIdx, fIdx)\"\n                @blur=\"validateField(mIdx, fIdx)\"\n              />\n\n              <!-- TIME -->\n              <FieldTime\n                v-else-if=\"field.type === 'time'\"\n                :id=\"fieldId(mIdx, fIdx)\"\n                v-model=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                :placeholder=\"field.placeholder || (field.constraints?.timeFormat || 'HH:mm')\"\n                v-bind=\"selectedModels[mIdx].fields[fIdx].constraints\"\n                :readonly=\"!!field.constraints?.readonly || !canEdit\"\n                @change=\"validateField(mIdx, fIdx)\"\n                @blur=\"validateField(mIdx, fIdx)\"\n              />\n\n              <!-- SELECT -->\n              <FieldSelect\n                v-else-if=\"field.type === 'select'\"\n                :id=\"fieldId(mIdx, fIdx)\"\n                v-model=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                :options=\"field.options || []\"\n                :multiple=\"!!field.constraints?.allowMultiple\"\n                :readonly=\"!!field.constraints?.readonly || !canEdit\"\n                :default-value=\"field.constraints?.defaultValue\"\n                :placeholder=\"'Select'\"\n                @update:modelValue=\"() => validateField(mIdx, fIdx)\"\n              />\n\n              <!-- SLIDER (mode=slider) -->\n              <FieldSlider\n                v-else-if=\"field.type === 'slider' && (field.constraints?.mode || 'slider') === 'slider'\"\n                :id=\"fieldId(mIdx, fIdx)\"\n                v-model=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                v-bind=\"getSliderProps(field)\"\n                :disabled=\"!canEdit\"\n                @update:modelValue=\"() => { clearError(mIdx, fIdx); validateField(mIdx, fIdx); }\"\n                @change=\"validateField(mIdx, fIdx)\"\n              />\n\n              <!-- LINEAR SCALE -->\n              <FieldLinearScale\n                v-else-if=\"field.type === 'slider' && field.constraints?.mode === 'linear'\"\n                :id=\"fieldId(mIdx, fIdx)\"\n                v-model=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                v-bind=\"getLinearProps(field)\"\n                :disabled=\"!canEdit\"\n                @update:modelValue=\"() => { clearError(mIdx, fIdx); validateField(mIdx, fIdx); }\"\n                @change=\"validateField(mIdx, fIdx)\"\n              />\n\n              <!-- FILE -->\n              <FieldFileUpload\n                v-else-if=\"field.type === 'file'\"\n                :id=\"fieldId(mIdx, fIdx)\"\n                :value=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                :constraints=\"field.constraints || {}\"\n                :readonly=\"!!field.constraints?.readonly || !canEdit\"\n                :required=\"!!field.constraints?.required\"\n                stage=\"runtime\"\n                @input=\"(meta) => setEntryValue(mIdx, fIdx, meta)\"\n                @file-selected=\"(file) => onRawFileSelected(mIdx, fIdx, file)\"\n              />\n\n              <!-- FALLBACK -->\n              <input\n                v-else\n                :id=\"fieldId(mIdx, fIdx)\"\n                type=\"text\"\n                v-model=\"entryData[currentSubjectIndex][currentVisitIndex][currentGroupIndex][mIdx][fIdx]\"\n                :placeholder=\"field.placeholder\"\n                :required=\"!!field.constraints?.required\"\n                :readonly=\"!!field.constraints?.readonly || !canEdit\"\n                @blur=\"onFieldBlur(mIdx, fIdx)\"\n                @input=\"clearError(mIdx, fIdx)\"\n              />\n\n              <!-- ERROR -->\n              <div v-if=\"fieldErrors(mIdx, fIdx)\" class=\"error-message\">\n                {{ fieldErrors(mIdx, fIdx) }}\n                <span\n                  v-if=\"isFieldSkipped(mIdx,fIdx)\"\n                  class=\"skip-pill\"\n                  title=\"Required validation skipped for this field\"\n                >Skipped</span>\n              </div>\n              <div v-else-if=\"isFieldSkipped(mIdx,fIdx)\" class=\"error-message\">\n                <span class=\"skip-pill\" title=\"Required validation skipped for this field\">Skipped</span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Actions -->\n          <div class=\"form-actions\">\n            <button\n              @click=\"submitData\"\n              class=\"btn-save\"\n              :disabled=\"blockingErrorsPresent || !canEdit\"\n              :title=\"!canEdit ? 'This shared link is view-only' : (blockingErrorsPresent ? 'Fix validation errors before saving' : 'Save Data')\"\n            >\n              Save Data\n            </button>\n            <button type=\"button\" class=\"btn-clear\" @click=\"clearCurrentSection\" title=\"Clear all inputs\" :disabled=\"!canEdit\">\n              Clear\n            </button>\n          </div>\n        </div>\n\n        <div v-else class=\"no-assigned\">\n          <p>No sections are assigned to this Visit for your group.</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- dialogs (unchanged except share hidden on shared) -->\n    <div v-if=\"showShareDialog && !isShared\" class=\"dialog-overlay\">\n      <div class=\"dialog\">\n        <h3>Generate Share Link</h3>\n        <p>\n          Sharing for Subject\n          {{ shareParams.subjectIndex != null ? sd.subjects?.[shareParams.subjectIndex]?.id : 'N/A' }},\n          Visit {{ visitList[shareParams.visitIndex]?.name }}\n        </p>\n        <label>\n          Permission:\n          <select v-model=\"shareConfig.permission\">\n            <option value=\"view\">View Only</option>\n            <option value=\"add\">Allow Add</option>\n          </select>\n        </label>\n        <label>\n          Max Uses:\n          <input type=\"number\" v-model.number=\"shareConfig.maxUses\" min=\"1\" />\n        </label>\n        <label>\n          Expires in (days):\n          <input type=\"number\" v-model.number=\"shareConfig.expiresInDays\" min=\"1\" />\n        </label>\n        <div class=\"dialog-actions\">\n          <button @click=\"createShareLink\">Generate</button>\n          <button @click=\"showShareDialog = false\">Cancel</button>\n        </div>\n        <p v-if=\"generatedLink\">\n          <a :href=\"generatedLink\" target=\"_blank\">{{ generatedLink }}</a>\n        </p>\n      </div>\n    </div>\n\n    <div v-if=\"permissionError\" class=\"dialog-overlay\">\n      <div class=\"dialog\">\n        <h3>Permission Denied</h3>\n        <p>You do not have permission to create a share link. Please contact your administrator.</p>\n        <div class=\"dialog-actions\">\n          <button @click=\"permissionError = false\">Close</button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"showConstraintDialog\" class=\"mini-overlay\" @click.self=\"closeConstraintDialog\">\n      <div class=\"mini-dialog\" role=\"dialog\" aria-modal=\"true\">\n        <div class=\"mini-head\">\n          <h4 class=\"mini-title\">{{ constraintDialogFieldName }}</h4>\n          <button class=\"mini-close\" @click=\"closeConstraintDialog\" aria-label=\"Close\"></button>\n        </div>\n        <ul class=\"mini-list\">\n          <li v-for=\"(line, idx) in constraintDialogItems\" :key=\"idx\">{{ line }}</li>\n        </ul>\n      </div>\n    </div>\n\n    <div v-if=\"showLegendDialog\" class=\"mini-overlay\" @click.self=\"closeLegendDialog\">\n      <div class=\"mini-dialog\" role=\"dialog\" aria-modal=\"true\">\n        <div class=\"mini-head\">\n          <h4 class=\"mini-title\">Legend</h4>\n          <button class=\"mini-close\" @click=\"closeLegendDialog\" aria-label=\"Close\"></button>\n        </div>\n        <ul class=\"mini-list\">\n          <li><span class=\"legend-swatch swatch-none\"></span> None  no data saved yet.</li>\n          <li><span class=\"legend-swatch swatch-partial\"></span> Partial  some fields filled.</li>\n          <li><span class=\"legend-swatch swatch-complete\"></span> Complete  all assigned fields filled.</li>\n          <li><span class=\"legend-swatch swatch-skipped\"></span> Skipped  one or more required fields were skipped.</li>\n        </ul>\n      </div>\n    </div>\n\n    <div v-if=\"showStatusLegend\" class=\"mini-overlay\" @click.self=\"closeStatusLegend\">\n      <div class=\"mini-dialog\" role=\"dialog\" aria-modal=\"true\">\n        <div class=\"mini-head\">\n          <h4 class=\"mini-title\">Selection Status</h4>\n          <button class=\"mini-close\" @click=\"closeStatusLegend\" aria-label=\"Close\"></button>\n        </div>\n        <ul class=\"mini-list legend-explain\">\n          <li><span class=\"legend-swatch swatch-none\"></span> None  no data saved yet.</li>\n          <li><span class=\"legend-swatch swatch-partial\"></span> Partial  some fields filled.</li>\n          <li><span class=\"legend-swatch swatch-complete\"></span> Complete  all assigned fields filled.</li>\n          <li><span class=\"legend-swatch swatch-skipped\"></span> Skipped  one or more required fields were skipped.</li>\n        </ul>\n      </div>\n    </div>\n\n    <CustomDialog :message=\"dialogMessage\" :isVisible=\"showDialog\" @close=\"closeDialog\" />\n\n    <div v-if=\"showSkipDialog\" class=\"dialog-overlay\">\n      <div class=\"dialog dialog-wide\">\n        <h3>Fix validation before saving</h3>\n        <p>The fields below are required but empty. You can fill them now or choose to <em>Skip for now</em> to save the rest.</p>\n\n        <div class=\"skip-list\">\n          <div class=\"skip-row\" v-for=\"item in skipCandidates\" :key=\"item.key\">\n            <div class=\"skip-left\">\n              <div class=\"skip-title\"><strong>{{ item.sectionTitle }}</strong> / {{ item.fieldLabel }}</div>\n            </div>\n            <div class=\"skip-right\">\n              <label class=\"skip-chk\">\n                <input type=\"checkbox\" v-model=\"skipSelections[item.key]\" />\n                Skip for now\n              </label>\n              <button class=\"btn-jump\" @click=\"jumpToField(item)\">Go to field</button>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"dialog-actions\">\n          <button @click=\"confirmSkipSelection\" class=\"btn-primary\" :disabled=\"!canEdit\">Skip selected & Save</button>\n          <button @click=\"cancelSkipSelection\" class=\"btn-option\">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div v-else class=\"loading\">\n    <p>Loading study details</p>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport axios from \"axios\";\nimport icons from \"@/assets/styles/icons\";\nimport CustomDialog from \"@/components/CustomDialog.vue\";\nimport DateFormatPicker from \"@/components/DateFormatPicker.vue\";\nimport FieldCheckbox from \"@/components/fields/FieldCheckbox.vue\";\nimport FieldRadioGroup from \"@/components/fields/FieldRadioGroup.vue\";\nimport FieldTime from \"@/components/fields/FieldTime.vue\";\nimport FieldSelect from \"@/components/fields/FieldSelect.vue\";\nimport FieldSlider from \"@/components/fields/FieldSlider.vue\";\nimport FieldLinearScale from \"@/components/fields/FieldLinearScale.vue\";\nimport FieldFileUpload from \"@/components/fields/FieldFileUpload.vue\";\n\nimport { createAjv, validateFieldValue } from \"@/utils/jsonschemaValidation\";\n\nexport default {\n  name: \"StudyDataEntryComponent\",\n  components: {\n    CustomDialog,\n    DateFormatPicker,\n    FieldCheckbox,\n    FieldRadioGroup,\n    FieldTime,\n    FieldSelect,\n    FieldSlider,\n    FieldLinearScale,\n    FieldFileUpload,\n  },\n  data() {\n    return {\n      study: null,\n      showSelection: true,\n      showDetails: false,\n\n      // selection\n      currentSubjectIndex: null,\n      currentVisitIndex: null,\n      currentGroupIndex: 0,\n\n      // visit filter UI: -1 => All, else a single visit index\n      selectedVisitIndex: -999,  // sentinel to avoid initial flash; set after data load\n      VISIT_THRESHOLD: 8,        // If visits > this => default to single-visit view\n      FLUID_VISIT_MAX: 6,        // <= this count  auto-stretch, else fixed width + scroll\n\n      // readiness flags\n      matrixReady: false,        // gate the matrix until filter is decided + cache is built\n\n      // performance caches\n      statusMap: new Map(),              // key \"s|v\" => \"none\" | \"partial\" | \"complete\" | \"skipped\"\n      assignedLookup: [],                // [v][g] = [mIdx...]\n      subjectToGroupIdx: [],             // [s] => groupIndex\n\n      entryData: [],          // arrays internally: [section][field]\n      skipFlags: [],          // List[List[bool]]\n      validationErrors: {},\n\n      icons,\n      showShareDialog: false,\n      shareParams: { subjectIndex: null, visitIndex: null, groupIndex: null },\n      shareConfig: { permission: \"view\", maxUses: 1, expiresInDays: 7 },\n      generatedLink: \"\",\n      permissionError: false,\n\n      showDialog: false,\n      dialogMessage: \"\",\n      showSkipDialog: false,\n      skipCandidates: [],\n      skipSelections: {},\n\n      existingEntries: [],\n      entryIds: [],\n      ajv: null,\n\n      showConstraintDialog: false,\n      constraintDialogFieldName: \"\",\n      constraintDialogItems: [],\n\n      showLegendDialog: false,\n\n      pendingFiles: {},\n      showStatusLegend: false,\n\n      // shared link\n      shareToken: null,\n      sharedPermission: \"view\",\n      selectedVersion: null,         // always the latest server version (non-shared); shared: omitted\n      studyVersions: [],             // [{version, created_at}]\n      templateCache: new Map(),\n\n      // NEW: performance helpers\n      entriesIndex: new Map(),    // key: \"s|v|g\" -> [entries sorted desc by form_version]\n      hydrateCache: new Map(),    // key: \"s|v|g|version\" -> { dataArr, skipFlags, id }\n      visitLoading: false,        // show loading while (re)hydrating visits\n    };\n  },\n\n  computed: {\n    sd() {\n      const sd = this.study && this.study.content && this.study.content.study_data;\n      return sd || { study:{}, visits:[], groups:[], subjects:[], selectedModels:[], assignments:[] };\n    },\n    studyInfoEntries() {\n      const obj = (this.sd && this.sd.study) || {};\n      try { return Object.entries(obj); } catch { return []; }\n    },\n    token() { return this.$store.state.token; },\n    isShared() { return !!this.$route.params.token; },\n    canEdit() { return !this.isShared || this.sharedPermission === \"add\"; },\n\n    visitList() { return this.study?.content?.study_data?.visits || []; },\n    groupList() { return this.study?.content?.study_data?.groups || []; },\n    selectedModels() { return this.study?.content?.study_data?.selectedModels || []; },\n    assignments() { return this.study?.content?.study_data?.assignments || []; },\n\n    numberOfSubjects() {\n      const sd = this.study?.content?.study_data;\n      return sd?.subjectCount != null ? sd.subjectCount : sd?.subjects?.length || 0;\n    },\n\n    displayedVisitIndices() {\n      if (!Array.isArray(this.visitList) || this.visitList.length === 0) return [];\n      if (this.selectedVisitIndex === -1) {\n        return this.visitList.map((_, i) => i);\n      }\n      const idx = Math.min(Math.max(this.selectedVisitIndex, 0), this.visitList.length - 1);\n      return [idx];\n    },\n\n    isFluidMatrix() {\n      return this.displayedVisitIndices.length <= this.FLUID_VISIT_MAX;\n    },\n    subjectColStyle() {\n      if (!this.isFluidMatrix) return {};\n      const pct = 28;\n      return { width: pct + \"%\", maxWidth: \"none\", minWidth: \"0\" };\n    },\n    visitColStyle() {\n      if (!this.isFluidMatrix) return {};\n      const n = Math.max(this.displayedVisitIndices.length, 1);\n      const pct = (72 / n).toFixed(4);\n      return { width: pct + \"%\", maxWidth: \"none\", minWidth: \"0\" };\n    },\n\n    assignedModelIndices() {\n      const v = Number.isInteger(this.currentVisitIndex) ? this.currentVisitIndex : 0;\n      const g = Number.isInteger(this.currentGroupIndex) ? this.currentGroupIndex : 0;\n      if (v == null || g == null) return [];\n      return this.selectedModels\n        .map((_, mIdx) => mIdx)\n        .filter((mIdx) => !!this.assignments?.[mIdx]?.[v]?.[g]);\n    },\n\n    blockingErrorsPresent() {\n      const keys = Object.keys(this.validationErrors || {});\n      for (const k of keys) {\n        const msg = this.validationErrors[k];\n        if (!msg) continue;\n        const idx = this.parseKey(k);\n        if (!idx) continue;\n        const { s, v, g, m, f } = idx;\n        const isSkipped = !!(this.skipFlags[s]?.[v]?.[g]?.[m]?.[f]);\n        if (isSkipped) continue;\n        if (!/ is required\\.$/.test(msg)) return true;\n      }\n      return false;\n    },\n  },\n\n  async created() {\n    this.ajv = createAjv();\n\n    if (this.isShared) {\n      const token = this.$route.params.token;\n      await this.loadShared(token);\n      this.matrixReady = true;\n    } else {\n      const studyId = this.$route.params.id;\n\n      await this.loadStudy(studyId);\n      await this.loadVersions(studyId);\n\n      this.selectedVersion = (this.studyVersions[this.studyVersions.length - 1]?.version) || 1;\n\n      await this.loadTemplateForSelectedVersion();\n\n      // Decide visit scope first to avoid doing \"all visits\" work by default\n      this.selectedVisitIndex = (this.visitList.length > this.VISIT_THRESHOLD) ? 0 : -1;\n\n      await this.loadExistingEntries(studyId);\n\n      this.visitLoading = true;\n      this.applyVersionView();\n      this.prepareAssignmentsLookup();\n      this.prepareSubjectGroupIndexMap();\n      this.buildStatusCache();\n      this.visitLoading = false;\n\n      this.matrixReady = true;\n    }\n  },\n\n  watch: {\n    existingEntries: {\n      handler() {\n        if (this.selectedVisitIndex === -999) return;\n        this.rebuildEntriesIndex();\n        this.buildStatusCache();\n      },\n      deep: true,\n    },\n    study: {\n      handler() {\n        this.prepareAssignmentsLookup();\n        this.prepareSubjectGroupIndexMap();\n        if (this.selectedVisitIndex === -999) return;\n        this.buildStatusCache();\n      },\n      deep: true,\n    },\n    async selectedVisitIndex(newVal) {\n      if (newVal === -999) return;\n      this.visitLoading = true;\n      await this.$nextTick();\n      this.applyVersionView();\n      this.buildStatusCache();\n      this.visitLoading = false;\n    },\n  },\n\n  methods: {\n    // --- helper: include ?version= only when its a finite number ---\n    safeVersionParams(v) {\n      const n = Number(v);\n      // only include version when it's a real, positive version\n      return Number.isFinite(n) && n >= 1 ? { version: n } : undefined;\n    },\n\n    // --- NEW: merge versioned template into existing study_data without losing subjects/visits/groups ---\n    mergeStudyDataFromTemplate(schema) {\n      const prev = (this.study && this.study.content && this.study.content.study_data) || {};\n      const incoming = schema || {};\n\n      const merged = {\n        study:          incoming.study          ?? prev.study          ?? {},\n        subjects:       Array.isArray(incoming.subjects)       ? incoming.subjects       : (prev.subjects       || []),\n        groups:         Array.isArray(incoming.groups)         ? incoming.groups         : (prev.groups         || []),\n        visits:         Array.isArray(incoming.visits)         ? incoming.visits         : (prev.visits         || []),\n        selectedModels: Array.isArray(incoming.selectedModels) ? incoming.selectedModels : (prev.selectedModels || []),\n        assignments:    Array.isArray(incoming.assignments)    ? incoming.assignments    : (prev.assignments    || []),\n      };\n\n      const content = (this.study && this.study.content) ? this.study.content : {};\n      this.study = {\n        ...this.study,\n        content: {\n          ...content,\n          study_data: merged\n        }\n      };\n    },\n\n    async loadVersions(studyId) {\n      try {\n        const resp = await axios.get(`/forms/studies/${studyId}/versions`, {\n          headers: { Authorization: `Bearer ${this.token}` }\n        });\n        this.studyVersions = Array.isArray(resp.data) ? resp.data : [];\n        this.studyVersions.sort((a, b) => a.version - b.version);\n      } catch (e) {\n        console.error(\"[Entry] loadVersions error\", e);\n        this.studyVersions = [{ version: 1, created_at: null }];\n      }\n    },\n\n    applyTemplateSchema(schema) {\n      const current = (this.study && this.study.content && this.study.content.study_data) || {};\n\n      const normalized = {\n        study: schema?.study ?? current.study ?? {},\n        subjects: Array.isArray(schema?.subjects) && schema.subjects.length ? schema.subjects : (current.subjects || []),\n        subjectCount: Number.isFinite(schema?.subjectCount) ? schema.subjectCount : (current.subjectCount ?? (current.subjects?.length || 0)),\n        visits: Array.isArray(schema?.visits) && schema.visits.length ? schema.visits : (current.visits || []),\n        groups: Array.isArray(schema?.groups) && schema.groups.length ? schema.groups : (current.groups || []),\n        selectedModels: Array.isArray(schema?.selectedModels) ? schema.selectedModels : (current.selectedModels || []),\n        assignments: Array.isArray(schema?.assignments) ? schema.assignments : (current.assignments || []),\n      };\n\n      if (!this.study) this.study = { metadata: {}, content: { study_data: normalized } };\n      else if (!this.study.content) this.study.content = { study_data: normalized };\n      else this.study.content.study_data = normalized;\n\n      this.initializeEntryData();\n      this.prepareSubjectGroupIndexMap();\n      this.prepareAssignmentsLookup();\n      this.buildStatusCache();\n    },\n\n    async loadTemplateForSelectedVersion() {\n      const studyId = this.study?.metadata?.id;\n      if (!studyId || !this.selectedVersion) return;\n\n      if (this.templateCache.has(this.selectedVersion)) {\n        const cached = this.templateCache.get(this.selectedVersion);\n        this.applyTemplateSchema(cached);\n        return;\n      }\n\n      try {\n        const resp = await axios.get(\n          `/forms/studies/${studyId}/template`,\n          {\n            headers: { Authorization: `Bearer ${this.token}` },\n            params: { version: this.selectedVersion }\n          }\n        );\n        const rawSchema = resp?.data?.schema || {};\n        this.templateCache.set(this.selectedVersion, rawSchema);\n        this.applyTemplateSchema(rawSchema);\n      } catch (e) {\n        console.error(\"[Entry] loadTemplateForSelectedVersion error\", e);\n      }\n    },\n\n    onVersionChange() {\n      this.hydrateCache.clear(); // version changed  clear cache\n      this.loadTemplateForSelectedVersion().then(() => {\n        this.applyVersionView();\n        const nS = this.numberOfSubjects;\n        const nV = this.visitList.length;\n        if (this.currentSubjectIndex == null || this.currentSubjectIndex >= nS) this.currentSubjectIndex = Math.min(0, nS - 1);\n        if (this.currentVisitIndex == null || this.currentVisitIndex >= nV) this.currentVisitIndex = Math.min(0, nV - 1);\n        this.selectedVisitIndex = (this.visitList.length > this.VISIT_THRESHOLD) ? 0 : -1;\n      });\n    },\n\n    rebuildEntriesIndex() {\n      const m = new Map();\n      for (const e of (this.existingEntries || [])) {\n        const key = `${e.subject_index}|${e.visit_index}|${e.group_index}`;\n        const arr = m.get(key) || [];\n        arr.push(e);\n        m.set(key, arr);\n      }\n      for (const [k, arr] of m) {\n        arr.sort((a, b) => Number(b.form_version) - Number(a.form_version));\n      }\n      this.entriesIndex = m;\n      this.hydrateCache.clear();\n    },\n\n    getBestEntryFor(s, v, g) {\n      const key = `${s}|${v}|${g}`;\n      const arr = this.entriesIndex.get(key);\n      if (!arr || !arr.length) return null;\n\n      const target = Number(this.selectedVersion);\n      for (const e of arr) {\n        if (Number(e.form_version) === target) return e;\n      }\n      for (const e of arr) {\n        if (Number(e.form_version) <= target) return e;\n      }\n      return arr[0];\n    },\n\n    applyVersionView() {\n      // On selection matrix we don't need to hydrate entry data; status cache handles the UI.\n      if (this.showSelection) return;\n\n      const nS = this.numberOfSubjects;\n      const nV = this.visitList.length;\n      const vIndices = (this.selectedVisitIndex === -1)\n        ? Array.from({ length: nV }, (_, i) => i)\n        : [Math.min(Math.max(this.selectedVisitIndex, 0), Math.max(nV - 1, 0))];\n\n      for (let s = 0; s < nS; s++) {\n        const g = this.subjectToGroupIdx[s] ?? 0;\n        for (const v of vIndices) this.hydrateCell(s, v, g);\n      }\n    },\n\n    sectionDictKey(sectionObj) {\n      return sectionObj?.title ?? '';\n    },\n    fieldDictKey(fieldObj, fallbackIndex) {\n      return fieldObj?.name ?? fieldObj?.label ?? fieldObj?.key ?? fieldObj?.title ?? `f${fallbackIndex}`;\n    },\n    arrayToDict(sectionFieldArray) {\n      const out = {};\n      (this.selectedModels || []).forEach((sec, sIdx) => {\n        const sKey = this.sectionDictKey(sec);\n        const fields = sec?.fields || [];\n        const row = Array.isArray(sectionFieldArray?.[sIdx]) ? sectionFieldArray[sIdx] : [];\n        const inner = {};\n        fields.forEach((f, fIdx) => {\n          const fKey = this.fieldDictKey(f, fIdx);\n          inner[fKey] = row[fIdx] != null ? row[fIdx] : this.defaultForField(f);\n        });\n        out[sKey] = inner;\n      });\n      return out;\n    },\n    // Convert [[bool]] shaped skipFlags into { [section]: { [field]: boolean } }\n    flagsArrayToDict(flagsArr) {\n      const out = {};\n      (this.selectedModels || []).forEach((sec, sIdx) => {\n        const sKey = this.sectionDictKey(sec);\n        const row = Array.isArray(flagsArr?.[sIdx]) ? flagsArr[sIdx] : [];\n        const inner = {};\n        (sec.fields || []).forEach((f, fIdx) => {\n          const fKey = this.fieldDictKey(f, fIdx);\n          inner[fKey] = !!row[fIdx];\n        });\n        out[sKey] = inner;\n      });\n      return out;\n    },\n\n    dictToArray(dataDict) {\n      return (this.selectedModels || []).map((sec, sIdx) => {\n        const sKey = this.sectionDictKey(sec);\n        const inner = (dataDict && typeof dataDict === 'object') ? dataDict[sKey] : undefined;\n        return (sec.fields || []).map((f, fIdx) => {\n          const fKey = this.fieldDictKey(f, fIdx);\n          const v = inner ? inner[fKey] : undefined;\n          return (v !== undefined) ? v : this.defaultForField(f);\n        });\n      });\n    },\n\n    makeSectionFieldSkeleton() {\n      return (this.selectedModels || []).map(sec => (sec.fields || []).map(f => this.defaultForField(f)));\n    },\n    makeSkipSkeleton() {\n      return (this.selectedModels || []).map(sec => (sec.fields || []).map(() => false));\n    },\n    ensureSlot(s, v, g) {\n      if (!this.entryData[s]) this.entryData[s] = [];\n      if (!this.entryData[s][v]) this.entryData[s][v] = [];\n      if (!this.entryData[s][v][g]) this.entryData[s][v][g] = this.makeSectionFieldSkeleton();\n\n      if (!this.skipFlags[s]) this.skipFlags[s] = [];\n      if (!this.skipFlags[s][v]) this.skipFlags[s][v] = [];\n      if (!this.skipFlags[s][v][g]) this.skipFlags[s][v][g] = this.makeSkipSkeleton();\n\n      if (!this.entryIds[s]) this.entryIds[s] = [];\n      if (!this.entryIds[s][v]) this.entryIds[s][v] = [];\n      if (typeof this.entryIds[s][v][g] === \"undefined\") this.entryIds[s][v][g] = null;\n    },\n\n    hydrateCell(s, v, g) {\n      const cacheKey = `${s}|${v}|${g}|${this.selectedVersion}`;\n      const cached = this.hydrateCache.get(cacheKey);\n      if (cached) {\n        this.entryData[s] ??= [];\n        this.entryData[s][v] ??= [];\n        this.entryData[s][v][g] = cached.dataArr;\n        this.entryIds[s] ??= [];\n        this.entryIds[s][v] ??= [];\n        this.entryIds[s][v][g] = cached.id;\n        this.skipFlags[s] ??= [];\n        this.skipFlags[s][v] ??= [];\n        this.skipFlags[s][v][g] = cached.skipFlags;\n        return;\n      }\n\n      const best = this.getBestEntryFor(s, v, g);\n      this.ensureSlot(s, v, g);\n      if (!best) {\n        // keep skeleton; also cache to avoid re-checking\n        this.hydrateCache.set(cacheKey, {\n          dataArr: this.entryData[s][v][g],\n          skipFlags: this.skipFlags[s][v][g],\n          id: null,\n        });\n        return;\n      }\n\n      let arr;\n      if (best.data && !Array.isArray(best.data) && typeof best.data === 'object') {\n        arr = this.dictToArray(best.data);\n      } else {\n        arr = Array.isArray(best.data)\n          ? best.data\n          : this.selectedModels.map(sec => sec.fields.map(f => this.defaultForField(f)));\n      }\n\n      arr = (this.selectedModels || []).map((sec, sIdx) => {\n        const row = Array.isArray(arr[sIdx]) ? arr[sIdx] : [];\n        return (sec.fields || []).map((f, fIdx) =>\n          (row[fIdx] !== undefined) ? row[fIdx] : this.defaultForField(f)\n        );\n      });\n\n      this.entryData[s][v][g] = arr;\n      this.entryIds[s][v][g]   = best.id;\n\n      const storedSkips = best.skipped_required_flags || best.skips;\n      this.skipFlags[s][v][g] = Array.isArray(storedSkips) ? storedSkips : this.makeSkipSkeleton();\n\n      this.hydrateCache.set(cacheKey, {\n        dataArr: this.entryData[s][v][g],\n        skipFlags: this.skipFlags[s][v][g],\n        id: best.id,\n      });\n    },\n\n    setDeepValue(s, v, g, m, f, val) {\n      this.ensureSlot(s, v, g);\n      if (!Array.isArray(this.entryData[s][v][g][m])) {\n        const fields = (this.selectedModels[m]?.fields || []);\n        this.entryData[s][v][g][m] = fields.map(ff => this.defaultForField(ff));\n      }\n      this.entryData[s][v][g][m][f] = val;\n    },\n    setDeepSkip(s, v, g, m, f, on) {\n      this.ensureSlot(s, v, g);\n      if (!Array.isArray(this.skipFlags[s][v][g][m])) {\n        const fields = (this.selectedModels[m]?.fields || []);\n        this.skipFlags[s][v][g][m] = fields.map(() => false);\n      }\n      this.skipFlags[s][v][g][m][f] = !!on;\n    },\n\n    setEntryValue(mIdx, fIdx, val) {\n      const s = this.currentSubjectIndex, v = this.currentVisitIndex, g = this.currentGroupIndex;\n      this.setDeepValue(s, v, g, mIdx, fIdx, val);\n      this.clearError(mIdx, fIdx);\n      this.validateField(mIdx, fIdx);\n      // invalidate cache for this cell\n      this.hydrateCache.delete(`${s}|${v}|${g}|${this.selectedVersion}`);\n    },\n\n    errorKey(mIdx, fIdx) {\n      return [this.currentSubjectIndex, this.currentVisitIndex, this.currentGroupIndex, mIdx, fIdx].join(\"-\");\n    },\n    parseKey(k) {\n      const parts = String(k).split(\"-\").map((x) => parseInt(x, 10));\n      if (parts.length !== 5 || parts.some((n) => Number.isNaN(n))) return null;\n      const [s, v, g, m, f] = parts;\n      return { s, v, g, m, f };\n    },\n\n    onRawFileSelected(mIdx, fIdx, fileOrFiles) {\n      const key = this.errorKey(mIdx, fIdx);\n      const arr = Array.isArray(fileOrFiles) ? fileOrFiles : (fileOrFiles ? [fileOrFiles] : []);\n      const cur = Array.isArray(this.pendingFiles[key])\n        ? this.pendingFiles[key]\n        : (this.pendingFiles[key] ? [this.pendingFiles[key]] : []);\n      this.pendingFiles = { ...this.pendingFiles, [key]: [...cur, ...arr] };\n    },\n\n    getSliderProps(field) {\n      const c = field?.constraints || {};\n      const min = c.percent ? 1 : (Number.isFinite(+c.min) ? +c.min : 1);\n      const max = c.percent ? 100 : (Number.isFinite(+c.max) ? +c.max : (c.percent ? 100 : 5));\n      const step = Number.isFinite(+c.step) && +c.step > 0 ? +c.step : 1;\n      const marks = Array.isArray(c.marks) ? c.marks : [];\n      return { min, max, step, readonly: !!c.readonly || !this.canEdit, percent: !!c.percent, showTicks: !!c.showTicks, marks };\n    },\n    getLinearProps(field) {\n      const c = field?.constraints || {};\n      const min = Number.isFinite(+c.min) ? Math.round(+c.min) : 1;\n      let max = Number.isFinite(+c.max) ? Math.round(+c.max) : 5;\n      if (max <= min) max = min + 1;\n      return { min, max, leftLabel: c.leftLabel || \"\", rightLabel: c.rightLabel || \"\", readonly: !!c.readonly || !this.canEdit };\n    },\n\n    openLegendDialog() { this.showLegendDialog = true; },\n    closeLegendDialog() { this.showLegendDialog = false; },\n\n    openStatusLegend() { this.showStatusLegend = true; },\n    closeStatusLegend() { this.showStatusLegend = false; },\n\n    hasConstraints(field) {\n      const c = field?.constraints || {};\n      return Object.keys(c).some((k) => k !== \"required\" && k !== \"helpText\");\n    },\n    buildConstraintList(field) {\n      const c = field?.constraints || {};\n      const parts = [];\n      if (c.readonly || !this.canEdit) parts.push(\"Read-only\");\n      if (field.type === \"slider\") {\n        const mode = (c.mode || \"slider\").toLowerCase();\n        if (mode === \"slider\") {\n          parts.push(`Slider ${c.percent ? \"(1100%)\" : \"\"}`);\n          if (Number.isFinite(c.min)) parts.push(`Min: ${c.min}`);\n          if (Number.isFinite(c.max)) parts.push(`Max: ${c.max}`);\n          if (Number.isFinite(c.step)) parts.push(`Step: ${c.step}`);\n          if (c.showTicks) parts.push(\"Show tick marks\");\n          if (Array.isArray(c.marks) && c.marks.length) {\n            parts.push(`Labels: ${c.marks.map(m => `${m.value}=\"${m.label}\"`).join(\", \")}`);\n          }\n        } else {\n          parts.push(\"Linear scale\");\n          parts.push(`Range: ${c.min ?? 1}${c.max ?? 5} (integers)`);\n          if (c.leftLabel) parts.push(`Left: ${c.leftLabel}`);\n          if (c.rightLabel) parts.push(`Right: ${c.rightLabel}`);\n        }\n        return parts.length ? parts : [\"No constraints.\"];\n      }\n      if (field.type === \"text\" || field.type === \"textarea\") {\n        if (typeof c.minLength === \"number\") parts.push(`Min length: ${c.minLength}`);\n        if (typeof c.maxLength === \"number\") parts.push(`Max length: ${c.maxLength}`);\n        if (c.pattern) parts.push(`Pattern: ${c.pattern}`);\n        if (c.transform && c.transform !== \"none\") {\n          const t = c.transform.charAt(0).toUpperCase() + c.transform.slice(1).toLowerCase();\n          parts.push(`Transform on save: ${t}`);\n        }\n      }\n      if (field.type === \"number\") {\n        if (typeof c.min === \"number\") parts.push(`Min: ${c.min}`);\n        if (typeof c.max === \"number\") parts.push(`Max: ${c.max}`);\n        if (typeof c.step === \"number\") parts.push(`Step: ${c.step}`);\n        if (typeof c.minDigits === \"number\") parts.push(`Min digits: ${c.minDigits}`);\n        if (typeof c.maxDigits === \"number\") parts.push(`Max digits: ${c.maxDigits}`);\n        if (c.integerOnly) parts.push(\"Integer only\");\n      }\n      if (field.type === \"date\") {\n        if (c.dateFormat) parts.push(`Date format: ${c.dateFormat}`);\n        if (c.minDate) parts.push(`Min date: ${c.minDate}`);\n        if (c.maxDate) parts.push(`Max date: ${c.maxDate}`);\n      }\n      if (field.type === \"time\") {\n        if (c.minTime) parts.push(`Min time: ${c.minTime}`);\n        if (c.maxTime) parts.push(`Max time: ${c.maxTime}`);\n        if (typeof c.step === \"number\") parts.push(`Step (sec): ${c.step}`);\n      }\n      if (field.type === \"select\" && c.allowMultiple) parts.push(\"Multiple selection: allowed\");\n      if (field.type === \"file\") {\n        const storage = (c.storagePreference === \"url\") ? \"Link via URL\" : \"Local upload\";\n        parts.push(`Storage: ${storage}`);\n        const allowedList = Array.isArray(c.allowedFormats) ? c.allowedFormats.filter(Boolean).map(String) : [];\n        if (allowedList.length) parts.push(`Allowed: ${allowedList.join(\", \")}`);\n        const sizeNum = Number(c.maxSizeMB);\n        if (Number.isFinite(sizeNum) && sizeNum > 0) parts.push(`Max size: ${sizeNum} MB`);\n        if (c.allowMultipleFiles) parts.push(\"Multiple files: allowed\");\n        if (Array.isArray(c.modalities) && c.modalities.length) parts.push(`Modalities: ${c.modalities.join(\", \")}`);\n      }\n      return parts.length ? parts : [\"No constraints.\"];\n    },\n    openConstraintDialog(field) {\n      this.constraintDialogFieldName = field?.label || field?.name || \"Field\";\n      this.constraintDialogItems = this.buildConstraintList(field);\n      this.showConstraintDialog = true;\n    },\n    closeConstraintDialog() {\n      this.showConstraintDialog = false;\n      this.constraintDialogFieldName = \"\";\n      this.constraintDialogItems = [];\n    },\n\n    applyTransform(transform, value) {\n      const v = value == null ? \"\" : String(value);\n      switch (String(transform || \"none\").toLowerCase()) {\n        case \"uppercase\": return v.toUpperCase();\n        case \"lowercase\": return v.toLowerCase();\n        case \"capitalize\": return v.replace(/\\b\\w+/g, (w) => w.charAt(0).toUpperCase() + w.slice(1).toLowerCase());\n        default: return v;\n      }\n    },\n    onFieldBlur(mIdx, fIdx) {\n      const def = this.selectedModels[mIdx].fields[fIdx] || {};\n      const cons = def.constraints || {};\n      if (def.type === \"text\" || def.type === \"textarea\") {\n        const cur = this.entryData[this.currentSubjectIndex][this.currentVisitIndex][this.currentGroupIndex][mIdx][fIdx];\n        const transformed = this.applyTransform(cons.transform, cur);\n        if (transformed !== cur) {\n          this.setDeepValue(this.currentSubjectIndex, this.currentVisitIndex, this.currentGroupIndex, mIdx, fIdx, transformed);\n        }\n      }\n      this.validateField(mIdx, fIdx);\n    },\n    applyTransformsForSection() {\n      this.assignedModelIndices.forEach((mIdx) => {\n        this.selectedModels[mIdx].fields.forEach((def, fIdx) => {\n          if (!def) return;\n          const cons = def.constraints || {};\n          if (def.type === \"text\" || def.type === \"textarea\") {\n            const cur = this.entryData[this.currentSubjectIndex][this.currentVisitIndex][this.currentGroupIndex][mIdx][fIdx];\n            const t = this.applyTransform(cons.transform, cur);\n            if (t !== cur) this.setDeepValue(this.currentSubjectIndex, this.currentVisitIndex, this.currentGroupIndex, mIdx, fIdx, t);\n          }\n        });\n      });\n    },\n\n    setError(mIdx, fIdx, msg) {\n      const k = this.errorKey(mIdx, fIdx);\n      this.validationErrors = { ...this.validationErrors, [k]: msg };\n    },\n    clearError(mIdx, fIdx) {\n      const k = this.errorKey(mIdx, fIdx);\n      if (k in this.validationErrors) {\n        const next = { ...this.validationErrors };\n        delete next[k];\n        this.validationErrors = next;\n      }\n    },\n    fieldErrors(mIdx, fIdx) { return this.validationErrors[this.errorKey(mIdx, fIdx)] || \"\"; },\n\n    goToDashboard() {\n      this.$router.push({ name: \"Dashboard\", query: { openStudies: \"true\" } });\n    },\n\n    async loadStudy(studyId) {\n      try {\n        const resp = await axios.get(\n          `/forms/studies/${studyId}`,\n          { headers: { Authorization: `Bearer ${this.token}` } }\n        );\n        this.study = resp.data;\n        this.initializeEntryData();\n      } catch (err) {\n        console.error(\"[Entry] loadStudy error\", err);\n        this.showDialogMessage(\"Failed to load study details.\");\n      }\n    },\n\n    async loadShared(token) {\n      try {\n        const resp = await axios.get(`/forms/shared-api/${token}/`);\n        const payload = resp.data || {};\n        this.shareToken = token;\n        this.sharedPermission = payload.permission || \"view\";\n        this.study = payload.study;\n        this.initializeEntryData();\n        this.prepareAssignmentsLookup();\n        this.prepareSubjectGroupIndexMap();\n\n        this.currentSubjectIndex = payload.subject_index ?? 0;\n        this.currentVisitIndex   = payload.visit_index ?? 0;\n        this.currentGroupIndex   = payload.group_index ?? 0;\n        this.ensureSlot(this.currentSubjectIndex, this.currentVisitIndex, this.currentGroupIndex);\n        this.showSelection = false;\n        this.validationErrors = {};\n      } catch (e) {\n        console.error(\"[Shared] load error\", e);\n        this.showDialogMessage(\"Shared link is invalid or expired.\");\n      }\n    },\n\n    async loadExistingEntries(studyId) {\n      try {\n        const resp = await axios.get(\n          `/forms/studies/${studyId}/data_entries`,\n          { headers: { Authorization: `Bearer ${this.token}` } }\n        );\n        const payload = Array.isArray(resp.data) ? resp.data : (resp.data?.entries || []);\n        this.existingEntries = payload;\n        this.rebuildEntriesIndex();\n      } catch (err) {\n      console.error(\"Failed to load existing entries\", err);}\n    },\n\n    defaultForField(f, { ignoreDefaults = false } = {}) {\n      const c = f?.constraints || {};\n      const t = String(f?.type || \"\").toLowerCase();\n      const allowMulti = !!c.allowMultiple;\n      if (t === \"slider\") return null;\n      if (t === \"file\") return c.allowMultipleFiles ? [] : null;\n      if (!ignoreDefaults && Object.prototype.hasOwnProperty.call(c, \"defaultValue\")) return c.defaultValue;\n      if (!ignoreDefaults && Object.prototype.hasOwnProperty.call(f, \"value\")) return f.value;\n      switch (t) {\n        case \"checkbox\": return false;\n        case \"radio\":\n        case \"select\": return allowMulti ? [] : \"\";\n        case \"number\": return \"\";\n        case \"date\":\n        case \"time\":\n        case \"text\":\n        case \"textarea\":\n        default: return \"\";\n      }\n    },\n\n    clearCurrentSection() {\n      if (!this.canEdit) return;\n      const s = this.currentSubjectIndex, v = this.currentVisitIndex, g = this.currentGroupIndex;\n      this.ensureSlot(s, v, g);\n      this.assignedModelIndices.forEach((mIdx) => {\n        const section = this.selectedModels[mIdx];\n        section.fields.forEach((f, fIdx) => {\n          const cons = f?.constraints || {};\n          if (cons.readonly) {\n            this.clearError(mIdx, fIdx);\n            return;\n          }\n          const next = this.defaultForField(f, { ignoreDefaults: false });\n          this.setDeepValue(s, v, g, mIdx, fIdx, next);\n          this.setDeepSkip(s, v, g, mIdx, fIdx, false);\n          this.clearError(mIdx, fIdx);\n        });\n      });\n      this.hydrateCache.delete(`${s}|${v}|${g}|${this.selectedVersion}`);\n    },\n\n    initializeEntryData() {\n      const nS = this.numberOfSubjects;\n      const nV = this.visitList.length;\n      const nG = this.groupList.length;\n\n      this.entryData = Array.from({ length: nS }, () =>\n        Array.from({ length: nV }, () =>\n          Array.from({ length: nG }, () => null)\n        )\n      );\n\n      this.skipFlags = Array.from({ length: nS }, () =>\n        Array.from({ length: nV }, () =>\n          Array.from({ length: nG }, () => null)\n        )\n      );\n\n      this.entryIds = Array.from({ length: nS }, () =>\n        Array.from({ length: nV }, () => Array.from({ length: nG }, () => null))\n      );\n\n      this.validationErrors = {};\n    },\n\n    prepareAssignmentsLookup() {\n      const nV = this.visitList.length;\n      const nG = this.groupList.length;\n      this.assignedLookup = Array.from({ length: nV }, (_, v) =>\n        Array.from({ length: nG }, (_, g) =>\n          this.selectedModels.map((_, mIdx) => mIdx).filter(mIdx => !!this.assignments[mIdx]?.[v]?.[g])\n        )\n      );\n    },\n    prepareSubjectGroupIndexMap() {\n      const subjects = this.study?.content?.study_data?.subjects || [];\n      this.subjectToGroupIdx = subjects.map((s) => {\n        const name = (s.group || \"\").trim().toLowerCase();\n        const gi = this.groupList.findIndex((g) => (g.name || \"\").trim().toLowerCase() === name);\n        return gi >= 0 ? gi : 0;\n      });\n    },\n    buildStatusCache() {\n      this.statusMap = new Map();\n      const nS = this.numberOfSubjects;\n      const nV = this.visitList.length;\n\n      const vIndices = (this.selectedVisitIndex === -1)\n        ? Array.from({ length: nV }, (_, i) => i)\n        : [Math.min(Math.max(this.selectedVisitIndex, 0), Math.max(nV - 1, 0))];\n\n      for (let s = 0; s < nS; s++) {\n        const g = this.subjectToGroupIdx[s] ?? 0;\n        for (const v of vIndices) {\n          const e = this.getBestEntryFor(s, v, g);\n          const key = `${s}|${v}`;\n\n          if (!e) { this.statusMap.set(key, \"none\"); continue; }\n\n          const flags = e.skipped_required_flags;\n          const hasSkip = !!(Array.isArray(flags) && flags.some(row => Array.isArray(row) && row.some(Boolean)));\n          if (hasSkip) { this.statusMap.set(key, \"skipped\"); continue; }\n\n          const assigned = (this.assignedLookup?.[v]?.[g]) || [];\n          let total = 0;\n          let filled = 0;\n\n          if (e.data && !Array.isArray(e.data) && typeof e.data === 'object') {\n            for (const mIdx of assigned) {\n              const sec = this.selectedModels[mIdx] || {};\n              const sKey = this.sectionDictKey(sec);\n              const secObj = e.data[sKey] || {};\n              (sec.fields || []).forEach((f, fIdx) => {\n                const fKey = this.fieldDictKey(f, fIdx);\n                const val = secObj[fKey];\n                total += 1;\n                if (val != null && val !== \"\") filled += 1;\n              });\n            }\n          } else if (Array.isArray(e.data)) {\n            for (const mIdx of assigned) {\n              const row = e.data[mIdx] || [];\n              total += row.length;\n              filled += row.filter(vv => vv != null && vv !== \"\").length;\n            }\n          }\n\n          if (total === 0 || filled === 0) this.statusMap.set(key, \"none\");\n          else if (filled === total) this.statusMap.set(key, \"complete\");\n          else this.statusMap.set(key, \"partial\");\n        }\n      }\n    },\n\n    statusClassFast(sIdx, vIdx) {\n      const s = this.statusMap.get(`${sIdx}|${vIdx}`) || \"none\";\n      return s === \"skipped\" ? \"status-skipped\" : `status-${s}`;\n    },\n\n    selectCell(sIdx, vIdx) {\n      const nS = this.numberOfSubjects;\n      const nV = this.visitList.length;\n\n      this.currentSubjectIndex = Math.min(Math.max(sIdx ?? 0, 0), Math.max(nS - 1, 0));\n      this.currentVisitIndex   = Math.min(Math.max(vIdx ?? 0, 0), Math.max(nV - 1, 0));\n      this.currentGroupIndex   = this.subjectToGroupIdx[this.currentSubjectIndex] ?? 0;\n\n      this.ensureSlot(this.currentSubjectIndex, this.currentVisitIndex, this.currentGroupIndex);\n      this.prepareAssignmentsLookup();\n\n      this.showSelection = false;\n      this.validationErrors = {};\n\n      // ensure form data is hydrated for the chosen visit\n      this.visitLoading = true;\n      this.hydrateCell(this.currentSubjectIndex, this.currentVisitIndex, this.currentGroupIndex);\n      this.visitLoading = false;\n    },\n\n    backToSelection() {\n      if (this.isShared) return;\n      this.showSelection = true;\n      this.showDetails = false;\n      this.currentSubjectIndex = null;\n      this.currentVisitIndex = null;\n      this.currentGroupIndex = 0;\n      this.validationErrors = {};\n    },\n    toggleDetails() { this.showDetails = !this.showDetails; },\n\n    fieldId(mIdx, fIdx) {\n      return `s${this.currentSubjectIndex}_v${this.currentVisitIndex}_g${this.currentGroupIndex}_m${mIdx}_f${fIdx}`;\n    },\n\n    isFieldSkipped(mIdx, fIdx) {\n      const s = this.currentSubjectIndex, v = this.currentVisitIndex, g = this.currentGroupIndex;\n      return !!(this.skipFlags[s]?.[v]?.[g]?.[mIdx]?.[fIdx]);\n    },\n    setSkipForField(mIdx, fIdx, on) {\n      const s = this.currentSubjectIndex, v = this.currentVisitIndex, g = this.currentGroupIndex;\n      if (!this.skipFlags[s] || !this.skipFlags[s][v] || !this.skipFlags[s][v][g]) return;\n      this.setDeepSkip(s, v, g, mIdx, fIdx, on);\n    },\n\n    validateField(mIdx, fIdx) {\n      const s = this.currentSubjectIndex, v = this.currentVisitIndex, g = this.currentGroupIndex;\n      this.ensureSlot(s, v, g);\n\n      const def = this.selectedModels[mIdx].fields[fIdx] || {};\n      const cons = def.constraints || {};\n      const label = def.label || def.name || \"This field\";\n      const val = this.entryData[s][v][g][mIdx][fIdx];\n      const allowMultiFiles = !!cons.allowMultipleFiles;\n      let isSkipped = !!(this.skipFlags[s]?.[v]?.[g]?.[mIdx]?.[fIdx]);\n\n      const isEmpty = () => {\n        if (def.type === \"checkbox\") return val !== true;\n        if (def.type === \"file\") {\n          if (allowMultiFiles) {\n            const arr = Array.isArray(val) ? val : [];\n            return arr.length === 0;\n          } else {\n            if (!val) return true;\n            const src = val.source || (val.file && val.file.source) || \"local\";\n            if (src === \"url\") {\n              const url = (val.url || \"\").trim();\n              return !url;\n            }\n            if (src === \"local\") {\n              const meta = (val.file && typeof val.file === \"object\") ? val.file : val;\n              const sizeNum = Number(meta.size);\n              return !meta.name || !Number.isFinite(sizeNum) || sizeNum <= 0;\n            }\n            return true;\n          }\n        }\n        if (Array.isArray(val)) return val.length === 0;\n        return (val == null || (typeof val === \"string\" && val.trim() === \"\"));\n      };\n\n      this.clearError(mIdx, fIdx);\n\n      if (isSkipped) {\n        if (isEmpty()) return true;\n        this.setSkipForField(mIdx, fIdx, false);\n        isSkipped = false;\n      }\n\n      if (cons.required && isEmpty()) {\n        this.setError(mIdx, fIdx, `${label} is required.`);\n        return false;\n      }\n\n      if (def.type === \"slider\") {\n        if (val == null || val === \"\") return true;\n        const mode = (cons.mode || \"slider\").toLowerCase();\n        const n = Number(val);\n        if (!Number.isFinite(n)) {\n          this.setError(mIdx, fIdx, `${label} must be a number.`);\n          return false;\n        }\n        if (mode === \"slider\") {\n          const min = cons.percent ? 1 : (Number.isFinite(+cons.min) ? +cons.min : 1);\n          const max = cons.percent ? 100 : (Number.isFinite(+cons.max) ? +cons.max : (cons.percent ? 100 : 5));\n          const step = Number.isFinite(+cons.step) && +c.step > 0 ? +cons.step : 1;\n          if (n < min || n > max) { this.setError(mIdx, fIdx, `${label} must be between ${min} and ${max}.`); return false; }\n          if (step >= 1) {\n            const k = (n - min) / step;\n            if (Math.abs(k - Math.round(k)) > 1e-9) { this.setError(mIdx, fIdx, `${label} must align to step ${step}.`); return false; }\n          }\n          return true;\n        } else {\n          const min = Number.isFinite(+cons.min) ? Math.round(+cons.min) : 1;\n          const max = Number.isFinite(+cons.max) ? Math.round(+cons.max) : 5;\n          if (n < min || n > max || Math.round(n) !== n) { this.setError(mIdx, fIdx, `${label} must be an integer between ${min} and ${max}.`); return false; }\n          return true;\n        }\n      }\n\n      if (def.type !== \"file\") {\n        const { valid, message } = validateFieldValue(this.ajv, def, val);\n        if (!valid) {\n          this.setError(mIdx, fIdx, message || `${label} is invalid.`);\n          return false;\n        }\n      }\n\n      if (def.type === \"date\" && val) {\n        const cons = (this.selectedModels[mIdx].fields[fIdx] || {}).constraints || {};\n        const fmt = cons.dateFormat || \"dd.MM.yyyy\";\n        const parse = (s) => {\n          const map = {\n            \"dd.MM.yyyy\": /^(\\d{2})\\.(\\d{2})\\.(\\d{4})$/,\n            \"MM-dd-yyyy\": /^(\\d{2})-(\\d{2})-(\\d{4})$/,\n            \"dd-MM-yyyy\": /^(\\d{2})-(\\d{2})-(\\d{4})$/,\n            \"yyyy-MM-dd\": /^(\\d{4})-(\\d{2})-(\\d{2})$/,\n            \"MM/yyyy\": /^(\\d{2})\\/(\\d{4})$/,\n            \"MM-yyyy\": /^(\\d{2})-(\\d{4})$/,\n            \"yyyy/MM\": /^(\\d{4})\\/(\\d{2})$/,\n            \"yyyy-MM\": /^(\\d{4})-(\\d{2})$/,\n            \"yyyy\": /^(\\d{4})$/,\n          };\n          const rx = map[fmt] || map[fmt.replace(\".\", \"\\\\.\")];\n          if (!rx) return null;\n          const m = rx.exec(String(s));\n          if (!m) return null;\n          let y, M, d;\n          if (fmt === \"dd.MM.yyyy\") { d=+m[1]; M=+m[2]; y=+m[3]; }\n          else if (fmt === \"MM-dd-yyyy\") { M=+m[1]; d=+m[2]; y=+m[3]; }\n          else if (fmt === \"dd-MM-yyyy\") { d=+m[1]; M=+m[2]; y=+m[3]; }\n          else if (fmt === \"yyyy-MM-dd\") { y=+m[1]; M=+m[2]; d=+m[3]; }\n          else if (fmt === \"MM/yyyy\" || \"MM-yyyy\") { M=+m[1]; y=+m[2]; d=1; }\n          else if (fmt === \"yyyy/MM\" || \"yyyy-MM\") { y=+m[1]; M=+m[2]; d=1; }\n          else if (fmt === \"yyyy\") { y=+m[1]; M=1; d=1; }\n          return new Date(y, M-1, d);\n        };\n        const d = parse(val);\n        if (d) {\n          if (cons.minDate) {\n            const md = parse(cons.minDate);\n            if (md && d < md) { this.setError(mIdx, fIdx, `${def.label || def.name || \"This field\"} must be  ${cons.minDate}.`); return false; }\n          }\n          if (cons.maxDate) {\n            const xd = parse(cons.maxDate);\n            if (xd && d > xd) { this.setError(mIdx, fIdx, `${def.label || def.name || \"This field\"} must be  ${cons.maxDate}.`); return false; }\n          }\n        }\n      }\n\n      if (def.type === \"time\" && val) {\n        const cons = (this.selectedModels[mIdx].fields[fIdx] || {}).constraints || {};\n        const toSec = (s) => {\n          const mm = /^(\\d{2}):(\\d{2})(?::(\\d{2}))?$/.exec(String(s));\n          if (!mm) return null;\n          const h = +mm[1], mi = +mm[2], se = mm[3] ? +mm[3] : 0;\n          return h * 3600 + mi * 60 + se;\n        };\n        const secs = toSec(val);\n        if (secs != null) {\n          if (cons.minTime) {\n            const m = toSec(cons.minTime);\n            if (m != null && secs < m) { this.setError(mIdx, fIdx, `${def.label || def.name || \"This field\"} must be  ${cons.minTime}.`); return false; }\n          }\n          if (cons.maxTime) {\n            const x = toSec(cons.maxTime);\n            if (x != null && secs > x) { this.setError(mIdx, fIdx, `${def.label || def.name || \"This field\"} must be  ${cons.maxTime}.`); return false; }\n          }\n        }\n      }\n      return true;\n    },\n\n    validateCurrentSection() {\n      this.assignedModelIndices.forEach((mIdx) => {\n        this.selectedModels[mIdx].fields.forEach((_, fIdx) => { this.clearError(mIdx, fIdx); });\n      });\n\n      let ok = true;\n      this.assignedModelIndices.forEach((mIdx) => {\n        this.selectedModels[mIdx].fields.forEach((_, fIdx) => {\n          const r = this.validateField(mIdx, fIdx);\n          ok = ok && r;\n        });\n      });\n      return ok;\n    },\n\n    computeRequiredFailures() {\n      const s = this.currentSubjectIndex, v = this.currentVisitIndex, g = this.currentGroupIndex;\n      this.ensureSlot(s, v, g);\n      const items = [];\n      this.assignedModelIndices.forEach((mIdx) => {\n        const section = this.selectedModels[mIdx];\n        (section.fields || []).forEach((f, fIdx) => {\n          const c = f?.constraints || {};\n          if (!c.required) return;\n          if (this.skipFlags[s]?.[v]?.[g]?.[mIdx]?.[fIdx]) return;\n          const val = this.entryData[s][v][g][mIdx][fIdx];\n          const empty =\n            (f.type === \"checkbox\" ? val !== true :\n            f.type === \"file\"? (c.allowMultipleFiles? !(Array.isArray(val) && val.length > 0): (!val || (val.source === \"url\"? !(val.url && String(val.url).trim()): !(val.name && Number.isFinite(Number(val.size)))))):\n            Array.isArray(val) ? val.length === 0 :\n            (val == null || (typeof val === \"string\" && val.trim() === \"\")));\n          if (empty) {\n            items.push({\n              key: this.errorKey(mIdx, fIdx),\n              id: this.fieldId(mIdx, fIdx),\n              sectionIndex: mIdx,\n              fieldIndex: fIdx,\n              sectionTitle: section.title || `Section ${mIdx + 1}`,\n              fieldLabel: f.label || f.name || `Field ${fIdx + 1}`,\n            });\n          }\n        });\n      });\n      return items;\n    },\n\n    // ---------- FILE UPLOADS ----------\n    async uploadPendingFilesForCurrentSection() {\n      if (!this.canEdit) return;\n      const s = this.currentSubjectIndex, v = this.currentVisitIndex, g = this.currentGroupIndex;\n      const studyId = this.study?.metadata?.id;\n\n      for (const mIdx of this.assignedModelIndices) {\n        const section = this.selectedModels[mIdx];\n        for (let fIdx = 0; fIdx < (section.fields || []).length; fIdx++) {\n          const def = section.fields[fIdx] || {};\n          if (def.type !== \"file\") continue;\n\n          const key = this.errorKey(mIdx, fIdx);\n          const cons = def.constraints || {};\n          const allowMulti = !!cons.allowMultipleFiles;\n          const val = this.entryData[s][v][g][mIdx][fIdx];\n          if (!val && !allowMulti) continue;\n\n          const modalities = Array.isArray(def?.constraints?.modalities) ? def.constraints.modalities : [];\n          const modalitiesJson = JSON.stringify(modalities || []);\n\n          const pendingArr = Array.isArray(this.pendingFiles[key]) ? this.pendingFiles[key] : (this.pendingFiles[key] ? [this.pendingFiles[key]] : []);\n          const matchFile = (meta) => pendingArr.find(f =>\n            f && meta && f.name === meta.name && Number(f.size) === Number(meta.size) && (!!f.lastModified ? f.lastModified === meta.lastModified : true)\n          );\n\n          const base = this.isShared ? `/forms/shared/${this.shareToken}` : `/forms/studies/${studyId}`;\n\n          if (allowMulti) {\n            const items = Array.isArray(val) ? [...val] : [];\n            for (let i = 0; i < items.length; i++) {\n              const it = items[i];\n              if (!it || it.dbId) continue;\n\n              if (it.source === \"local\") {\n                const file = matchFile(it);\n                if (!file) continue;\n                const fd = new FormData();\n                fd.append(\"uploaded_file\", file);\n                fd.append(\"description\", def.label || def.name || \"\");\n                fd.append(\"modalities_json\", modalitiesJson);\n                if (!this.isShared) {\n                  fd.append(\"storage_option\", \"local\");\n                  fd.append(\"subject_index\", String(s));\n                  fd.append(\"visit_index\", String(v));\n                  fd.append(\"group_index\", String(g));\n                }\n                const headers = this.isShared\n                  ? { \"Content-Type\": \"multipart/form-data\" }\n                  : { Authorization: `Bearer ${this.token}`, \"Content-Type\": \"multipart/form-data\" };\n                const resp = await axios.post(`${base}/files`, fd, { headers });\n                const saved = resp?.data || {};\n                items[i] = {\n                  ...it,\n                  dbId: saved.id,\n                  file_path: saved.file_path,\n                  storage_option: saved.storage_option || (this.isShared ? \"bids\" : \"local\"),\n                  file_name: saved.file_name || it.name,\n                };\n              } else if (it.source === \"url\" && it.url) {\n                const fd = new FormData();\n                fd.append(\"url\", it.url);\n                fd.append(\"description\", def.label || def.name || \"\");\n                fd.append(\"modalities_json\", modalitiesJson);\n                const headers = this.isShared ? {} : { Authorization: `Bearer ${this.token}` };\n                const resp = await axios.post(`${base}/files/url`, fd, { headers });\n                const saved = resp?.data || {};\n                items[i] = {\n                  ...it,\n                  dbId: saved.id,\n                  file_path: saved.file_path,\n                  storage_option: \"url\",\n                  file_name: saved.file_name || \"\",\n                };\n              }\n            }\n            this.setDeepValue(s, v, g, mIdx, fIdx, items);\n            delete this.pendingFiles[key];\n          } else {\n            if (!val) continue;\n\n            if (val.source === \"local\" && (pendingArr[0] instanceof File)) {\n              const file = pendingArr[0];\n              const fd = new FormData();\n              fd.append(\"uploaded_file\", file);\n              fd.append(\"description\", def.label || def.name || \"\");\n              fd.append(\"modalities_json\", modalitiesJson);\n              if (!this.isShared) {\n                fd.append(\"storage_option\", \"local\");\n                fd.append(\"subject_index\", String(s));\n                fd.append(\"visit_index\", String(v));\n                fd.append(\"group_index\", String(g));\n              }\n              const headers = this.isShared\n                ? { \"Content-Type\": \"multipart/form-data\" }\n                : { Authorization: `Bearer ${this.token}`, \"Content-Type\": \"multipart/form-data\" };\n              const resp = await axios.post(`${base}/files`, fd, { headers });\n              const saved = resp?.data || {};\n              this.setDeepValue(s, v, g, mIdx, fIdx, {\n                ...val,\n                dbId: saved.id,\n                file_path: saved.file_path,\n                storage_option: saved.storage_option || (this.isShared ? \"bids\" : \"local\"),\n                file_name: saved.file_name || val.name,\n              });\n              delete this.pendingFiles[key];\n            }\n\n            if (val.source === \"url\" && val.url) {\n              const fd = new FormData();\n              fd.append(\"url\", val.url);\n              fd.append(\"description\", def.label || def.name || \"\");\n              fd.append(\"modalities_json\", modalitiesJson);\n              const headers = this.isShared ? {} : { Authorization: `Bearer ${this.token}` };\n              const resp = await axios.post(`${base}/files/url`, fd, { headers });\n              const saved = resp?.data || {};\n              this.setDeepValue(s, v, g, mIdx, fIdx, {\n                ...val,\n                dbId: saved.id,\n                file_path: saved.file_path,\n                storage_option: \"url\",\n                file_name: saved.file_name || \"\"\n              });\n            }\n          }\n        }\n      }\n    },\n\n    async submitData() {\n      if (!this.canEdit) {\n        this.showDialogMessage(\"This shared link is view-only.\");\n        return;\n      }\n\n      this.applyTransformsForSection();\n\n      const ok = this.validateCurrentSection();\n      const blocking = Object.entries(this.validationErrors)\n        .filter(([k, msg]) => {\n          if (!msg) return false;\n          const idx = this.parseKey(k);\n          if (!idx) return true;\n          const { s, v, g, m, f } = idx;\n          const isSkipped = !!(this.skipFlags[s]?.[v]?.[g]?.[m]?.[f]);\n          if (isSkipped) return false;\n          return !/ is required\\.$/.test(msg);\n        });\n\n      if (!ok && blocking.length) {\n        this.showDialogMessage(\"Please fix validation errors before saving.\");\n        return;\n      }\n\n      const requiredFailures = this.computeRequiredFailures();\n      if (requiredFailures.length) {\n        this.skipCandidates = requiredFailures;\n        this.skipSelections = requiredFailures.reduce((acc, it) => { acc[it.key] = false; return acc; }, {});\n        this.showSkipDialog = true;\n        return;\n      }\n\n      try {\n        await this.uploadPendingFilesForCurrentSection();\n      } catch (e) {\n    console.error(\"File upload/register failed:\", e);\n        this.showDialogMessage(\"File upload failed. Please try again.\");\n        return;\n      }\n\n      const s = this.currentSubjectIndex, v = this.currentVisitIndex, g = this.currentGroupIndex;\n      this.ensureSlot(s, v, g);\n      const dictData = this.arrayToDict(this.entryData[s][v][g]);\n\n  // IMPORTANT: array -> dict ONLY for shared endpoint (to satisfy Pydantic)\n      const rawSkipFlags = this.skipFlags[s][v][g];\n      const flagsPayload = this.isShared ? this.flagsArrayToDict(rawSkipFlags) : rawSkipFlags;\n\n      const payload = {\n        study_id: this.study?.metadata?.id,\n        subject_index: s,\n        visit_index: v,\n        group_index: g,\n        data: dictData,\n        skipped_required_flags: flagsPayload,\n      };\n\n      try {\n        if (this.isShared) {\n      // Do NOT send ?version=0  omit version entirely for shared saves\n          const resp = await axios.post(\n            `/forms/shared/${this.shareToken}/data`,\n            payload\n          );\n\n          const saved = {\n            id: resp?.data?.id,\n            study_id: payload.study_id,\n            subject_index: s,\n            visit_index: v,\n            group_index: g,\n            data: dictData,\n            skipped_required_flags: resp?.data?.skipped_required_flags ?? rawSkipFlags,\n            form_version: resp?.data?.form_version ?? this.selectedVersion,\n            created_at: resp?.data?.created_at ?? new Date().toISOString(),\n          };\n          (this.existingEntries = this.existingEntries || []).push(saved);\n\n          this.showDialogMessage(\"Data saved successfully.\");\n          this.rebuildEntriesIndex();\n          this.hydrateCache.delete(`${s}|${v}|${g}|${this.selectedVersion}`);\n          this.applyVersionView();\n          this.updateStatusCacheFor(s, v, g);\n          return;\n        }\n\n    // Non-shared (authenticated) path stays the same; version allowed when >= 1\n        const headers = { headers: { Authorization: `Bearer ${this.token}` } };\n        const existingId = this.entryIds[s][v][g];\n\n        if (existingId) {\n          const resp = await axios.put(\n            `/forms/studies/${this.study.metadata.id}/data_entries/${existingId}`,\n            payload,\n            headers\n          );\n          this.showDialogMessage(\"Data updated successfully.\");\n          const idx = this.existingEntries.findIndex(x => x.id === existingId);\n          if (idx >= 0) this.existingEntries.splice(idx, 1, resp.data);\n        } else {\n          const params = this.safeVersionParams(this.selectedVersion);\n          const resp = await axios.post(\n            `/forms/studies/${this.study.metadata.id}/data`,\n            payload,\n            params ? { ...headers, params } : headers\n          );\n          const newId = resp?.data?.id;\n          this.entryIds[s][v][g] = newId;\n          const saved = {\n            id: newId,\n            study_id: this.study.metadata.id,\n            subject_index: s,\n            visit_index: v,\n            group_index: g,\n            data: dictData,\n            skipped_required_flags: resp?.data?.skipped_required_flags ?? rawSkipFlags,\n            form_version: resp?.data?.form_version ?? this.selectedVersion,\n            created_at: resp?.data?.created_at ?? new Date().toISOString(),\n          };\n          (this.existingEntries = this.existingEntries || []).push(saved);\n          this.showDialogMessage(\"Data saved successfully.\");\n        }\n\n        this.rebuildEntriesIndex();\n        this.hydrateCache.delete(`${s}|${v}|${g}|${this.selectedVersion}`);\n        this.applyVersionView();\n        this.updateStatusCacheFor(s, v, g);\n      } catch (err) {\n    console.error(err);\n        this.showDialogMessage(\"Failed to save data. Check console for details.\");\n      }\n    },\n\n    updateStatusCacheFor(s, v, g) {\n      const e = this.getBestEntryFor(s, v, g);\n      const key = `${s}|${v}`;\n      if (!e) { this.statusMap.set(key, \"none\"); return; }\n\n      const flags = e.skipped_required_flags;\n      const hasSkip = !!(Array.isArray(flags) && flags.some(row => Array.isArray(row) && row.some(Boolean)));\n      if (hasSkip) { this.statusMap.set(key, \"skipped\"); return; }\n\n      const assigned = (this.assignedLookup?.[v]?.[g]) || [];\n      let total = 0, filled = 0;\n\n      if (e.data && !Array.isArray(e.data) && typeof e.data === 'object') {\n        for (const mIdx of assigned) {\n          const sec = this.selectedModels[mIdx] || {};\n          const sKey = this.sectionDictKey(sec);\n          const secObj = e.data[sKey] || {};\n          (sec.fields || []).forEach((f, fIdx) => {\n            const fKey = this.fieldDictKey(f, fIdx);\n            const val = secObj[fKey];\n            total += 1;\n            if (val != null && val !== \"\") filled += 1;\n          });\n        }\n      } else if (Array.isArray(e.data)) {\n        for (const mIdx of assigned) {\n          const row = e.data[mIdx] || [];\n          total += row.length;\n          filled += row.filter(vv => vv != null && vv !== \"\").length;\n        }\n      }\n\n      if (total === 0 || filled === 0) this.statusMap.set(key, \"none\");\n      else if (filled === total) this.statusMap.set(key, \"complete\");\n      else this.statusMap.set(key, \"partial\");\n    },\n\n    confirmSkipSelection() {\n      const s = this.currentSubjectIndex, v = this.currentVisitIndex, g = this.currentGroupIndex;\n      this.skipCandidates.forEach((it) => {\n        const on = !!this.skipSelections[it.key];\n        this.setDeepSkip(s, v, g, it.sectionIndex, it.fieldIndex, on);\n        if (on) this.clearError(it.sectionIndex, it.fieldIndex);\n      });\n      this.showSkipDialog = false;\n      this.submitData();\n    },\n    cancelSkipSelection() { this.showSkipDialog = false; },\n    jumpToField(item) {\n      this.showSkipDialog = false;\n      this.$nextTick(() => {\n        const el = document.getElementById(item.id);\n        if (el && typeof el.focus === \"function\") el.focus();\n      });\n    },\n\n    openShareDialog(sIdx, vIdx, gIdx) {\n      this.shareParams = { subjectIndex: sIdx, visitIndex: vIdx, groupIndex: gIdx };\n      this.generatedLink = \"\";\n      this.showShareDialog = true;\n    },\n    async createShareLink() {\n      const { subjectIndex, visitIndex, groupIndex } = this.shareParams;\n      const payload = {\n        study_id: this.study.metadata.id,\n        subject_index: subjectIndex,\n        visit_index: visitIndex,\n        group_index: groupIndex,\n        permission: this.shareConfig.permission,\n        max_uses: this.shareConfig.maxUses,\n        expires_in_days: this.shareConfig.expiresInDays,\n      };\n      try {\n        const resp = await axios.post(\"/forms/share-link/\", payload, {\n          headers: { Authorization: `Bearer ${this.token}` },\n        });\n        this.generatedLink = resp.data.link;\n      } catch (err) {\n        if (err.response?.status === 403) this.permissionError = true;\n      }\n    },\n\n    showDialogMessage(message) { this.dialogMessage = message; this.showDialog = true; },\n    closeDialog() { this.showDialog = false; this.dialogMessage = \"\"; },\n  },\n};\n</script>\n\n<style scoped>\n/* ========= Boot / init messaging ========= */\n.boot-message {\n  padding: 16px;\n  margin-bottom: 10px;\n  border: 1px dashed #e5e7eb;\n  background: #fafafa;\n  color: #4b5563;\n  border-radius: 8px;\n  font-size: 14px;\n}\n\n/* ========= Matrix toolbar (visit dropdown) ========= */\n.matrix-toolbar {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 10px;\n}\n.matrix-toolbar-left {\n  display: flex;\n  align-items:  flex-end;\n  gap: 12px;\n}\n.visit-filter {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.visit-filter label {\n  font-size: 13px;\n  color: #444;\n}\n.visit-select {\n  padding: 8px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  min-width: 220px;\n  background: #fff;\n}\n.version-helper {\n  font-size: 12px;\n  color: #374151;\n  background: #f3f4f6;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  padding: 8px 10px;\n  line-height: 1;\n  white-space: nowrap;\n  padding-bottom: 12px;\n  align-self: flex-end;\n}\n\n/* Info icon MUST be extreme right */\n.legend-icon-btn {\n  background: transparent;\n  border: none;\n  padding: 4px 6px;\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  line-height: 1;\n  color: #6b7280;\n  margin-left: auto; /* push to far right */\n}\n.legend-icon-btn:hover { color: #374151; }\n.legend-icon-btn i { font-size: 14px; }\n\n/* ========= Scrollable selection matrix ========= */\n.matrix-wrap {\n  position: relative;      /* for overlay */\n  overflow: auto;\n  max-height: 70vh;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  background: #fff;\n  width: 100%;\n}\n\n/* Loading overlay */\n.busy-overlay {\n  position: absolute;\n  inset: 0;\n  background: rgba(255,255,255,0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 5;\n}\n.spinner {\n  width: 28px;\n  height: 28px;\n  border: 3px solid #d1d5db;\n  border-top-color: #6b7280;\n  border-radius: 50%;\n  animation: spin 0.9s linear infinite;\n}\n@keyframes spin { to { transform: rotate(360deg); } }\n\n/* Make table fill container or scroll based on column count */\n.selection-matrix {\n  border-collapse: collapse;\n  width: max-content;\n  min-width: 720px;\n  table-layout: fixed;\n}\n.selection-matrix.fluid {\n  width: 100%;\n  min-width: 100%;\n}\n\n/* Base table cells */\n.selection-matrix th,\n.selection-matrix td {\n  border: 1px solid #e5e7eb;\n  padding: 10px 12px;\n  text-align: center;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n\n/* Sticky header row for vertical scroll */\n.selection-matrix thead th {\n  position: sticky;\n  top: 0;\n  z-index: 3;\n  background: #f9fafb;\n  font-weight: 600;\n  color: #1f2937;\n}\n\n/* Subject column sticky */\n.subject-col,\n.subject-cell {\n  position: sticky;\n  left: 0;\n  z-index: 4;\n  background: #ffffff;\n  text-align: left;\n}\n.subject-col { background: #f3f4f6; font-weight: 600; color: #1f2937; }\n\n/* Default fixed sizing */\n.subject-col,\n.subject-cell {\n  min-width: 200px;\n  max-width: 320px;\n}\n.visit-col {\n  min-width: 132px;\n  max-width: 200px;\n  text-align: center;\n}\n.visit-cell {\n  width: 140px;\n  text-align: center;\n  padding: 8px;\n}\n\n/* Fluid mode overrides */\n.selection-matrix.fluid .subject-col,\n.selection-matrix.fluid .subject-cell,\n.selection-matrix.fluid .visit-col,\n.selection-matrix.fluid .visit-cell {\n  min-width: 0;\n  max-width: none;\n}\n\n/* Buttons */\n.select-btn {\n  display: inline-block;\n  width: 100%;\n  min-width: 100px;\n  max-width: 160px;\n  color: #fff;\n  border: none;\n  padding: 6px 10px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  line-height: 1.15;\n  transition: opacity 0.15s ease-in-out, transform 0.02s ease-in-out;\n  user-select: none;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.selection-matrix.fluid .select-btn {\n  min-width: 0;\n  max-width: none;\n}\n.select-btn:active { transform: translateY(1px); }\n.select-btn:hover { opacity: 0.9; }\n\n.select-btn.status-none     { background: #9ca3af; color: #1f2937; }\n.select-btn.status-partial  { background: #f59e0b; }\n.select-btn.status-complete { background: #16a34a; }\n.select-btn.status-skipped  { background: #ef4444; }\n\n.selection-matrix tbody tr:nth-child(odd) .subject-cell { background: #fafafa; }\n.selection-matrix tbody tr:nth-child(odd) td:not(.subject-cell) { background: #fcfcfc; }\n\n.matrix-wrap::-webkit-scrollbar { height: 10px; width: 10px; }\n.matrix-wrap::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 8px; }\n.matrix-wrap::-webkit-scrollbar-thumb:hover { background: #9ca3af; }\n\n@media (max-width: 900px) {\n  .visit-col { min-width: 112px; }\n  .visit-cell { width: 120px; }\n  .select-btn { min-width: 90px; max-width: 140px; }\n}\n\n/* ========= Container ========= */\n.study-data-container {\n  max-width: 960px;\n  margin: 24px auto;\n  padding: 24px;\n  background: #ffffff;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n}\n\n/* ========= Back buttons ========= */\n.back-buttons-container { margin-bottom: 16px; }\n.btn-back {\n  background: #d1d5db;\n  color: #1f2937;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n.btn-back:hover { background: #9ca3af; }\n.btn-back i { font-size: 14px; }\n\n/* ========= Header ========= */\n.study-header-container { margin-bottom: 24px; }\n.study-header { text-align: center; margin-bottom: 16px; }\n.study-name { font-size: 24px; font-weight: 600; color: #1f2937; margin-bottom: 8px; }\n.study-description { font-size: 16px; color: #4b5563; margin-bottom: 8px; }\n.study-meta { font-size: 14px; color: #6b7280; }\nhr { margin: 12px 0; border: 0; border-top: 1px solid #e5e7eb; }\n.shared-banner { margin-top: 8px; font-size: 14px; color: #374151; }\n\n/* ========= Details panel ========= */\n.details-panel { margin-bottom: 16px; }\n.details-controls {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 8px;\n}\n.details-toggle-btn {\n  background: none;\n  border: none;\n  color: #374151;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n.details-toggle-btn i { font-size: 14px; }\n\n.share-icon {\n  background: none;\n  border: none;\n  color: #6b7280;\n  cursor: pointer;\n  font-size: 16px;\n  padding: 6px;\n  line-height: 1;\n}\n.share-icon i { font-family: 'Font Awesome 5 Free' !important; font-weight: 900; font-style: normal; display: inline-block; }\n.share-icon:hover { color: #374151; }\n\n.details-content {\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  padding: 16px;\n}\n.details-block { margin-bottom: 16px; }\n.details-block strong { display: block; font-size: 14px; color: #1f2937; margin-bottom: 6px; }\n.details-block ul { margin: 0 0 12px 16px; padding: 0; }\n.details-block li { font-size: 14px; color: #374151; }\n\n/* ========= Breadcrumb ========= */\n.bread-crumb {\n  background: #f9fafb;\n  padding: 12px 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  margin-bottom: 24px;\n  font-size: 14px;\n  color: #374151;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.crumb-left { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }\n.crumb-ver {\n  background: #eef2ff;\n  border: 1px solid #e0e7ff;\n  color: #3730a3;\n  border-radius: 6px;\n  padding: 3px 8px;\n  font-size: 12px;\n}\n.legend-btn {\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 2px 6px;\n  line-height: 1;\n  color: #6b7280;\n}\n.legend-btn:hover { color: #374151; }\n\n/* ========= Sections + fields ========= */\n.entry-form-section h2 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1f2937;\n  margin-bottom: 16px;\n}\n.section-block {\n  margin-bottom: 16px;\n  padding: 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: #ffffff;\n}\n.section-block h3 {\n  margin: 0 0 12px 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #1f2937;\n}\n.form-field { margin-bottom: 16px; }\n.field-label {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex-wrap: wrap;\n}\n.helper-icon { font-size: 14px; color: #6b7280; cursor: pointer; }\n.helper-icon:hover { color: #374151; }\n.form-field label {\n  display: block;\n  margin-bottom: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  color: #1f2937;\n}\n.required { color: #dc2626; margin-left: 4px; }\n.help-inline { font-style: italic; color: #6b7280; margin-left: 8px; }\n\n/* ========= Inputs ========= */\ninput[type=\"text\"],\ntextarea,\ninput[type=\"number\"],\ninput[type=\"date\"],\nselect {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  box-sizing: border-box;\n  font-size: 14px;\n  color: #1f2937;\n  background: #fff;\n}\ninput:focus,\ntextarea:focus,\nselect:focus {\n  outline: none;\n  border-color: #6b7280;\n  box-shadow: 0 0 0 3px rgba(107, 114, 128, 0.1);\n}\n\n/* ========= Errors ========= */\n.error-message { color: #dc2626; font-size: 12px; margin-top: 4px; }\n\n/* ========= Empty state ========= */\n.no-assigned { font-style: italic; color: #6b7280; margin-top: 12px; }\n\n/* ========= Actions ========= */\n.form-actions { text-align: right; margin-top: 16px; }\n.btn-save {\n  background: #16a34a;\n  color: #ffffff;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n.btn-save[disabled] { opacity: 0.5; cursor: not-allowed; }\n.btn-save:hover:not([disabled]) { background: #15803d; }\n\n.btn-clear {\n  background: #e5e7eb;\n  color: #1f2937;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n  margin-left: 8px;\n  transition: background 0.2s;\n}\n.btn-clear:hover { background: #d1d5db; }\n\n/* ========= Overlay + dialogs ========= */\n.loading { text-align: center; padding: 50px; font-size: 16px; color: #6b7280; }\n.dialog-overlay {\n  position: fixed;\n  inset: 0;\n  background: rgba(0,0,0,0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n.dialog {\n  background: #ffffff;\n  padding: 1.5rem;\n  border-radius: 8px;\n  width: 320px;\n  max-width: 90%;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n.dialog h3 { margin: 0 0 1rem 0; font-size: 1.25rem; font-weight: 600; color: #1f2937; }\n.dialog label { display: block; margin-bottom: 0.75rem; font-size: 0.9rem; color: #374151; }\n.dialog label select,\n.dialog label input { width: 100%; margin-top: 0.25rem; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 6px; font-size: 0.9rem; }\n.dialog-actions { display: flex; justify-content: flex-end; gap: 0.5rem; margin-top: 1rem; }\n.dialog-actions button:first-child { background: #e5e7eb; color: #1f2937; }\n.dialog-actions button:last-child { background: #e5e7eb; color: #1f2937; }\n.dialog-actions button { padding: 0.5rem 1rem; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; }\n.dialog-actions button:hover { background: #d1d5db; }\n.dialog p a { display: block; word-break: break-all; margin-top: 1rem; color: #374151; text-decoration: none; }\n.dialog p a:hover { text-decoration: underline; }\n\n/* ========= Mini dialog ========= */\n.mini-overlay {\n  position: fixed;\n  inset: 0;\n  background: rgba(17,24,39,0.35);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1200;\n}\n.mini-dialog {\n  width: 360px;\n  max-width: 92%;\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 10px 30px rgba(0,0,0,0.25);\n  padding: 12px 12px 10px;\n}\n.mini-head { display: flex; align-items: center; justify-content: space-between; margin-bottom: 6px; }\n.mini-title { margin: 0; font-size: 16px; font-weight: 600; color: #111827; }\n.mini-close { background: transparent; border: none; font-size: 16px; line-height: 1; cursor: pointer; color: #6b7280; }\n.mini-close:hover { color: #111827; }\n.mini-list { margin: 0; padding-left: 18px; color: #374151; font-size: 14px; }\n.mini-list li { margin: 4px 0; }\n\n/* ========= Legend swatches ========= */\n.legend-swatch {\n  width: 12px;\n  height: 12px;\n  border-radius: 3px;\n  border: 1px solid rgba(0,0,0,0.12);\n  display: inline-block;\n  margin-right: 8px;\n  vertical-align: -1px;\n}\n.swatch-none     { background: #e5e7eb; }\n.swatch-partial  { background: #fbbf24; }\n.swatch-complete { background: #16a34a; }\n.swatch-skipped  { background: #ef4444; }\n\n.legend-explain li { display: flex; align-items: center; gap: 6px; }\n\n/* ========= Skip dialog ========= */\n.dialog-wide { width: 680px; max-width: 95%; }\n.skip-list {\n  max-height: 360px;\n  overflow: auto;\n  border: 1px dashed #e5e7eb;\n  padding: 8px;\n  border-radius: 8px;\n  margin: 10px 0;\n}\n.skip-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px;\n  border-bottom: 1px solid #f3f4f6;\n  gap: 12px;\n}\n.skip-row:last-child { border-bottom: none; }\n.skip-left { min-width: 0; }\n.skip-title {\n  font-size: 14px;\n  color: #111827;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.skip-right { display: flex; align-items: center; gap: 8px; }\n.skip-chk { display: inline-flex; align-items: center; gap: 8px; }\n.btn-jump {\n  background: #e5e7eb;\n  color: #111827;\n  border: none;\n  padding: 6px 10px;\n  border-radius: 6px;\n  cursor: pointer;\n}\n.btn-jump:hover { background: #d1d5db; }\n\n.btn-primary {\n  background: #2563eb;\n  color: #fff;\n  border: none;\n  padding: 8px 14px;\n  border-radius: 6px;\n  cursor: pointer;\n}\n.btn-option {\n  background: #e5e7eb;\n  color: #111827;\n  border: none;\n  padding: 8px 14px;\n  border-radius: 6px;\n  cursor: pointer;\n}\n\n/* Tiny pill near error */\n.skip-pill {\n  display: inline-block;\n  margin-left: 6px;\n  padding: 1px 6px;\n  font-size: 11px;\n  border-radius: 999px;\n  background: #fff7ed;\n  color: #9a3412;\n  border: 1px solid #fed7aa;\n}\n</style>\n","<template>\n  <div class=\"fsel\">\n    <select\n      class=\"fsel-input\"\n      :id=\"id\"\n      v-model=\"proxy\"\n      :multiple=\"multiple\"\n      :disabled=\"isReadonly\"\n      :aria-readonly=\"isReadonly ? 'true' : 'false'\"\n      v-bind=\"$attrs\"\n    >\n      <option v-if=\"!multiple && placeholder\" disabled value=\"\">{{ placeholder }}</option>\n      <option v-for=\"(opt, i) in stringOptions\" :key=\"i\" :value=\"opt\">{{ opt }}</option>\n    </select>\n\n    <button\n      v-if=\"multiple && allowClear && !isReadonly && hasAnySelection\"\n      class=\"fsel-clear\"\n      type=\"button\"\n      @click=\"clearSelection\"\n      title=\"Clear selection\"\n    >\n      \n    </button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FieldSelect\",\n  inheritAttrs: false,\n  props: {\n    modelValue: { type: [String, Array], default: \"\" },\n    options: { type: Array, default: () => [] },\n    multiple: { type: Boolean, default: false },\n    readonly: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n    placeholder: { type: String, default: \"Select\" },\n    id: { type: String, default: null },\n    defaultValue: { type: [String, Array], default: \"\" },\n    allowClear: { type: Boolean, default: true }\n  },\n  emits: [\"update:modelValue\"],\n  computed: {\n    isReadonly() {\n      const attrReadonly =\n        this.$attrs.readonly === \"\" || this.$attrs.readonly === true || this.$attrs.readonly === \"true\";\n      return this.readonly || attrReadonly || this.disabled;\n    },\n    stringOptions() {\n      return this.options.map(o => (o == null ? \"\" : String(o)));\n    },\n    optionSet() {\n      return new Set(this.stringOptions);\n    },\n    hasAnySelection() {\n      return this.multiple ? this.asArray(this.modelValue).length > 0 : !!this.modelValue;\n    },\n    proxy: {\n      get() {\n        if (this.multiple) {\n          return this.asArray(this.modelValue).map(String).filter(v => this.optionSet.has(v));\n        }\n        const s = this.modelValue == null ? \"\" : String(this.modelValue);\n        return this.optionSet.has(s) ? s : \"\";\n      },\n      set(v) {\n        if (this.isReadonly) return;\n        if (this.multiple) {\n          const arr = this.asArray(v).map(String).filter(x => this.optionSet.has(x));\n          this.$emit(\"update:modelValue\", arr);\n        } else {\n          const s = v == null ? \"\" : String(v);\n          this.$emit(\"update:modelValue\", this.optionSet.has(s) ? s : \"\");\n        }\n      }\n    }\n  },\n  mounted() {\n    const opts = this.stringOptions;\n    if (this.multiple) {\n      const cur = this.asArray(this.modelValue).map(String).filter(v => opts.includes(v));\n      if (cur.length === 0) {\n        const dv = this.asArray(this.defaultValue).map(String).filter(v => opts.includes(v));\n        if (dv.length) this.$emit(\"update:modelValue\", dv);\n      }\n    } else {\n      const cur = this.modelValue == null ? \"\" : String(this.modelValue);\n      if (!cur || !opts.includes(cur)) {\n        const dv = this.defaultValue == null ? \"\" : String(this.defaultValue);\n        if (dv && opts.includes(dv)) this.$emit(\"update:modelValue\", dv);\n      }\n    }\n  },\n  watch: {\n    options() {\n      const opts = this.stringOptions;\n      if (this.multiple) {\n        const cur = this.asArray(this.modelValue).map(String).filter(v => opts.includes(v));\n        this.$emit(\"update:modelValue\", cur);\n      } else {\n        const cur = this.modelValue == null ? \"\" : String(this.modelValue);\n        if (!opts.includes(cur)) {\n          const dv = this.defaultValue == null ? \"\" : String(this.defaultValue);\n          this.$emit(\"update:modelValue\", dv && opts.includes(dv) ? dv : \"\");\n        }\n      }\n    }\n  },\n  methods: {\n    asArray(v) { return Array.isArray(v) ? v : (v ? [v] : []); },\n    clearSelection() { this.$emit(\"update:modelValue\", []); }\n  }\n};\n</script>\n\n<style scoped>\n.fsel {\n  position: relative;\n  display: inline-flex;\n  width: 100%;\n}\n.fsel-input {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  box-sizing: border-box;\n  font-size: 14px;\n  color: #1f2937;\n}\n.fsel-input:disabled {\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n.fsel-clear {\n  position: absolute;\n  right: 6px;\n  top: 6px;\n  height: 28px;\n  width: 28px;\n  border: none;\n  background: #f3f4f6;\n  border-radius: 6px;\n  cursor: pointer;\n  line-height: 1;\n}\n.fsel-clear:hover {\n  background: #e5e7eb;\n}\n</style>\n","import { render } from \"./FieldSelect.vue?vue&type=template&id=7d24e864&scoped=true\"\nimport script from \"./FieldSelect.vue?vue&type=script&lang=js\"\nexport * from \"./FieldSelect.vue?vue&type=script&lang=js\"\n\nimport \"./FieldSelect.vue?vue&type=style&index=0&id=7d24e864&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7d24e864\"]])\n\nexport default __exports__","/* eslint-disable */\nimport Ajv from \"ajv\";\n\n// ---------- helpers ----------\nconst rxTime = /^(\\d{2}):(\\d{2})(?::(\\d{2}))?$/;\n\nconst DATE_FORMATS = [\n  \"dd.MM.yyyy\",\n  \"MM-dd-yyyy\",\n  \"dd-MM-yyyy\",\n  \"yyyy-MM-dd\",\n  \"MM/yyyy\",\n  \"MM-yyyy\",\n  \"yyyy/MM\",\n  \"yyyy-MM\",\n  \"yyyy\",\n];\n\nconst KB = 1024;\nconst MB = 1024 * KB;\n\nfunction parseDateByFormat(str, fmt) {\n  const s = String(str || \"\");\n  let m;\n  switch (fmt) {\n    case \"dd.MM.yyyy\":\n      m = /^(\\d{2})\\.(\\d{2})\\.(\\d{4})$/.exec(s);\n      if (!m) return null;\n      return new Date(+m[3], +m[2] - 1, +m[1]);\n    case \"MM-dd-yyyy\":\n      m = /^(\\d{2})-(\\d{2})-(\\d{4})$/.exec(s);\n      if (!m) return null;\n      return new Date(+m[3], +m[1] - 1, +m[2]);\n    case \"dd-MM-yyyy\":\n      m = /^(\\d{2})-(\\d{2})-(\\d{4})$/.exec(s);\n      if (!m) return null;\n      return new Date(+m[3], +m[2] - 1, +m[1]);\n    case \"yyyy-MM-dd\":\n      m = /^(\\d{4})-(\\d{2})-(\\d{2})$/.exec(s);\n      if (!m) return null;\n      return new Date(+m[1], +m[2] - 1, +m[3]);\n    case \"MM/yyyy\":\n      m = /^(\\d{2})\\/(\\d{4})$/.exec(s);\n      if (!m) return null;\n      return new Date(+m[2], +m[1] - 1, 1);\n    case \"MM-yyyy\":\n      m = /^(\\d{2})-(\\d{4})$/.exec(s);\n      if (!m) return null;\n      return new Date(+m[2], +m[1] - 1, 1);\n    case \"yyyy/MM\":\n      m = /^(\\d{4})\\/(\\d{2})$/.exec(s);\n      if (!m) return null;\n      return new Date(+m[1], +m[2] - 1, 1);\n    case \"yyyy-MM\":\n      m = /^(\\d{4})-(\\d{2})$/.exec(s);\n      if (!m) return null;\n      return new Date(+m[1], +m[2] - 1, 1);\n    case \"yyyy\":\n      m = /^(\\d{4})$/.exec(s);\n      if (!m) return null;\n      return new Date(+m[1], 0, 1);\n    default:\n      return null;\n  }\n}\n\nfunction timeToSeconds(str) {\n  const m = rxTime.exec(String(str || \"\"));\n  if (!m) return null;\n  const h = +m[1], mi = +m[2], se = m[3] ? +m[3] : 0;\n  return h * 3600 + mi * 60 + se;\n}\n\nfunction digitsCountOfNumber(val) {\n  if (val === \"\" || val === null || val === undefined) return 0;\n  const s = String(val);\n  return s.replace(/[^0-9]/g, \"\").length;\n}\n\n// Match a local file's meta against accepts list\nfunction fileMetaMatchesAccept(meta, accepts) {\n  const name = String(meta?.name || meta?.filename || \"\").toLowerCase();\n  const mime = String(meta?.type || meta?.contentType || \"\").toLowerCase();\n  const checks = (accepts || []).map(a => String(a || \"\").trim().toLowerCase()).filter(Boolean);\n  if (!checks.length) return true;\n  return checks.some(a => {\n    if (a.endsWith(\"/*\")) {\n      const base = a.slice(0, -2);\n      return mime.startsWith(base + \"/\");\n    }\n    if (a.startsWith(\".\")) {\n      return name.endsWith(a);\n    }\n    if (a.includes(\"/\")) {\n      return mime === a;\n    }\n    return name.endsWith(\".\" + a.replace(/^\\./, \"\"));\n  });\n}\n\n// Match a URL pathname against accepts list (best-effort by extension)\nfunction urlMatchesAccept(urlStr, accepts) {\n  try {\n    const u = new URL(String(urlStr));\n    const path = (u.pathname || \"\").toLowerCase();\n    const checks = (accepts || []).map(a => String(a || \"\").trim().toLowerCase()).filter(Boolean);\n    if (!checks.length) return true;\n    return checks.some(a => {\n      if (a.endsWith(\"/*\")) return true;\n      if (a.startsWith(\".\")) return path.endsWith(a);\n      if (a.includes(\"/\")) return true;\n      return path.endsWith(\".\" + a.replace(/^\\./, \"\"));\n    });\n  } catch {\n    return false;\n  }\n}\n\n// ---------- AJV factory (v6 signature for addKeyword) ----------\nexport function createAjv() {\n  const ajv = new Ajv({\n    allErrors: true,\n  });\n\n  // Built-in formats we need\n  ajv.addFormat(\"time\", rxTime);\n\n  // Allow only http(s) for link-upload\n  ajv.addFormat(\"http-url\", /^(https?:\\/\\/).+/i);\n\n  // Custom date formats: \"date:<fmt>\"\n  DATE_FORMATS.forEach((fmt) => {\n    const name = `date:${fmt}`;\n    let rx;\n    switch (fmt) {\n      case \"dd.MM.yyyy\":\n        rx = /^\\d{2}\\.\\d{2}\\.\\d{4}$/; break;\n      case \"MM-dd-yyyy\":\n      case \"dd-MM-yyyy\":\n        rx = /^\\d{2}-\\d{2}-\\d{4}$/; break;\n      case \"yyyy-MM-dd\":\n        rx = /^\\d{4}-\\d{2}-\\d{2}$/; break;\n      case \"MM/yyyy\":\n        rx = /^\\d{2}\\/\\d{4}$/; break;\n      case \"MM-yyyy\":\n        rx = /^\\d{2}-\\d{4}$/; break;\n      case \"yyyy/MM\":\n        rx = /^\\d{4}\\/\\d{2}$/; break;\n      case \"yyyy-MM\":\n        rx = /^\\d{4}-\\d{2}$/; break;\n      case \"yyyy\":\n        rx = /^\\d{4}$/; break;\n      default:\n        rx = /.+/;\n    }\n    ajv.addFormat(name, rx);\n  });\n\n  // ----- Custom keywords -----\n\n  // maxDigits\n  const maxDigitsValidate = function (max, data) {\n    const digits = digitsCountOfNumber(data);\n    const ok = digits <= max;\n    if (!ok) {\n      maxDigitsValidate.errors = [\n        { keyword: \"maxDigits\", params: { limit: max }, message: `should have  ${max} digits` },\n      ];\n    }\n    return ok;\n  };\n  ajv.addKeyword(\"maxDigits\", {\n    type: \"number\",\n    errors: true,\n    metaSchema: { type: \"number\", minimum: 1 },\n    validate: maxDigitsValidate,\n  });\n\n  // minDigits\n  const minDigitsValidate = function (min, data) {\n    const digits = digitsCountOfNumber(data);\n    const ok = digits >= min;\n    if (!ok) {\n      minDigitsValidate.errors = [\n        { keyword: \"minDigits\", params: { limit: min }, message: `should have  ${min} digits` },\n      ];\n    }\n    return ok;\n  };\n  ajv.addKeyword(\"minDigits\", {\n    type: \"number\",\n    errors: true,\n    metaSchema: { type: \"number\", minimum: 0 },\n    validate: minDigitsValidate,\n  });\n\n  // minTime\n  const minTimeValidate = function (minTime, data) {\n    if (!data) return true;\n    const v = timeToSeconds(data);\n    const m = timeToSeconds(minTime);\n    const ok = v != null && m != null ? v >= m : true;\n    if (!ok) {\n      minTimeValidate.errors = [\n        { keyword: \"minTime\", params: { limit: minTime }, message: `should be  ${minTime}` },\n      ];\n    }\n    return ok;\n  };\n  ajv.addKeyword(\"minTime\", {\n    type: \"string\",\n    errors: true,\n    metaSchema: { type: \"string\", pattern: rxTime.source },\n    validate: minTimeValidate,\n  });\n\n  // maxTime\n  const maxTimeValidate = function (maxTime, data) {\n    if (!data) return true;\n    const v = timeToSeconds(data);\n    const x = timeToSeconds(maxTime);\n    const ok = v != null && x != null ? v <= x : true;\n    if (!ok) {\n      maxTimeValidate.errors = [\n        { keyword: \"maxTime\", params: { limit: maxTime }, message: `should be  ${maxTime}` },\n      ];\n    }\n    return ok;\n  };\n  ajv.addKeyword(\"maxTime\", {\n    type: \"string\",\n    errors: true,\n    metaSchema: { type: \"string\", pattern: rxTime.source },\n    validate: maxTimeValidate,\n  });\n\n  // timeStep (step in seconds)\n  const timeStepValidate = function (stepSeconds, data) {\n    if (!data || !stepSeconds) return true;\n    const v = timeToSeconds(data);\n    const ok = v != null ? v % stepSeconds === 0 : true;\n    if (!ok) {\n      timeStepValidate.errors = [\n        { keyword: \"timeStep\", params: { step: stepSeconds }, message: `should align to ${stepSeconds}s steps` },\n      ];\n    }\n    return ok;\n  };\n  ajv.addKeyword(\"timeStep\", {\n    type: \"string\",\n    errors: true,\n    metaSchema: { type: \"number\", minimum: 1 },\n    validate: timeStepValidate,\n  });\n\n  // minDateByFormat / maxDateByFormat\n  const minDateByFormatValidate = function (schemaObj, data) {\n    const { minDate, format } = schemaObj || {};\n    if (!data || !minDate || !format) return true;\n    const d = parseDateByFormat(data, format);\n    const m = parseDateByFormat(minDate, format);\n    const ok = d && m ? d >= m : true;\n    if (!ok) {\n      minDateByFormatValidate.errors = [\n        { keyword: \"minDateByFormat\", params: { limit: minDate }, message: `should be  ${minDate}` },\n      ];\n    }\n    return ok;\n  };\n  ajv.addKeyword(\"minDateByFormat\", {\n    type: \"string\",\n    errors: true,\n    metaSchema: {\n      type: \"object\",\n      properties: { minDate: { type: \"string\" }, format: { type: \"string\" } },\n      required: [\"minDate\", \"format\"],\n      additionalProperties: false,\n    },\n    validate: minDateByFormatValidate,\n  });\n\n  const maxDateByFormatValidate = function (schemaObj, data) {\n    const { maxDate, format } = schemaObj || {};\n    if (!data || !maxDate || !format) return true;\n    const d = parseDateByFormat(data, format);\n    const x = parseDateByFormat(maxDate, format);\n    const ok = d && x ? d <= x : true;\n    if (!ok) {\n      maxDateByFormatValidate.errors = [\n        { keyword: \"maxDateByFormat\", params: { limit: maxDate }, message: `should be  ${maxDate}` },\n      ];\n    }\n    return ok;\n  };\n  ajv.addKeyword(\"maxDateByFormat\", {\n    type: \"string\",\n    errors: true,\n    metaSchema: {\n      type: \"object\",\n      properties: { maxDate: { type: \"string\" }, format: { type: \"string\" } },\n      required: [\"maxDate\", \"format\"],\n      additionalProperties: false,\n    },\n    validate: maxDateByFormatValidate,\n  });\n\n  // stepAlign (numeric step with floating-point tolerance)\n  const stepAlignValidate = function (schemaObj, data) {\n    if (data == null || data === \"\") return true;\n    const base = Number(schemaObj?.base);\n    const step = Number(schemaObj?.step);\n    if (!Number.isFinite(step) || step <= 0) return true;\n    const r = (Number(data) - (Number.isFinite(base) ? base : 0)) / step;\n    const diff = Math.abs(r - Math.round(r));\n    const EPS = 1e-9;\n    const ok = diff <= EPS;\n    if (!ok) {\n      stepAlignValidate.errors = [\n        {\n          keyword: \"stepAlign\",\n          params: { base, step },\n          message: `should align to step ${step}${Number.isFinite(base) ? ` starting at ${base}` : \"\"}`\n        }\n      ];\n    }\n    return ok;\n  };\n  ajv.addKeyword(\"stepAlign\", {\n    type: \"number\",\n    errors: true,\n    metaSchema: {\n      type: \"object\",\n      properties: {\n        base: { type: [\"number\", \"null\"] },\n        step: { type: \"number\", minimum: 0 }\n      },\n      required: [\"step\"],\n      additionalProperties: false\n    },\n    validate: stepAlignValidate,\n  });\n\n  // fileMatchesAccept (local file meta)\n  const fileMatchesAcceptValidate = function (accepts, data) {\n    if (!data || typeof data !== \"object\") return true;\n    if (!Array.isArray(accepts)) return true;\n    const meta = data.file && typeof data.file === \"object\" ? data.file : data;\n    const ok = fileMetaMatchesAccept(meta, accepts);\n    if (!ok) {\n      fileMatchesAcceptValidate.errors = [\n        { keyword: \"fileMatchesAccept\", params: {}, message: \"type not allowed\" },\n      ];\n    }\n    return ok;\n  };\n  ajv.addKeyword(\"fileMatchesAccept\", {\n    type: \"object\",\n    errors: true,\n    metaSchema: { type: \"array\", items: { type: \"string\" } },\n    validate: fileMatchesAcceptValidate,\n  });\n\n  // urlMatchesAccept (best-effort by extension)\n  const urlMatchesAcceptValidate = function (accepts, data) {\n    if (!data || typeof data !== \"string\") return true;\n    if (!Array.isArray(accepts)) return true;\n    const ok = urlMatchesAccept(data, accepts);\n    if (!ok) {\n      urlMatchesAcceptValidate.errors = [\n        { keyword: \"urlMatchesAccept\", params: {}, message: \"URL not in allowed formats\" },\n      ];\n    }\n    return ok;\n  };\n  ajv.addKeyword(\"urlMatchesAccept\", {\n    type: \"string\",\n    errors: true,\n    metaSchema: { type: \"array\", items: { type: \"string\" } },\n    validate: urlMatchesAcceptValidate,\n  });\n\n  // maxFileBytes (local meta.size limit)\n  const maxFileBytesValidate = function (limit, data) {\n    if (!data || typeof data !== \"object\") return true;\n    const meta = data.file && typeof data.file === \"object\" ? data.file : data;\n    const sz = (typeof meta?.size === \"number\") ? meta.size : Number(meta?.size);\n    if (!Number.isFinite(sz)) return true;\n    const ok = sz <= limit;\n    if (!ok) {\n      maxFileBytesValidate.errors = [\n        { keyword: \"maxFileBytes\", params: { limit }, message: `exceeds max size (${Math.round(limit / MB)} MB)` },\n      ];\n    }\n    return ok;\n  };\n  ajv.addKeyword(\"maxFileBytes\", {\n    type: \"object\",\n    errors: true,\n    metaSchema: { type: \"number\", minimum: 1 },\n    validate: maxFileBytesValidate,\n  });\n\n  return ajv;\n}\n\n// ---------- schema builder ----------\nfunction buildSchemaForField(fieldDef) {\n  const type = String(fieldDef?.type || \"text\").toLowerCase();\n  const c = fieldDef?.constraints || {};\n  const title = fieldDef?.label || \"Field\";\n\n  const opts = Array.isArray(fieldDef?.options) && fieldDef.options.length\n    ? fieldDef.options.map(String)\n    : [\"\"];\n  let schema = { title };\n\n  if (type === \"text\" || type === \"textarea\") {\n    schema = {\n      type: \"string\",\n      minLength: isFinite(c.minLength) ? c.minLength : undefined,\n      maxLength: isFinite(c.maxLength) ? c.maxLength : undefined,\n      pattern: c.pattern || undefined,\n    };\n  } else if (type === \"number\") {\n    schema = {\n      type: c.integerOnly ? \"integer\" : \"number\",\n      minimum: Number.isFinite(c.min) ? c.min : undefined,\n      maximum: Number.isFinite(c.max) ? c.max : undefined,\n      maxDigits:\n        Number.isFinite(c.maxDigits) ? c.maxDigits :\n        (Number.isFinite(c.maxLengthDigits) ? c.maxLengthDigits : undefined),\n      minDigits: Number.isFinite(c.minDigits) ? c.minDigits : undefined,\n    };\n  } else if (type === \"checkbox\") {\n    schema = { type: \"boolean\" };\n  } else if (type === \"radio\" || type === \"select\") {\n    if (c.allowMultiple) {\n      schema = {\n        type: \"array\",\n        items: { type: \"string\", enum: opts },\n        uniqueItems: true,\n      };\n    } else {\n      schema = {\n        type: \"string\",\n        enum: opts,\n      };\n    }\n  } else if (type === \"date\") {\n    const fmt = c.dateFormat || \"dd.MM.yyyy\";\n    schema = {\n      type: \"string\",\n      format: `date:${fmt}`,\n      minDateByFormat: c.minDate ? { minDate: c.minDate, format: fmt } : undefined,\n      maxDateByFormat: c.maxDate ? { maxDate: c.maxDate, format: fmt } : undefined,\n    };\n  } else if (type === \"time\") {\n    schema = {\n      type: \"string\",\n      format: \"time\",\n      minTime: c.minTime || undefined,\n      maxTime: c.maxTime || undefined,\n      timeStep: Number.isFinite(c.step) ? c.step : undefined,\n    };\n  } else if (type === \"slider\") {\n    const mode = String(c.mode || \"slider\").toLowerCase() === \"linear\" ? \"linear\" : \"slider\";\n    if (mode === \"slider\") {\n      const min = c.percent ? 1 : (Number.isFinite(c.min) ? c.min : 1);\n      const max = c.percent ? 100 : (Number.isFinite(c.max) ? c.max : 5);\n      const step = Number.isFinite(c.step) && c.step > 0 ? c.step : 1;\n      schema = {\n        type: \"number\",\n        minimum: min,\n        maximum: max,\n        stepAlign: { base: min, step }\n      };\n    } else {\n      const min = Number.isFinite(c.min) ? Math.round(c.min) : 1;\n      const max = Number.isFinite(c.max) ? Math.round(c.max) : Math.max(min + 1, 5);\n      schema = {\n        type: \"integer\",\n        minimum: min,\n        maximum: max\n      };\n    }\n  } else if (type === \"file\") {\n    const accepts = Array.isArray(c.allowedFormats) ? c.allowedFormats : [];\n    const maxBytes = (Number.isFinite(c.maxSizeMB) && c.maxSizeMB > 0 ? c.maxSizeMB : 100) * MB;\n\n    const urlSchema = {\n      type: \"object\",\n      required: [\"source\", \"url\"],\n      properties: {\n        source: { const: \"url\" },\n        url: { type: \"string\", format: \"http-url\", urlMatchesAccept: accepts },\n        filename: { type: \"string\" },\n        contentType: { type: \"string\" }\n      },\n      additionalProperties: true\n    };\n\n    // accept both number and numeric-string for size; allow nested file meta too\n    const localBaseProps = {\n      source: { const: \"local\" },\n      name: { type: \"string\" },\n      size: { anyOf: [{ type: \"number\", minimum: 0 }, { type: \"string\", pattern: \"^[0-9]+$\" }] },\n      type: { type: \"string\" },\n      lastModified: { anyOf: [{ type: \"number\" }, { type: \"string\", pattern: \"^[0-9]+$\" }] }\n    };\n\n    const localSchemaFlat = {\n      type: \"object\",\n      required: [\"source\", \"name\", \"size\"],\n      properties: localBaseProps,\n      additionalProperties: true,\n      fileMatchesAccept: accepts,\n      maxFileBytes: maxBytes\n    };\n\n    const localSchemaNested = {\n      type: \"object\",\n      required: [\"source\", \"file\"],\n      properties: {\n        source: { const: \"local\" },\n        file: {\n          type: \"object\",\n          required: [\"name\", \"size\"],\n          properties: localBaseProps,\n          additionalProperties: true\n        }\n      },\n      additionalProperties: true,\n      fileMatchesAccept: accepts,\n      maxFileBytes: maxBytes\n    };\n\n    const pref = String(c.storagePreference || \"local\").toLowerCase();\n    if (pref === \"url\") {\n      schema = urlSchema;\n    } else if (pref === \"local\") {\n      schema = { oneOf: [localSchemaFlat, localSchemaNested] };\n    } else {\n      schema = { oneOf: [urlSchema, localSchemaFlat, localSchemaNested] };\n    }\n  } else {\n    schema = { type: \"string\" };\n  }\n\n\n  Object.keys(schema).forEach((k) => schema[k] === undefined && delete schema[k]);\n  return schema;\n}\n\n// ---------- single-field validator ----------\nexport function validateFieldValue(ajv, fieldDef, value) {\n  try {\n    const schema = buildSchemaForField(fieldDef);\n\n    const t = String(fieldDef?.type || \"text\").toLowerCase();\n    if ((value === \"\" || value == null) && !fieldDef?.constraints?.required) {\n      return { valid: true };\n    }\n    if (t === \"number\" && (value === \"\" || value == null)) {\n      return { valid: !fieldDef?.constraints?.required };\n    }\n    if (t === \"slider\" && (value === \"\" || value == null)) {\n      return { valid: !fieldDef?.constraints?.required };\n    }\n    if (t === \"file\" && (value === \"\" || value == null)) {\n      return { valid: !fieldDef?.constraints?.required };\n    }\n\n    const validate = ajv.compile(schema);\n    const ok = validate(value);\n    if (ok) return { valid: true };\n\n    const err = Array.isArray(validate.errors) ? validate.errors[0] : null;\n    if (!err) return { valid: false, message: \"Invalid value.\" };\n\n    switch (err.keyword) {\n      case \"stepAlign\":\n      case \"maxDigits\":\n      case \"minDigits\":\n      case \"minTime\":\n      case \"maxTime\":\n      case \"timeStep\":\n      case \"minDateByFormat\":\n      case \"maxDateByFormat\":\n      case \"fileMatchesAccept\":\n      case \"urlMatchesAccept\":\n      case \"maxFileBytes\":\n        return { valid: false, message: err.message || \"Invalid value.\" };\n      case \"format\":\n        if (t === \"time\") return { valid: false, message: \"Use HH:mm or HH:mm:ss\" };\n        if (t === \"date\") return { valid: false, message: `Use format ${fieldDef?.constraints?.dateFormat || \"dd.MM.yyyy\"}` };\n        if (t === \"file\") return { valid: false, message: \"Use a valid http(s) URL.\" };\n        return { valid: false, message: \"Bad format.\" };\n      case \"enum\":\n        return { valid: false, message: \"Choose a valid option.\" };\n      case \"type\":\n        return { valid: false, message: `Expected ${schema.type}.` };\n      case \"minimum\":\n        return { valid: false, message: `Must be  ${schema.minimum}.` };\n      case \"maximum\":\n        return { valid: false, message: `Must be  ${schema.maximum}.` };\n      case \"minLength\":\n        return { valid: false, message: `Needs  ${schema.minLength} characters.` };\n      case \"maxLength\":\n        return { valid: false, message: `Allows  ${schema.maxLength} characters.` };\n      case \"pattern\":\n        return { valid: false, message: \"Does not match required pattern.\" };\n      case \"required\":\n        return { valid: false, message: \"This field is required.\" };\n      default:\n        return { valid: false, message: err.message || \"Invalid value.\" };\n    }\n  } catch (e) {\n    return { valid: false, message: \"Validation error.\" };\n  }\n}\n\nexport { DATE_FORMATS };\n","import { render } from \"./StudyDataEntryComponent.vue?vue&type=template&id=fe50acc6&scoped=true\"\nimport script from \"./StudyDataEntryComponent.vue?vue&type=script&lang=js\"\nexport * from \"./StudyDataEntryComponent.vue?vue&type=script&lang=js\"\n\nimport \"./StudyDataEntryComponent.vue?vue&type=style&index=0&id=fe50acc6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fe50acc6\"]])\n\nexport default __exports__","<template>\n  <div class=\"study-creation-container\">\n    <!-- STEP 1 -->\n    <div v-if=\"step === 1\" class=\"new-study-form\">\n      <h2>Step 1: Create a New Study</h2>\n      <div\n        v-for=\"(f, i) in studySchema.filter(f => f.display)\"\n        :key=\"i\"\n        class=\"schema-field-row\"\n      >\n        <BaseTextarea\n          v-if=\"f.type === 'textarea'\"\n          v-model=\"studyData[f.field]\"\n          :id=\"f.field\"\n          :label=\"f.label\"\n          :placeholder=\"f.placeholder\"\n          :required=\"f.required\"\n          :disabled=\"f.disabled\"\n          :error=\"fieldError(f, studyData[f.field])\"\n        />\n        <BaseSelectField\n          v-else-if=\"f.type === 'select'\"\n          v-model=\"studyData[f.field]\"\n          :id=\"f.field\"\n          :label=\"f.label\"\n          :options=\"f.options\"\n          :placeholder=\"f.placeholder\"\n          :required=\"f.required\"\n          :disabled=\"f.disabled\"\n          :error=\"fieldError(f, studyData[f.field])\"\n        />\n        <BaseNumberField\n          v-else-if=\"f.type === 'number'\"\n          v-model=\"studyData[f.field]\"\n          :id=\"f.field\"\n          :label=\"f.label\"\n          :placeholder=\"f.placeholder\"\n          :required=\"f.required\"\n          :disabled=\"f.disabled\"\n          :error=\"fieldError(f, studyData[f.field])\"\n        />\n        <BaseDateField\n          v-else-if=\"f.type === 'date'\"\n          v-model=\"studyData[f.field]\"\n          :id=\"f.field\"\n          :label=\"f.label\"\n          :required=\"f.required\"\n          :disabled=\"f.disabled\"\n          :error=\"fieldError(f, studyData[f.field])\"\n          :min=\"f.min\"\n          :max=\"f.max\"\n        />\n        <BaseTextField\n          v-else\n          v-model=\"studyData[f.field]\"\n          :id=\"f.field\"\n          :label=\"f.label\"\n          :placeholder=\"f.placeholder\"\n          :required=\"f.required\"\n          :disabled=\"f.disabled\"\n          :error=\"fieldError(f, studyData[f.field])\"\n        />\n      </div>\n      <div class=\"form-actions\">\n        <button\n          type=\"button\"\n          @click=\"goToStudyManagement\"\n          class=\"btn-option\"\n        >\n          Back\n        </button>\n        <button\n          type=\"button\"\n          @click=\"validateStudy\"\n          class=\"btn-option\"\n        >\n          Next\n        </button>\n      </div>\n    </div>\n\n    <!-- STEP 2 -->\n    <div v-if=\"step === 2\" class=\"new-study-form\">\n      <GroupForm :schema=\"groupSchema\" v-model=\"groupData\" />\n      <div class=\"form-actions\">\n        <button @click=\"step = 1\" class=\"btn-option\">Back</button>\n        <button @click=\"checkGroups\" class=\"btn-option\">Next</button>\n      </div>\n    </div>\n\n    <!-- STEP 3 -->\n    <div v-if=\"step === 3\" class=\"new-study-form\">\n      <h2>Step 3: Subject Setup</h2>\n      <SubjectForm\n        v-model:subjectCount=\"subjectCount\"\n        v-model:assignmentMethod=\"assignmentMethod\"\n      />\n      <div class=\"form-actions\">\n        <button @click=\"step = 2\" class=\"btn-option\">Back</button>\n        <button @click=\"checkSubjectsSetup\" class=\"btn-option\">Next</button>\n      </div>\n    </div>\n\n    <!-- STEP 4 -->\n    <div v-if=\"step === 4 && assignmentMethod !== 'Skip'\" class=\"new-study-form\">\n      <SubjectAssignmentForm\n        :subjects=\"subjectData\"\n        :groupData=\"groupData\"\n        v-model:subjects=\"subjectData\"\n      />\n      <div class=\"form-actions\">\n        <button @click=\"step = 3\" class=\"btn-option\">Back</button>\n        <button @click=\"checkSubjectsAssigned\" class=\"btn-option\">Next</button>\n      </div>\n    </div>\n\n    <!-- STEP 5 -->\n    <div v-if=\"step === 5\" class=\"new-study-form\">\n      <VisitForm :schema=\"visitSchema\" v-model=\"visitData\" />\n      <div class=\"form-actions\">\n        <button\n          @click=\"step = (assignmentMethod === 'Skip' ? 3 : 4)\"\n          class=\"btn-option\"\n        >\n          Back\n        </button>\n        <button @click=\"checkVisits\" class=\"btn-option\">Finish</button>\n      </div>\n    </div>\n  </div>\n\n  <div v-if=\"showDialog\" class=\"dialog-backdrop\">\n    <div class=\"dialog-box\">\n      <p>{{ dialogMessage }}</p>\n      <button @click=\"showDialog = false\" class=\"btn-option\">OK</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, inject } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { useStore } from \"vuex\";\nimport yaml from \"js-yaml\";\n\nimport BaseTextField from \"@/components/forms/BaseTextField.vue\";\nimport BaseTextarea from \"@/components/forms/BaseTextarea.vue\";\nimport BaseNumberField from \"@/components/forms/BaseNumberField.vue\";\nimport BaseDateField from \"@/components/forms/BaseDateField.vue\";\nimport BaseSelectField from \"@/components/forms/BaseSelectField.vue\";\n\nimport GroupForm from \"./GroupForm.vue\";\nimport VisitForm from \"./VisitForm.vue\";\nimport SubjectForm from \"./SubjectForm.vue\";\nimport SubjectAssignmentForm from \"./SubjectAssignmentForm.vue\";\n\nexport default {\n  name: \"StudyCreationComponent\",\n  components: {\n    BaseTextField,\n    BaseTextarea,\n    BaseNumberField,\n    BaseDateField,\n    BaseSelectField,\n    GroupForm,\n    VisitForm,\n    SubjectForm,\n    SubjectAssignmentForm,\n  },\n  props: {\n    id: { type: [String, Number], required: false }\n  },\n  setup(props) {\n    const router = useRouter();\n    const route = useRoute();\n    const store = useStore();\n    const formatLabel = inject(\"formatLabel\");\n\n    const step = ref(1);\n    const studyData = ref({});\n    const groupData = ref([]);\n    const subjectData = ref([]);\n    const visitData = ref([]);\n    const subjectCount = ref(1);\n    const assignmentMethod = ref(\"Random\");\n    const assignments = ref([]);\n\n    const studySchema = ref([]);\n    const groupSchema = ref([]);\n    const visitSchema = ref([]);\n\n    const showStudyErrors = ref(false);\n    const showDialog = ref(false);\n    const dialogMessage = ref(\"\");\n\n    function fieldError(f, value) {\n      return f.required && showStudyErrors.value && !value\n        ? `${f.label} is required.`\n        : \"\";\n    }\n\n    async function loadYaml(path, schemaRef) {\n      const res = await fetch(path);\n      const doc = yaml.load(await res.text());\n      const cls = Object.keys(doc.classes)[0];\n      const attrs = doc.classes[cls].attributes;\n      schemaRef.value = Object.entries(attrs).map(([n, d]) => {\n        let type = d.widget === \"textarea\" ? \"textarea\" : \"text\";\n        const r = (d.range || \"\").toLowerCase();\n        if (r === \"date\" || r === \"datetime\") type = \"date\";\n        if (r === \"integer\" || r === \"decimal\") type = \"number\";\n        if (d.enum) type = \"select\";\n        return {\n          field: n,\n          label: formatLabel(n),\n          placeholder: d.description || formatLabel(n),\n          type,\n          required: !!d.required,\n          disabled: !!d.disabled,\n          display: d.display !== false,\n          options: d.enum || [],\n          skip: d.skip || {}\n        };\n      });\n    }\n\n    function initializeAssignments(models, visits, groups) {\n      return Array(models.length).fill().map(() =>\n        Array(visits.length).fill().map(() =>\n          Array(groups.length).fill(false)\n        )\n      );\n    }\n\n    function validateStudy() {\n      showStudyErrors.value = true;\n      const hasMissing = studySchema.value.some(f =>\n        f.required && !studyData.value[f.field]\n      );\n      if (hasMissing) return;\n\n      showStudyErrors.value = false;\n      const typeField = studySchema.value.find(f => f.field === \"type\");\n      const skipConfig = typeField?.skip || {};\n      const selected = studyData.value.type;\n      const skips = skipConfig[selected] || [];\n\n      const payload = {\n        study: studyData.value,\n        groups: [],\n        visits: [],\n        assignments: assignments.value\n      };\n\n      if (skips.includes(\"groups\") && skips.includes(\"visits\")) {\n        store.commit(\"setStudyDetails\", payload);\n        router.push({ name: \"CreateFormScratch\", params: { assignments: assignments.value } });\n      } else {\n        store.commit(\"setStudyDetails\", payload);\n        step.value = 2;\n      }\n    }\n\n    function checkGroups() {\n      const hasErrors = groupData.value.some(g =>\n        groupSchema.value.some(f => f.required && !g[f.field])\n      );\n      if (hasErrors) return;\n\n      // Reinitialize assignments if groups change\n      if (assignments.value.length > 0 && assignments.value[0]?.[0]?.length !== groupData.value.length) {\n        assignments.value = initializeAssignments(studyData.value.selectedModels || [], visitData.value, groupData.value);\n      }\n\n      store.commit(\"setStudyDetails\", {\n        study: studyData.value,\n        groups: groupData.value,\n        visits: [],\n        assignments: assignments.value\n      });\n      step.value = 3;\n    }\n\n    function checkSubjectsSetup() {\n      if (!subjectCount.value || !assignmentMethod.value) {\n        dialogMessage.value = \"Please provide subject count and assignment method.\";\n        showDialog.value = true;\n        return;\n      }\n\n      const editId = props.id || route.params.id;\n      const N = subjectCount.value;\n      const prefix = (studyData.value.title || \"ST\")\n        .replace(/[^A-Za-z\\s]/g, \"\")\n        .trim()\n        .split(/\\s+/)\n        .map(w => w[0]?.toUpperCase() || \"\")\n        .join(\"\") || \"ST\";\n      const groupNames = groupData.value.map(g => g.name || g.label || \"Unnamed\");\n\n      // If editing and subjectData is populated, adjust to new subjectCount\n      if (editId && subjectData.value.length > 0) {\n        const currentCount = subjectData.value.length;\n        if (N === currentCount) {\n          // No change in count, keep existing assignments\n          step.value = assignmentMethod.value === \"Skip\" ? 5 : 4;\n          return;\n        } else if (N > currentCount) {\n          // Add new subjects with empty or random assignments\n          const additionalSubjects = Array(N - currentCount).fill().map((_, idx) => ({\n            id: `SUBJ-${prefix}-${String(currentCount + idx + 1).padStart(3, \"0\")}`,\n            group: assignmentMethod.value === \"Random\" && groupNames.length > 0\n              ? groupNames[Math.floor(Math.random() * groupNames.length)]\n              : \"\"\n          }));\n          subjectData.value = [...subjectData.value, ...additionalSubjects];\n        } else {\n          // Remove excess subjects\n          subjectData.value = subjectData.value.slice(0, N);\n        }\n      } else {\n        // New study: generate assignments\n        let assignments = [];\n        if (assignmentMethod.value === \"Random\" && groupNames.length > 0) {\n          const G = groupNames.length;\n          const base = Math.floor(N / G), rem = N % G;\n          const idx = Array.from({ length: G }, (_, i) => i);\n          for (let i = G - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [idx[i], idx[j]] = [idx[j], idx[i]];\n          }\n          const extra = new Set(idx.slice(0, rem));\n          for (let gi = 0; gi < G; gi++) {\n            const cnt = base + (extra.has(gi) ? 1 : 0);\n            for (let k = 0; k < cnt; k++) {\n              assignments.push(groupNames[gi]);\n            }\n          }\n          for (let i = assignments.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [assignments[i], assignments[j]] = [assignments[j], assignments[i]];\n          }\n        } else {\n          assignments = Array(N).fill(\"\");\n        }\n\n        subjectData.value = assignments.map((grp, idx) => ({\n          id: `SUBJ-${prefix}-${String(idx + 1).padStart(3, \"0\")}`,\n          group: grp\n        }));\n      }\n\n      console.log(\"subjects\", subjectData.value);\n      step.value = assignmentMethod.value === \"Skip\" ? 5 : 4;\n    }\n\n    function checkSubjectsAssigned() {\n      if (subjectData.value.some(s => !s.group)) {\n        dialogMessage.value = \"All subjects must have a group.\";\n        showDialog.value = true;\n        return;\n      }\n      step.value = 5;\n    }\n\n    function checkVisits() {\n      const hasErrors = visitData.value.some(v =>\n        visitSchema.value.some(f => f.required && !v[f.field])\n      );\n      if (hasErrors) return;\n\n      store.commit(\"setStudyDetails\", {\n        study: studyData.value,\n        groups: groupData.value,\n        subjectCount: subjectCount.value,\n        assignmentMethod: assignmentMethod.value,\n        subjects: subjectData.value,\n        visits: visitData.value,\n        assignments: assignments.value\n      });\n\n      router.push({ name: \"CreateFormScratch\", params: { assignments: assignments.value } });\n    }\n\n    function goToStudyManagement() {\n      router.push({ name: \"Dashboard\", query: { openStudies: \"false\" } });\n    }\n\n    function handleAssignmentUpdated({ mIdx, vIdx, gIdx, checked }) {\n      assignments.value[mIdx][vIdx][gIdx] = checked;\n    }\n\n    onMounted(async () => {\n      const editId = props.id || route.params.id;\n      if (!editId) {\n        store.commit(\"resetStudyDetails\");\n      }\n      await loadYaml(\"/study_schema.yaml\", studySchema);\n      await loadYaml(\"/group_schema.yaml\", groupSchema);\n      await loadYaml(\"/visit_schema.yaml\", visitSchema);\n\n      const details = store.state.studyDetails;\n      if (editId && details && details.study) {\n        studyData.value = { ...details.study };\n        groupData.value = Array.isArray(details.groups) ? [...details.groups] : [];\n        subjectCount.value = details.subjectCount ?? subjectCount.value;\n        assignmentMethod.value = details.assignmentMethod ?? assignmentMethod.value;\n        subjectData.value = Array.isArray(details.subjects) ? [...details.subjects] : [];\n        visitData.value = Array.isArray(details.visits) ? [...details.visits] : [];\n        assignments.value = Array.isArray(details.assignments)\n          ? JSON.parse(JSON.stringify(details.assignments)) // Deep copy\n          : initializeAssignments(details.selectedModels || [], details.visits || [], details.groups || []);\n        step.value = 1;\n      } else {\n        studySchema.value.forEach(f => studyData.value[f.field] = \"\");\n        groupData.value = [];\n        subjectData.value = [];\n        visitData.value = [];\n        assignments.value = [];\n      }\n    });\n\n    return {\n      step,\n      studyData,\n      groupData,\n      subjectData,\n      visitData,\n      subjectCount,\n      assignmentMethod,\n      assignments,\n      studySchema,\n      groupSchema,\n      visitSchema,\n      showDialog,\n      dialogMessage,\n      fieldError,\n      validateStudy,\n      checkGroups,\n      checkSubjectsSetup,\n      checkSubjectsAssigned,\n      checkVisits,\n      goToStudyManagement,\n      handleAssignmentUpdated\n    };\n  }\n};\n</script>\n\n<style scoped>\n.study-creation-container {\n  max-width: 800px;\n  margin: 0 auto;\n  font-family: Arial, sans-serif;\n}\n.new-study-form {\n  padding: 20px;\n  background: #f9f9f9;\n  border-radius: 8px;\n  margin-top: 20px;\n}\n.schema-field-row {\n  margin-bottom: 1rem;\n}\n.form-actions {\n  margin-top: 1.5rem;\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n}\n.btn-option {\n  padding: 10px 20px;\n  background: #eee;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  cursor: pointer;\n}\n.dialog-backdrop {\n  position: fixed;\n  top: 0; left: 0; width: 100%; height: 100%;\n  background: rgba(0,0,0,0.5);\n  display: flex; align-items: center; justify-content: center;\n  z-index: 1000;\n}\n.dialog-box {\n  background: white;\n  padding: 20px 30px;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.25);\n  text-align: center;\n}\n</style>","<template>\n  <div>\n    <h2>Step 2: Define Groups/Cohorts</h2>\n\n    <BaseNumberField\n      v-model=\"count\"\n      id=\"numGroups\"\n      label=\"Number of Groups\"\n      :min=\"1\"\n      :error=\"errors.count\"\n    />\n\n    <div\n      v-for=\"(group, idx) in groups\"\n      :key=\"idx\"\n      class=\"panel\"\n    >\n      <div class=\"panel-header\" @click=\"togglePanel(idx)\">\n        <span>Group {{ idx + 1 }}</span>\n        <span v-if=\"panelErrors[idx]\" class=\"error-badge\">\n          {{ panelErrors[idx] }} error(s)\n        </span>\n        <span class=\"toggle-icon\">\n          {{ activePanels.includes(idx) ? '' : '' }}\n        </span>\n      </div>\n      <div v-show=\"activePanels.includes(idx)\" class=\"panel-body\">\n        <div\n          v-for=\"f in schema\"\n          :key=\"f.field\"\n          class=\"schema-field-row\"\n        >\n          <component\n            :is=\"fieldComponent(f)\"\n            v-model=\"group[f.field]\"\n            :id=\"`group-${idx}-${f.field}`\"\n            :label=\"f.label\"\n            :placeholder=\"f.placeholder\"\n            :required=\"f.required\"\n            :options=\"f.options\"\n            :error=\"fieldError(f, group[f.field])\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, watch, computed } from \"vue\";\nimport BaseTextarea    from \"@/components/forms/BaseTextarea.vue\";\nimport BaseSelectField from \"@/components/forms/BaseSelectField.vue\";\nimport BaseNumberField from \"@/components/forms/BaseNumberField.vue\";\nimport BaseDateField   from \"@/components/forms/BaseDateField.vue\";\nimport BaseTextField   from \"@/components/forms/BaseTextField.vue\";\n\nexport default {\n  name: \"GroupForm\",\n  components: {\n    BaseTextarea,\n    BaseSelectField,\n    BaseNumberField,\n    BaseDateField,\n    BaseTextField,\n  },\n  props: {\n    schema:     { type: Array, default: () => [] },\n    modelValue: { type: Array, default: () => [] },\n  },\n  emits: [\"update:modelValue\", \"validate\"],\n  setup(props, { emit }) {\n    const count        = ref(props.modelValue.length || 1);\n    const activePanels = ref([]);\n    const groups       = ref([...props.modelValue]);\n\n    // sync parentlocal\n    watch(\n      () => props.modelValue,\n      v => {\n        groups.value = [...v];\n        count.value  = v.length;\n      },\n      { deep: true }\n    );\n\n    // build panels immediately & on count change\n    watch(\n      count,\n      () => resizeGroups(),\n      { immediate: true }\n    );\n\n    function resizeGroups() {\n      const n = Math.max(1, count.value);\n      const arr = Array.from({ length: n }, (_, i) =>\n        groups.value[i] != null\n          ? groups.value[i]\n          : Object.fromEntries(props.schema.map(f => [f.field, \"\"]))\n      );\n      groups.value = arr;\n      emit(\"update:modelValue\", arr);\n      // open them all:\n      activePanels.value = arr.map((_, i) => i);\n      emit(\"validate\");\n    }\n\n    function togglePanel(idx) {\n      const i = activePanels.value.indexOf(idx);\n      if (i >= 0) activePanels.value.splice(i, 1);\n      else         activePanels.value.push(idx);\n    }\n\n    const panelErrors = computed(() =>\n      groups.value.map(g =>\n        props.schema.reduce(\n          (sum, f) => sum + (f.required && !g[f.field] ? 1 : 0),\n          0\n        )\n      )\n    );\n    const errors = computed(() => ({\n      count: count.value < 1 ? \"Must have at least one group.\" : \"\"\n    }));\n\n    function fieldComponent(f) {\n      switch (f.type) {\n        case \"textarea\": return BaseTextarea;\n        case \"select\":   return BaseSelectField;\n        case \"number\":   return BaseNumberField;\n        case \"date\":     return BaseDateField;\n        default:         return BaseTextField;\n      }\n    }\n    function fieldError(f, val) {\n      return f.required && !val ? `${f.label} is required.` : \"\";\n    }\n\n    return {\n      count, groups, activePanels,\n      panelErrors, errors,\n      togglePanel, fieldComponent, fieldError\n    };\n  }\n};\n</script>\n\n<style scoped>\n.panel {\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  margin: 1rem 0;\n}\n.panel-header {\n  background: #f1f1f1;\n  padding: 0.75rem;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.panel-body {\n  padding: 1rem;\n  border-top: 1px solid #ddd;\n}\n.error-badge {\n  background: #fdd;\n  color: #a00;\n  border-radius: 12px;\n  padding: 2px 6px;\n  font-size: 0.8em;\n}\n.toggle-icon {\n  margin-left: 1rem;\n}\n.schema-field-row {\n  margin-bottom: 1rem;\n}\n</style>\n","import { render } from \"./GroupForm.vue?vue&type=template&id=252f5d9d&scoped=true\"\nimport script from \"./GroupForm.vue?vue&type=script&lang=js\"\nexport * from \"./GroupForm.vue?vue&type=script&lang=js\"\n\nimport \"./GroupForm.vue?vue&type=style&index=0&id=252f5d9d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-252f5d9d\"]])\n\nexport default __exports__","<template>\n  <div>\n    <h2>Step 5: Define Visits</h2>\n\n    <!-- Number of Visits -->\n    <BaseNumberField\n      v-model=\"count\"\n      id=\"numVisits\"\n      label=\"Number of Visits\"\n      :min=\"1\"\n      :error=\"errors.count\"\n    />\n\n    <!-- Custom Accordion Panels -->\n    <div\n      v-for=\"(visit, idx) in visits\"\n      :key=\"idx\"\n      class=\"panel\"\n    >\n      <div class=\"panel-header\" @click=\"togglePanel(idx)\">\n        <span>Visit {{ idx + 1 }}</span>\n        <span v-if=\"panelErrors[idx]\" class=\"error-badge\">\n          {{ panelErrors[idx] }} error(s)\n        </span>\n        <span class=\"toggle-icon\">\n          {{ activePanels.includes(idx) ? '' : '' }}\n        </span>\n      </div>\n\n      <div v-show=\"activePanels.includes(idx)\" class=\"panel-body\">\n        <div\n          v-for=\"f in schema\"\n          :key=\"f.field\"\n          class=\"schema-field-row\"\n        >\n          <component\n            :is=\"fieldComponent(f)\"\n            v-model=\"visit[f.field]\"\n            :id=\"`visit-${idx}-${f.field}`\"\n            :label=\"f.label\"\n            :placeholder=\"f.placeholder\"\n            :required=\"f.required\"\n            :options=\"f.options\"\n            :error=\"fieldError(f, visit[f.field])\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, watch, computed } from \"vue\";\nimport BaseTextarea    from \"@/components/forms/BaseTextarea.vue\";\nimport BaseSelectField from \"@/components/forms/BaseSelectField.vue\";\nimport BaseNumberField from \"@/components/forms/BaseNumberField.vue\";\nimport BaseDateField   from \"@/components/forms/BaseDateField.vue\";\nimport BaseTextField   from \"@/components/forms/BaseTextField.vue\";\n\nexport default {\n  name: \"VisitForm\",\n  components: {\n    BaseTextarea,\n    BaseSelectField,\n    BaseNumberField,\n    BaseDateField,\n    BaseTextField,\n  },\n  props: {\n    schema:     { type: Array, default: () => [] },\n    modelValue: { type: Array, default: () => [] },\n  },\n  emits: [\"update:modelValue\", \"validate\"],\n  setup(props, { emit }) {\n    // how many visits\n    const count = ref(props.modelValue.length || 1);\n\n    // which panels are open\n    const activePanels = ref([]);\n\n    // local mirror of modelValue\n    const visits = ref([...props.modelValue]);\n\n    // sync if parent overwrites modelValue\n    watch(\n      () => props.modelValue,\n      v => {\n        visits.value = [...v];\n        count.value = v.length;\n      },\n      { deep: true }\n    );\n\n    // rebuild panels whenever `count` changes, and on init\n    watch(\n      count,\n      () => resizeVisits(),\n      { immediate: true }\n    );\n\n    function resizeVisits() {\n      const n = Math.max(1, count.value);\n      const arr = Array.from({ length: n }, (_, i) =>\n        visits.value[i] != null\n          ? visits.value[i]\n          : Object.fromEntries(props.schema.map(f => [f.field, \"\"]))\n      );\n      visits.value = arr;\n      emit(\"update:modelValue\", arr);\n\n      // open all panels by default\n      activePanels.value = arr.map((_, i) => i);\n\n      // notify parent to re-validate\n      emit(\"validate\");\n    }\n\n    function togglePanel(idx) {\n      const i = activePanels.value.indexOf(idx);\n      if (i >= 0) activePanels.value.splice(i, 1);\n      else activePanels.value.push(idx);\n    }\n\n    // count missing fields per panel\n    const panelErrors = computed(() =>\n      visits.value.map(v =>\n        props.schema.reduce(\n          (sum, f) => sum + (f.required && !v[f.field] ? 1 : 0),\n          0\n        )\n      )\n    );\n\n    // error on the count field\n    const errors = computed(() => ({\n      count: count.value < 1 ? \"Must have at least one visit.\" : \"\"\n    }));\n\n    function fieldComponent(f) {\n      switch (f.type) {\n        case \"textarea\": return BaseTextarea;\n        case \"select\":   return BaseSelectField;\n        case \"number\":   return BaseNumberField;\n        case \"date\":     return BaseDateField;\n        default:         return BaseTextField;\n      }\n    }\n\n    function fieldError(f, val) {\n      return f.required && !val ? `${f.label} is required.` : \"\";\n    }\n\n    return {\n      count,\n      visits,\n      activePanels,\n      panelErrors,\n      errors,\n      togglePanel,\n      fieldComponent,\n      fieldError,\n    };\n  }\n};\n</script>\n\n<style scoped>\n.panel {\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  margin: 1rem 0;\n}\n.panel-header {\n  background: #f1f1f1;\n  padding: 0.75rem;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.panel-body {\n  padding: 1rem;\n  border-top: 1px solid #ddd;\n}\n.error-badge {\n  background: #fdd;\n  color: #a00;\n  border-radius: 12px;\n  padding: 2px 6px;\n  font-size: 0.8em;\n  margin-left: 8px;\n}\n.toggle-icon {\n  font-size: 0.9em;\n  margin-left: 1rem;\n}\n.schema-field-row {\n  margin-bottom: 1rem;\n}\n</style>\n","import { render } from \"./VisitForm.vue?vue&type=template&id=190b64e1&scoped=true\"\nimport script from \"./VisitForm.vue?vue&type=script&lang=js\"\nexport * from \"./VisitForm.vue?vue&type=script&lang=js\"\n\nimport \"./VisitForm.vue?vue&type=style&index=0&id=190b64e1&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-190b64e1\"]])\n\nexport default __exports__","<template>\n  <BaseNumberField\n  :modelValue=\"subjectCount\"\n  @update:modelValue=\"updateCount\"\n  id=\"subject-count\"\n  label=\"Number of Subjects\"\n  placeholder=\"e.g. 20\"\n  :required=\"true\"\n/>\n\n<BaseSelectField\n  :modelValue=\"assignmentMethod\"\n  @update:modelValue=\"updateMethod\"\n  id=\"assignment-method\"\n  label=\"Assignment Method\"\n  :options=\"['Random', 'Manual', 'Skip']\"\n  placeholder=\"Select assignment method\"\n  :required=\"true\"\n/>\n</template>\n\n<script>\nimport { watch } from \"vue\";\nimport BaseNumberField from \"@/components/forms/BaseNumberField.vue\";\nimport BaseSelectField from \"@/components/forms/BaseSelectField.vue\";\n\nexport default {\n  name: \"SubjectForm\",\n  components: { BaseNumberField, BaseSelectField },\n  props: {\n    subjectCount: Number,\n    assignmentMethod: String,\n  },\n  emits: [\"update:subjectCount\", \"update:assignmentMethod\"],\n  setup(props, { emit }) {\n    watch(() => props.subjectCount, (val) => {\n      if (val == null) emit(\"update:subjectCount\", 1);\n    }, { immediate: true });\n\n    watch(() => props.assignmentMethod, (val) => {\n      if (!val) emit(\"update:assignmentMethod\", \"random\");\n    }, { immediate: true });\n\n    const updateCount = (val) => emit(\"update:subjectCount\", val);\n    const updateMethod = (val) => emit(\"update:assignmentMethod\", val);\n\n    return { updateCount, updateMethod };\n  }\n};\n</script>\n\n\n<style scoped>\n.form-actions {\n  margin-top: 1.5rem;\n  text-align: right;\n}\n.btn-option {\n  padding: 10px 20px;\n  background: #4f46e5;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n.btn-option:hover {\n  background: #4338ca;\n}\n</style>\n","import { render } from \"./SubjectForm.vue?vue&type=template&id=c9b14630&scoped=true\"\nimport script from \"./SubjectForm.vue?vue&type=script&lang=js\"\nexport * from \"./SubjectForm.vue?vue&type=script&lang=js\"\n\nimport \"./SubjectForm.vue?vue&type=style&index=0&id=c9b14630&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c9b14630\"]])\n\nexport default __exports__","<template>\n  <div class=\"new-study-form\">\n    <h2>Step 4: Assign Subjects</h2>\n\n    <table class=\"assignment-table\">\n      <thead>\n        <tr>\n          <th>Subject ID</th>\n          <th v-for=\"group in groupNames\" :key=\"group\">{{ group }}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(subject, rowIndex) in subjects\" :key=\"subject.id\">\n          <td>{{ subject.id }}</td>\n          <td v-for=\"(group, colIndex) in groupNames\" :key=\"colIndex\">\n            <input\n              type=\"radio\"\n              :name=\"'group-' + rowIndex\"\n              :value=\"group\"\n              v-model=\"subject.group\"\n              @change=\"emitSubjects\"\n            />\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport { computed } from \"vue\";\n\nexport default {\n  name: \"SubjectAssignmentForm\",\n  props: {\n    subjects: { type: Array, required: true },\n    groupData: { type: Array, required: true },\n  },\n  emits: [\"update:subjects\"],\n  setup(props, { emit }) {\n    const groupNames = computed(() =>\n      props.groupData.map((g) => g.name || g.label || \"Unnamed\")\n    );\n\n    const emitSubjects = () => {\n      emit(\"update:subjects\", props.subjects);\n    };\n\n    return { groupNames, emitSubjects };\n  },\n};\n</script>\n\n<style scoped>\n.assignment-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 1rem;\n}\n\n.assignment-table th,\n.assignment-table td {\n  padding: 8px 12px;\n  border: 1px solid #ccc;\n  text-align: center;\n}\n\n.assignment-table th {\n  background-color: #f0f0f0;\n}\n\n.assignment-table input[type=\"radio\"] {\n  transform: scale(1.2);\n  cursor: pointer;\n}\n</style>\n","import { render } from \"./SubjectAssignmentForm.vue?vue&type=template&id=001947b6&scoped=true\"\nimport script from \"./SubjectAssignmentForm.vue?vue&type=script&lang=js\"\nexport * from \"./SubjectAssignmentForm.vue?vue&type=script&lang=js\"\n\nimport \"./SubjectAssignmentForm.vue?vue&type=style&index=0&id=001947b6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-001947b6\"]])\n\nexport default __exports__","import { render } from \"./StudyCreationComponent.vue?vue&type=template&id=72ba070a&scoped=true\"\nimport script from \"./StudyCreationComponent.vue?vue&type=script&lang=js\"\nexport * from \"./StudyCreationComponent.vue?vue&type=script&lang=js\"\n\nimport \"./StudyCreationComponent.vue?vue&type=style&index=0&id=72ba070a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-72ba070a\"]])\n\nexport default __exports__","<template>\n  <div class=\"study-view-layout\">\n    <header class=\"sv-header\">\n      <button class=\"btn-minimal back-btn\" @click=\"goBackToDashboard\" aria-label=\"Back to Dashboard\">Back</button>\n      <div class=\"title-wrap\">\n        <h1 class=\"sv-title\">{{ studyMeta.study_name || 'Study' }}</h1>\n        <p class=\"sv-subtitle\" v-if=\"studyMeta.study_description\">{{ studyMeta.study_description }}</p>\n      </div>\n      <div class=\"header-spacer\" aria-hidden=\"true\"></div>\n    </header>\n\n    <div class=\"sv-content card\">\n      <!-- Vertical Tabs -->\n      <aside class=\"v-tabs\" role=\"tablist\" aria-orientation=\"vertical\">\n        <button\n          v-for=\"t in tabs\"\n          :key=\"t.key\"\n          :class=\"['v-tab', { active: activeTab === t.key }]\"\n          @click=\"activeTab = t.key\"\n          role=\"tab\"\n          :aria-selected=\"activeTab === t.key\"\n        >\n          {{ t.label }}\n        </button>\n      </aside>\n\n      <!-- Panels -->\n      <section class=\"v-panel\">\n        <!-- META-DATA -->\n        <div v-if=\"activeTab === 'meta'\">\n          <h2 class=\"panel-title center\">Meta-data</h2>\n\n          <!-- Core meta (only show fields that have values) -->\n          <div class=\"meta-grid\">\n            <div class=\"meta-item\" v-if=\"hasValue(studyMeta.id)\">\n              <div class=\"meta-label\">Study ID</div>\n              <div class=\"meta-value monospace\">{{ studyMeta.id }}</div>\n            </div>\n            <div class=\"meta-item\" v-if=\"hasValue(studyMeta.study_name)\">\n              <div class=\"meta-label\">Name</div>\n              <div class=\"meta-value\">{{ studyMeta.study_name }}</div>\n            </div>\n            <div class=\"meta-item\" v-if=\"hasValue(studyMeta.study_description)\">\n              <div class=\"meta-label\">Description</div>\n              <div class=\"meta-value\">{{ studyMeta.study_description }}</div>\n            </div>\n            <div class=\"meta-item\" v-if=\"hasValue(studyMeta.created_by_display)\">\n              <div class=\"meta-label\">Created By</div>\n              <div class=\"meta-value\">{{ studyMeta.created_by_display }}</div>\n            </div>\n            <div class=\"meta-item\" v-if=\"hasValue(studyMeta.created_at)\">\n              <div class=\"meta-label\">Created At</div>\n              <div class=\"meta-value\">{{ formatDateTime(studyMeta.created_at) }}</div>\n            </div>\n            <div class=\"meta-item\" v-if=\"hasValue(studyMeta.updated_at)\">\n              <div class=\"meta-label\">Updated At</div>\n              <div class=\"meta-value\">{{ formatDateTime(studyMeta.updated_at) }}</div>\n            </div>\n          </div>\n\n          <!-- Study Data -->\n          <div class=\"subsection\">\n            <h3 class=\"sub-title\">Study Data</h3>\n            <div v-if=\"studyKVEntries.length\" class=\"kv-grid\">\n              <div class=\"kv-row\" v-for=\"entry in studyKVEntries\" :key=\"entry[0]\">\n                <div class=\"kv-key\">{{ prettyLabel(entry[0]) }}</div>\n                <div class=\"kv-val\">{{ formatAny(entry[1]) }}</div>\n              </div>\n            </div>\n            <div v-else class=\"empty-state\">No additional study data.</div>\n          </div>\n\n          <!-- Groups -->\n          <div class=\"subsection\">\n            <h3 class=\"sub-title\">Groups</h3>\n            <div v-if=\"groups && groups.length\" class=\"list-grid\">\n              <div class=\"list-card\" v-for=\"(g, gi) in groups\" :key=\"gi\">\n                <div class=\"kv-row\" v-for=\"entry in objectEntriesFiltered(g)\" :key=\"entry[0]\">\n                  <div class=\"kv-key\">{{ prettyLabel(entry[0]) }}</div>\n                  <div class=\"kv-val\">{{ formatAny(entry[1]) }}</div>\n                </div>\n              </div>\n            </div>\n            <div v-else class=\"empty-state\">No groups defined.</div>\n          </div>\n\n          <!-- Visits -->\n          <div class=\"subsection\">\n            <h3 class=\"sub-title\">Visits</h3>\n            <div v-if=\"visits && visits.length\" class=\"list-grid\">\n              <div class=\"list-card\" v-for=\"(v, vi) in visits\" :key=\"vi\">\n                <div class=\"kv-row\" v-for=\"entry in objectEntriesFiltered(v)\" :key=\"entry[0]\">\n                  <div class=\"kv-key\">{{ prettyLabel(entry[0]) }}</div>\n                  <div class=\"kv-val\">{{ formatAny(entry[1]) }}</div>\n                </div>\n              </div>\n            </div>\n            <div v-else class=\"empty-state\">No visits defined.</div>\n          </div>\n\n          <!-- Subject Assignment -->\n          <div class=\"subsection\">\n            <h3 class=\"sub-title\">Subject Assignment</h3>\n            <div class=\"kv-grid\">\n              <div class=\"kv-row\" v-if=\"hasValue(studyData.assignmentMethod)\">\n                <div class=\"kv-key\">Assignment Method</div>\n                <div class=\"kv-val\">{{ studyData.assignmentMethod }}</div>\n              </div>\n              <div class=\"kv-row\" v-if=\"hasValue(studyData.subjectCount)\">\n                <div class=\"kv-key\">Subjects Planned</div>\n                <div class=\"kv-val\">{{ studyData.subjectCount }}</div>\n              </div>\n              <div class=\"kv-row\" v-if=\"Array.isArray(subjects)\">\n                <div class=\"kv-key\">Subjects Enrolled</div>\n                <div class=\"kv-val\">{{ subjects.length }}</div>\n              </div>\n              <div class=\"kv-row\" v-if=\"assignmentSize\">\n                <div class=\"kv-key\">Assignment Matrix</div>\n                <div class=\"kv-val\">\n                  {{ assignmentSize.m }}  {{ assignmentSize.v }}  {{ assignmentSize.g }}\n                  <span class=\"muted\">(models  visits  groups)</span>\n                </div>\n              </div>\n            </div>\n\n            <!-- Per-Subject Group mapping (PI/Admin only) -->\n            <div v-if=\"isPIOrAdmin\" class=\"per-subject-block\">\n              <h4 class=\"per-subject-title\">Per-Subject Group Assignment</h4>\n              <div v-if=\"subjectAssignments.length\" class=\"ps-table-wrap\">\n                <table class=\"ps-table\" aria-label=\"Per-subject group assignment\">\n                  <thead>\n                    <tr>\n                      <th scope=\"col\">Subject ID</th>\n                      <th scope=\"col\">Assigned Group</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr v-for=\"row in subjectAssignments\" :key=\"row.subjectId\">\n                      <td class=\"monospace\">{{ row.subjectId }}</td>\n                      <td>{{ row.groupName || '' }}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <div v-else class=\"empty-state\">No subjects enrolled yet.</div>\n            </div>\n          </div>\n\n          <!-- Template Versions -->\n          <div class=\"subsection\">\n            <h3 class=\"sub-title\">Template Versions</h3>\n            <div class=\"versions-wrap\">\n              <div v-if=\"versionsLoading\" class=\"muted\">Loading versions</div>\n              <div v-else-if=\"!versions.length\" class=\"empty-state\">No template versions yet.</div>\n\n              <div v-else class=\"version-list\">\n                <div class=\"version-card\" v-for=\"(v, idx) in versions\" :key=\"`ver-${v.version}`\">\n                  <div class=\"vc-head\">\n                    <div class=\"vc-title\">\n                      <span class=\"tag\">v{{ v.version }}</span>\n                      <span class=\"vc-date\">{{ formatDateTime(v.created_at) }}</span>\n                      <span v-if=\"idx === versions.length - 1\" class=\"pill ok\">Latest</span>\n                    </div>\n\n                    <div class=\"vc-summary\" v-if=\"v.version > 1\">\n                      <template v-if=\"canShowVersionDetails && versionDiffs[v.version]\">\n                        <span class=\"muted\">Changes from v{{ v.version - 1 }}:</span>\n                        <span class=\"vc-summary-line\">{{ versionDiffs[v.version].summary }}</span>\n                      </template>\n                      <template v-else>\n                        <span class=\"muted\">Changes from previous version are hidden (insufficient permission).</span>\n                      </template>\n                    </div>\n                  </div>\n\n                  <!-- Details -->\n                  <details v-if=\"v.version > 1 && canShowVersionDetails && versionDiffs[v.version]\">\n                    <summary>Show details</summary>\n                    <div class=\"vc-details diff-scroll\">\n                      <TemplateDiffView\n                        :from=\"versionSchemas[v.version - 1]\"\n                        :to=\"versionSchemas[v.version]\"\n                        compact\n                      />\n                    </div>\n                  </details>\n\n                  <div v-else-if=\"v.version === 1\" class=\"muted\">Initial version.</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Edit Study (PI owner or Admin only) -->\n          <div class=\"edit-row\" v-if=\"canEditStudy\">\n            <button class=\"btn-primary\" @click=\"editStudy\">Edit Study</button>\n          </div>\n        </div>\n\n        <!-- DOCUMENTS -->\n        <div v-else-if=\"activeTab === 'docs'\">\n          <h2 class=\"panel-title center\">Study Documents</h2>\n\n          <h3 class=\"sub-title\">Existing Study Attachments</h3>\n          <div v-if=\"studyLevelFiles.length\" class=\"doc-list\">\n            <div v-for=\"doc in studyLevelFiles\" :key=\"doc.id || doc.file_name\" class=\"doc-item\">\n              <div class=\"doc-name\">{{ doc.file_name || doc.name || 'Document' }}</div>\n              <div class=\"doc-meta muted\">\n                {{ doc.storage_option || 'file' }}\n                <span v-if=\"doc.bytes || doc.size\">  </span>\n                <span v-if=\"doc.bytes\">{{ prettyBytes(doc.bytes) }}</span>\n                <span v-else-if=\"doc.size\">{{ prettyBytes(doc.size) }}</span>\n              </div>\n              <div v-if=\"doc.description\" class=\"doc-desc\">{{ doc.description }}</div>\n              <div class=\"doc-path\" :title=\"docPathTooltip(doc)\">\n                <span class=\"label\">On disk:</span>\n                <span class=\"file-path\">{{ docRelativePath(doc) }}</span>\n              </div>\n            </div>\n          </div>\n          <div v-else class=\"empty-state\">No study-level attachments yet.</div>\n\n          <!-- Attach New Study Documents -->\n          <div class=\"subsection\">\n            <h3 class=\"sub-title\">Attach New Study Documents</h3>\n\n            <div class=\"attach-row\">\n              <FieldFileUpload\n                :value=\"attachTempValue\"\n                :constraints=\"{ allowMultipleFiles: true, storagePreference: 'local' }\"\n                :readonly=\"uploading\"\n                stage=\"runtime\"\n                @input=\"onAttachTempChange\"\n                @file-selected=\"onFilesSelected\"\n              />\n            </div>\n\n            <div v-if=\"pendingFiles.length\" class=\"pending-list\">\n              <div class=\"pending-item\" v-for=\"(p, idx) in pendingFiles\" :key=\"p.key\">\n                <div class=\"pi-head\">\n                  <div class=\"pi-name\" :title=\"p.file.name\">{{ p.file.name }}</div>\n                  <div class=\"pi-size\">{{ prettyBytes(p.file.size) }}</div>\n                  <button class=\"icon-inline danger\" type=\"button\" @click=\"removePending(idx)\" title=\"Remove\"></button>\n                </div>\n                <label class=\"pi-desc-label\">Description (optional)</label>\n                <input\n                  class=\"pi-desc-input\"\n                  type=\"text\"\n                  v-model=\"p.description\"\n                  :placeholder=\"'e.g., IRB approval PDF, protocol v2, consent form'\"\n                  :disabled=\"uploading\"\n                />\n              </div>\n            </div>\n\n            <div class=\"attach-actions\">\n              <button class=\"btn-primary\" :disabled=\"!pendingFiles.length || uploading\" @click=\"saveStudyAttachments\">\n                {{ uploading ? 'Saving' : 'Save Attachments' }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- SETTINGS / ACCESS MANAGEMENT -->\n        <div v-else-if=\"activeTab === 'team'\">\n          <h2 class=\"panel-title center\">Study Access Management</h2>\n\n          <div class=\"subsection\">\n            <h3 class=\"sub-title\">Access for this Study</h3>\n\n            <div class=\"table-wrap\">\n              <table class=\"access-table\" aria-label=\"Study access\">\n                <thead>\n                  <tr>\n                    <th>User</th>\n                    <th>Email</th>\n                    <th>Role</th>\n                    <th>Permissions</th>\n                    <th>Granted By</th>\n                    <th>Granted At</th>\n                    <th v-if=\"canManageAccess\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr class=\"owner-row\">\n                    <td class=\"strong\">\n                      {{ studyMeta.created_by_display || 'Owner' }}\n                      <span class=\"tag\">Owner</span>\n                    </td>\n                    <td>{{ studyMeta.created_by_email || '' }}</td>\n                    <td>PI / Admin</td>\n                    <td>\n                      <span class=\"pill ok\">View</span>\n                      <span class=\"pill ok\">Add data</span>\n                      <span class=\"pill ok\">Edit study</span>\n                    </td>\n                    <td>System</td>\n                    <td>{{ formatDateTime(studyMeta.created_at) || '' }}</td>\n                    <td v-if=\"canManageAccess\"></td>\n                  </tr>\n\n                  <tr v-for=\"g in accessList\" :key=\"g.user_id\">\n                    <td class=\"strong\">{{ g.display_name || g.username || g.email || ('User#' + g.user_id) }}</td>\n                    <td>{{ g.email || '' }}</td>\n                    <td>{{ prettyGrantRole(g.role) }}</td>\n                    <td>\n                      <span class=\"pill\" :class=\"g.permissions?.view ? 'ok' : 'muted'\">View</span>\n                      <span class=\"pill\" :class=\"g.permissions?.add_data ? 'ok' : 'muted'\">Add data</span>\n                      <span class=\"pill\" :class=\"g.permissions?.edit_study ? 'ok' : 'muted'\">Edit study</span>\n                    </td>\n                    <td>{{ g.granted_by_display || g.granted_by || '' }}</td>\n                    <td>{{ formatDateTime(g.created_at) || '' }}</td>\n                    <td v-if=\"canManageAccess\">\n                      <button class=\"btn-link danger\" :disabled=\"revokeBusy[g.user_id]\" @click=\"openRevokeDialog(g)\" title=\"Revoke access\">Revoke</button>\n                    </td>\n                  </tr>\n\n                  <tr v-if=\"!accessList.length\">\n                    <td :colspan=\"canManageAccess ? 7 : 6\" class=\"muted center\">No additional users have access.</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <!-- Revoke confirm dialog -->\n          <div v-if=\"confirm.visible\" class=\"modal-backdrop\" role=\"dialog\" aria-modal=\"true\" @click.self=\"cancelRevoke\">\n            <div class=\"modal\" @keydown.esc.prevent=\"cancelRevoke\" tabindex=\"-1\">\n              <h3 class=\"modal-title\">Revoke access?</h3>\n              <p class=\"modal-text\">\n                This will remove access for\n                <span class=\"strong\">\n                  {{ confirm.target?.display_name || confirm.target?.email || ('User#' + confirm.target?.user_id) }}\n                </span>.\n              </p>\n              <div class=\"modal-actions\">\n                <button class=\"btn-minimal\" @click=\"cancelRevoke\">Cancel</button>\n                <button class=\"btn-primary danger\" :disabled=\"revokeBusy[confirm.target?.user_id]\" @click=\"confirmRevoke\">\n                  {{ revokeBusy[confirm.target?.user_id] ? 'Revoking' : 'Revoke' }}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <!-- GRANT FORM -->\n          <div v-if=\"canManageAccess\" class=\"subsection\">\n            <h3 class=\"sub-title\">Grant Access</h3>\n\n            <div class=\"grant-grid\">\n              <div class=\"field\">\n                <label class=\"label\">Select User</label>\n                <select v-model=\"selectedUserId\" class=\"input input-select\">\n                  <option value=\"\" disabled>Select a user</option>\n                  <option v-for=\"u in grantableUsers\" :key=\"u.id\" :value=\"u.id\">\n                    {{ userDisplay(u) }}\n                  </option>\n                </select>\n                <div class=\"help\" v-if=\"!allUsers.length\">No users found to grant.</div>\n              </div>\n\n              <div class=\"field\">\n                <label class=\"label\">Permission</label>\n                <select v-model=\"permissionPreset\" class=\"input input-select\" disabled>\n                  <option value=\"data-entry\">Add data only</option>\n                </select>\n                <div class=\"help\">Adds the user with ability to submit data to this study; no editing.</div>\n              </div>\n\n              <div class=\"actions\">\n                <button class=\"btn-primary\" :disabled=\"!selectedUserId || granting\" @click=\"grantAccess\">\n                  {{ granting ? 'Granting' : 'Grant Access' }}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <!-- STUDY CONFIGURATIONS (placeholder) -->\n          <div class=\"subsection\">\n            <h3 class=\"sub-title\">Study Configurations</h3>\n            <p class=\"muted\">\n              (Yet to Decide on this part) This section can include configuration options such as: edit windows for visits, allowed data entry roles,\n              randomization settings, subject ID format, data export preferences, and notification settings.\n            </p>\n          </div>\n        </div>\n\n        <!-- VIEW DATA: Auto-redirect -->\n        <div v-else-if=\"activeTab === 'viewdata'\">\n          <h2 class=\"panel-title center\">View Data</h2>\n          <p class=\"muted\">Redirecting to the data dashboard</p>\n        </div>\n\n        <!-- AUDIT LOGS -->\n        <div v-else-if=\"activeTab === 'audit'\">\n          <StudyAuditLogs :study-id=\"studyId\" />\n        </div>\n      </section>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport FieldFileUpload from \"@/components/fields/FieldFileUpload.vue\";\nimport StudyAuditLogs from \"@/components/StudyAuditLogs.vue\";\nimport TemplateDiffView, { computeTemplateDiff, buildVersionSummary } from \"@/components/TemplateDiffView.vue\";\n\nexport default {\n  name: \"StudyView\",\n  components: { FieldFileUpload, StudyAuditLogs, TemplateDiffView },\n  data() {\n    return {\n      studyId: this.$route.params.id,\n\n      // meta/content\n      studyMeta: {\n        id: null,\n        study_name: \"\",\n        study_description: \"\",\n        created_by_id: null,\n        created_by_display: \"\",\n        created_by_email: \"\",\n        created_at: \"\",\n        updated_at: \"\",\n      },\n      studyData: {},\n      me: null,\n      confirm: { visible: false, target: null },\n\n      // tabs\n      activeTab: \"meta\",\n      tabs: [\n        { key: \"meta\", label: \"Meta-data\" },\n        { key: \"docs\", label: \"Documents\" },\n        { key: \"team\", label: \"Settings\" },\n        { key: \"viewdata\", label: \"View Data\" },\n        { key: \"audit\", label: \"Audit logs\" },\n      ],\n\n      // files\n      allFiles: [],\n      attachTempValue: [],\n      pendingFiles: [],\n      uploading: false,\n\n      // access management\n      accessList: [],\n      allUsers: [],\n      selectedUserId: \"\",\n      permissionPreset: \"data-entry\",\n      granting: false,\n      revokeBusy: {},\n\n      // versions\n      versionsLoading: false,\n      versions: [],\n      versionSchemas: {},   // { [v]: schema }\n      versionDiffs: {},     // { [v]: diff }\n      canShowVersionDetails: true,\n    };\n  },\n  computed: {\n    groups() { return Array.isArray(this.studyData.groups) ? this.studyData.groups : []; },\n    visits() { return Array.isArray(this.studyData.visits) ? this.studyData.visits : []; },\n    subjects() { return Array.isArray(this.studyData.subjects) ? this.studyData.subjects : []; },\n    assignmentSize() {\n      const a = this.studyData.assignments;\n      if (!Array.isArray(a) || !a.length) return null;\n      const m = a.length;\n      const v = Array.isArray(a[0]) ? a[0].length : 0;\n      const g = v && Array.isArray(a[0][0]) ? a[0][0].length : 0;\n      return { m, v, g };\n    },\n    studyKVEntries() { return this.objectEntriesFiltered(this.studyData.study); },\n\n    studyLevelFiles() {\n      const arr = Array.isArray(this.allFiles) ? this.allFiles : [];\n      return arr.filter(f => f.subject_index == null && f.visit_index == null && f.group_index == null);\n    },\n\n    token() { return this.$store.state.token; },\n\n    // roles\n    myRoleRaw() { return (this.me && (this.me.profile?.role || this.me.role)) || \"\"; },\n    myRole() { return String(this.myRoleRaw).trim(); },\n    isAdmin() { return this.myRole.toLowerCase() === \"administrator\"; },\n    isPI() {\n      const r = this.myRole.toLowerCase();\n      return r === \"principal investigator\" || r === \"pi\";\n    },\n    isPIOrAdmin() { return this.isAdmin || this.isPI; },\n\n    // ownership + capabilities\n    isOwner() {\n      const meId = this.me?.id;\n      return meId != null && this.studyMeta.created_by_id != null && Number(meId) === Number(this.studyMeta.created_by_id);\n    },\n    canEditStudy() { return this.isAdmin || this.isOwner; },\n    canManageAccess() { return this.isAdmin || this.isOwner; },\n\n    // per-subject table\n    subjectAssignments() {\n      const subs = this.subjects || [];\n      return subs.map((s) => ({ subjectId: s?.id || \"\", groupName: s?.group || \"\" }));\n    },\n\n    grantableUsers() {\n      const grantedIds = new Set(this.accessList.map(g => g.user_id));\n      if (this.studyMeta.created_by_id != null) grantedIds.add(Number(this.studyMeta.created_by_id));\n      return (this.allUsers || [])\n        .filter(u => u && u.id != null && !grantedIds.has(Number(u.id)))\n        .sort((a, b) => this.userDisplay(a).localeCompare(this.userDisplay(b)));\n    },\n  },\n  watch: {\n    activeTab(val) {\n      if (val === \"viewdata\") this.goViewData();\n      if (val === \"team\") this.ensureAccessData();\n    },\n  },\n  methods: {\n    // tiny helpers\n    userDisplay(u) {\n      const firstLast = [u.first_name || u.profile?.first_name, u.last_name || u.profile?.last_name].filter(Boolean).join(\" \").trim();\n      return u.name || u.full_name || firstLast || u.username || u.email || `User#${u.id}`;\n    },\n    prettyGrantRole(role) {\n      if (!role) return \"Investigator\";\n      const r = String(role).toLowerCase();\n      if (r.includes(\"investigator\")) return \"Investigator\";\n      if (r.includes(\"principal\") || r === \"pi\") return \"PI\";\n      if (r.includes(\"admin\")) return \"Admin\";\n      return role;\n    },\n\n    // layout helpers\n    makeDatasetFolder(studyId, studyName) {\n      const alnum = (s) => String(s || \"\").replace(/[^A-Za-z0-9]/g, \"\");\n      const base = (studyName || `study${studyId}`).replace(/ /g, \"\");\n      const slug = alnum(base).slice(0, 48);\n      return slug ? `study_${studyId}_${slug}` : `study_${studyId}`;\n    },\n    docRelativePath(file) {\n      const folder = this.makeDatasetFolder(this.studyMeta.id, this.studyMeta.study_name);\n      const fname = file?.file_name || \"\";\n      return `bids_datasets/${folder}/metadata/${fname}`;\n    },\n    docPathTooltip(file) {\n      return `Location on disk (relative to backend working directory): ${this.docRelativePath(file)}`;\n    },\n\n    // helpers\n    scrollToTop() {\n      try {\n        window.scrollTo({ top: 0, left: 0, behavior: \"auto\" });\n        if (this.$el && typeof this.$el.scrollTop === \"number\") this.$el.scrollTop = 0;\n      } catch (err) {\n        console.warn(\"StudyView scrollToTop failed:\", err);\n      }\n    },\n    goBackToDashboard() {\n      this.$router.push({ name: \"Dashboard\", query: { openStudies: \"true\" } });\n    },\n    formatDateTime(d) {\n      if (!d) return \"\";\n      return new Date(d).toLocaleString(\"en-GB\", {\n        year: \"numeric\", month: \"short\", day: \"numeric\",\n        hour: \"2-digit\", minute: \"2-digit\", second: \"2-digit\",\n      });\n    },\n    prettyBytes(n) {\n      if (n === 0) return \"0 B\";\n      if (!n && n !== 0) return \"\";\n      const units = [\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];\n      const i = Math.floor(Math.log(n)/Math.log(1024));\n      return `${(n/Math.pow(1024, i)).toFixed(1)} ${units[i]}`;\n    },\n    prettyLabel(key) {\n      if (!key) return \"\";\n      return String(key)\n        .replace(/[_-]+/g, \" \")\n        .replace(/([a-z0-9])([A-Z])/g, \"$1 $2\")\n        .replace(/\\s+/g, \" \")\n        .replace(/^./, s => s.toUpperCase());\n    },\n    formatAny(val) {\n      if (val == null) return \"\";\n      if (typeof val === \"boolean\") return val ? \"Yes\" : \"No\";\n      if (Array.isArray(val)) return val.length ? JSON.stringify(val) : \"\";\n      if (typeof val === \"object\") return Object.keys(val).length ? JSON.stringify(val) : \"\";\n      const s = String(val);\n      return s.trim().length ? s : \"\";\n    },\n    hasValue(val) {\n      if (val === null || val === undefined) return false;\n      if (typeof val === \"string\") return val.trim().length > 0;\n      if (Array.isArray(val)) return val.length > 0;\n      if (typeof val === \"object\") return Object.keys(val).length > 0;\n      return true;\n    },\n    objectEntriesFiltered(obj) {\n      return Object.entries(obj || {}).filter(([, v]) => this.hasValue(v));\n    },\n\n    // data fetch\n    async fetchMe() {\n      const token = this.token;\n      if (!token) return;\n      try {\n        const { data } = await axios.get(\"/users/me\", { headers: { Authorization: `Bearer ${token}` } });\n        this.me = data || null;\n      } catch (e) {\n        console.warn(\"Failed to fetch /users/me:\", e?.response?.data || e.message);\n      }\n    },\n    async fetchUserNameById(userId) {\n      const token = this.token;\n      if (!token || userId == null) return null;\n      try {\n        const { data } = await axios.get(`/users/${userId}`, { headers: { Authorization: `Bearer ${token}` } });\n        const u = data || {};\n        const firstLast = [u?.profile?.first_name, u?.profile?.last_name].filter(Boolean).join(\" \").trim();\n        return u.name || u.full_name || firstLast || u.username || u.email || null;\n      } catch { return null; }\n    },\n    async fetchStudy() {\n      const token = this.token;\n      if (!token) { this.$router.push(\"/login\"); return; }\n      try {\n        const resp = await axios.get(`/forms/studies/${this.studyId}`, { headers: { Authorization: `Bearer ${token}` } });\n        const sd = resp.data?.content?.study_data || {};\n        const meta = resp.data?.metadata || {};\n\n        let createdByDisplay =\n          meta.created_by_name ||\n          meta.created_by_full_name ||\n          meta.created_by_display ||\n          meta.created_by_username ||\n          meta.created_by_email ||\n          null;\n\n        if (!createdByDisplay && meta.created_by != null) {\n          const resolved = await this.fetchUserNameById(meta.created_by);\n          createdByDisplay = resolved || String(meta.created_by);\n        }\n\n        this.studyMeta = {\n          id: meta.id,\n          study_name: meta.study_name,\n          study_description: meta.study_description,\n          created_by_id: meta.created_by,\n          created_by_display: createdByDisplay || \"-\",\n          created_by_email: meta.created_by_email || \"\",\n          created_at: meta.created_at,\n          updated_at: meta.updated_at,\n        };\n        this.studyData = sd || {};\n      } catch (e) { console.error(\"Failed to fetch study view:\", e); }\n    },\n    async fetchStudyFiles() {\n      const token = this.token;\n      if (!token) return;\n      try {\n        const { data } = await axios.get(`/forms/studies/${this.studyId}/files`, { headers: { Authorization: `Bearer ${token}` } });\n        this.allFiles = Array.isArray(data) ? data : [];\n      } catch (e) { console.warn(\"Failed to fetch study files:\", e?.response?.data || e.message); }\n    },\n\n    // versions\n    async fetchVersionsAndDiffs() {\n      const token = this.token;\n      if (!token) return;\n      this.versionsLoading = true;\n      this.canShowVersionDetails = true;\n      try {\n        // list\n        const { data } = await axios.get(`/forms/studies/${this.studyId}/versions`, { headers: { Authorization: `Bearer ${token}` } });\n        const list = Array.isArray(data) ? data : [];\n        this.versions = [...list].sort((a, b) => Number(a.version) - Number(b.version));\n\n        if (!this.versions.length) { this.versionSchemas = {}; this.versionDiffs = {}; return; }\n\n        // schemas\n        const schemas = {};\n        for (const v of this.versions) {\n          try {\n            const resp = await axios.get(`/forms/studies/${this.studyId}/template`, {\n              params: { version: v.version }, headers: { Authorization: `Bearer ${token}` }\n            });\n            schemas[v.version] = resp.data?.schema || {};\n          } catch (e) {\n            if (e?.response?.status === 403) { this.canShowVersionDetails = false; break; }\n            console.warn(`Failed to fetch schema for v${v.version}:`, e?.response?.data || e.message);\n          }\n        }\n        this.versionSchemas = schemas;\n\n        if (!this.canShowVersionDetails) { this.versionDiffs = {}; return; }\n\n        // diffs & summaries\n        const diffs = {};\n        for (const v of this.versions) {\n          const ver = Number(v.version);\n          if (ver <= 1) continue;\n          const prev = this.versionSchemas[ver - 1];\n          const next = this.versionSchemas[ver];\n          if (prev && next) {\n            const d = computeTemplateDiff(prev, next);\n            d.summary = buildVersionSummary(d); // ensure latest summary text\n            diffs[ver] = d;\n          }\n        }\n        this.versionDiffs = diffs;\n      } catch (e) {\n        console.error(\"fetchVersionsAndDiffs failed:\", e?.response?.data || e.message);\n        this.versions = []; this.versionSchemas = {}; this.versionDiffs = {};\n      } finally { this.versionsLoading = false; }\n    },\n\n    // access\n    async ensureAccessData() { await Promise.all([this.fetchAccessList(), this.fetchAllUsers()]); },\n    async fetchAccessList() {\n      const token = this.token; if (!token) return;\n      try {\n        const { data } = await axios.get(`/forms/studies/${this.studyId}/access`, { headers: { Authorization: `Bearer ${token}` } });\n        const list = Array.isArray(data) ? data : (data?.items || []);\n        this.accessList = list.map((g) => ({\n          user_id: g.user_id,\n          role: g.role || \"Investigator\",\n          email: g.email || g.user_email || \"\",\n          username: g.username || \"\",\n          display_name: g.display_name || g.user_display || \"\",\n          granted_by: g.created_by,\n          granted_by_display: g.created_by_display || \"\",\n          created_at: g.created_at,\n          permissions: {\n            view: !!(g.permissions?.view ?? true),\n            add_data: !!(g.permissions?.add_data ?? true),\n            edit_study: !!(g.permissions?.edit_study ?? false),\n          },\n        }));\n      } catch (e) {\n        console.warn(\"fetchAccessList failed:\", e?.response?.data || e.message);\n        this.accessList = [];\n      }\n    },\n    async fetchAllUsers() {\n      const token = this.token; if (!token) return;\n      try {\n        const { data } = await axios.get(`/users/admin/users`, { headers: { Authorization: `Bearer ${token}` } });\n        const arr = Array.isArray(data) ? data : (data?.items || []);\n        this.allUsers = arr;\n      } catch (e) {\n        console.warn(\"fetchAllUsers failed:\", e?.response?.data || e.message);\n        this.allUsers = [];\n      }\n    },\n    async grantAccess() {\n      if (!this.selectedUserId) return;\n      this.granting = true;\n      const token = this.token;\n      try {\n        const payload = { user_id: Number(this.selectedUserId), role: \"Investigator\", permissions: { view: true, add_data: true, edit_study: false } };\n        await axios.post(`/forms/studies/${this.studyId}/access`, payload, { headers: { Authorization: `Bearer ${token}` } });\n        this.selectedUserId = \"\"; await this.fetchAccessList();\n      } catch (e) { console.error(\"grantAccess failed:\", e?.response?.data || e.message); }\n      finally { this.granting = false; }\n    },\n    async revokeAccess(g) {\n      if (!g || g.user_id == null) return;\n      const token = this.token;\n      this.$set ? this.$set(this.revokeBusy, g.user_id, true) : (this.revokeBusy = { ...this.revokeBusy, [g.user_id]: true });\n      try {\n        await axios.delete(`/forms/studies/${this.studyId}/access/${g.user_id}`, { headers: { Authorization: `Bearer ${token}` } });\n        await this.fetchAccessList();\n      } catch (e) { console.error(\"revokeAccess failed:\", e?.response?.data || e.message); }\n      finally { const next = { ...this.revokeBusy }; delete next[g.user_id]; this.revokeBusy = next; }\n    },\n\n    // nav\n    goViewData() {\n      this.$router.push({ name: \"StudyDataDashboard\", params: { id: this.studyId } });\n    },\n    async editStudy() {\n      localStorage.removeItem(\"setStudyDetails\");\n      localStorage.removeItem(\"scratchForms\");\n      const token = this.token;\n      if (!token) { this.$router.push(\"/login\"); return; }\n      try {\n        const resp = await axios.get(`/forms/studies/${this.studyId}`, { headers: { Authorization: `Bearer ${token}` } });\n        const sd = resp.data.content?.study_data;\n        const meta = resp.data.metadata || {};\n        if (!sd) return;\n\n        let assignments = Array.isArray(sd.assignments) ? sd.assignments : [];\n        if (!assignments.length && sd.selectedModels?.length) {\n          const m = sd.selectedModels.length;\n          const v = sd.visits?.length || 0;\n          const g = sd.groups?.length || 0;\n          assignments = Array.from({ length: m }, () =>\n            Array.from({ length: v }, () =>\n              Array.from({ length: g }, () => false)\n            )\n          );\n        }\n        const studyInfo = {\n          id: meta.id, name: meta.study_name, description: meta.study_description,\n          created_at: meta.created_at, updated_at: meta.updated_at, created_by: meta.created_by\n        };\n        this.$store.commit(\"setStudyDetails\", {\n          study_metadata: studyInfo,\n          study: { id: meta.id, ...sd.study },\n          groups: sd.groups || [],\n          visits: sd.visits || [],\n          subjectCount: sd.subjectCount || 0,\n          assignmentMethod: sd.assignmentMethod || \"random\",\n          subjects: sd.subjects || [],\n          assignments: assignments,\n          forms: sd.selectedModels ? [{\n            sections: sd.selectedModels.map(model => ({ title: model.title, fields: model.fields, source: \"template\" }))\n          }] : []\n        });\n        if (sd.selectedModels) {\n          const scratchForms = [{\n            sections: sd.selectedModels.map(model => ({ title: model.title, fields: model.fields, source: \"template\" }))\n          }];\n          localStorage.setItem(\"scratchForms\", JSON.stringify(scratchForms));\n        }\n        this.$router.push({ name: \"CreateStudy\", params: { id: this.studyId } });\n      } catch (e) {\n        console.error(\"Failed to load study details for edit:\", e);\n      }\n    },\n\n    // ---------- attach handlers ----------\n    onAttachTempChange(val) {\n      this.attachTempValue = Array.isArray(val) ? val : [];\n    },\n    onFilesSelected(files) {\n      const arr = Array.isArray(files) ? files : (files ? [files] : []);\n      if (!arr.length) return;\n      const existing = new Set(this.pendingFiles.map((p) => `${p.file.name}|${p.file.size}|${p.file.lastModified || \"\"}`));\n      const next = [];\n      for (const f of arr) {\n        const key = `${f.name}|${f.size}|${f.lastModified || \"\"}`;\n        if (!existing.has(key)) next.push({ key, file: f, description: \"\" });\n      }\n      if (next.length) this.pendingFiles = this.pendingFiles.concat(next);\n    },\n    removePending(idx) {\n      if (idx >= 0 && idx < this.pendingFiles.length) this.pendingFiles.splice(idx, 1);\n    },\n    async saveStudyAttachments() {\n      if (!this.pendingFiles.length) return;\n      const token = this.token;\n      if (!token) {\n        this.$router.push(\"/login\");\n        return;\n      }\n      this.uploading = true;\n      try {\n        for (const item of this.pendingFiles) {\n          const fd = new FormData();\n          fd.append(\"uploaded_file\", item.file);\n          fd.append(\"description\", item.description || \"\");\n          fd.append(\"storage_option\", \"local\");\n          fd.append(\"modalities_json\", \"[]\"); // study-level\n          await axios.post(\n            `/forms/studies/${this.studyId}/files`,\n            fd,\n            { headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"multipart/form-data\" } }\n          );\n        }\n        this.pendingFiles = [];\n        this.attachTempValue = [];\n        await this.fetchStudyFiles();\n      } catch (e) {\n        console.error(\"Save attachments failed:\", e?.response?.data || e.message);\n      } finally {\n        this.uploading = false;\n      }\n    },\n    openRevokeDialog(g) {\n      this.confirm = { visible: true, target: g };\n      this.$nextTick(() => {\n        try {\n          const el = this.$el.querySelector('.modal');\n          el && el.focus();\n        } catch (err) {\n          console.warn('openRevokeDialog: failed to focus modal', err);\n        }\n      });\n    },\n    cancelRevoke() {\n      this.confirm = { visible: false, target: null };\n    },\n    async confirmRevoke() {\n      const g = this.confirm.target;\n      if (!g) return;\n      await this.revokeAccess(g);\n      this.cancelRevoke();\n    },\n\n  },\n  async mounted() {\n    this.scrollToTop?.();\n    await this.fetchMe();\n    await this.fetchStudy();\n    await Promise.all([this.fetchStudyFiles(), this.fetchVersionsAndDiffs()]);\n  },\n  beforeRouteEnter(to, from, next) { next((vm) => vm.scrollToTop?.()); },\n  beforeRouteUpdate(to, from, next) {\n    this.studyId = to.params.id;\n    this.scrollToTop?.();\n    Promise.resolve()\n      .then(() => this.fetchStudy())\n      .then(() => Promise.all([this.fetchStudyFiles(), this.fetchVersionsAndDiffs()]))\n      .finally(() => next());\n  },\n};\n</script>\n\n<style scoped>\n/* Typography base */\n:host, * { font-family: \"Inter\", system-ui, -apple-system, Segoe UI, Roboto, \"Helvetica Neue\", Arial, sans-serif; letter-spacing: 0.1px; }\n\n.study-view-layout { display: flex; flex-direction: column; gap: 16px; padding: 24px; background: #f9fafb; min-height: 100%; }\n\n/* Header */\n.sv-header { position: relative; display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 16px; }\n.back-btn { position: absolute; left: 0; top: 50%; transform: translateY(-50%); }\n.title-wrap { grid-column: 2 / 3; min-width: 0; text-align: center; }\n.sv-title { margin: 0; font-size: 22px; font-weight: 800; color: #111827; }\n.sv-subtitle { margin: 6px 0 0; color: #6b7280; }\n.header-spacer { width: 56px; height: 1px; }\n\n/* Card layout */\n.card { display: grid; grid-template-columns: 240px 1fr; background: #fff; border: 1px solid #ececec; border-radius: 14px; box-shadow: 0 6px 18px rgba(0,0,0,0.04); overflow: hidden; }\n\n/* Vertical tabs */\n.v-tabs { background: #fcfcff; border-right: 1px solid #f0f0f6; padding: 10px; display: flex; flex-direction: column; gap: 8px; min-height: 360px; }\n.v-tab { text-align: left; background: #fff; border: 1px solid #ececec; border-radius: 10px; padding: 10px 12px; font-size: 14px; color: #374151; cursor: pointer; transition: background .2s, color .2s, box-shadow .2s, border .2s; }\n.v-tab:hover { background: #f8fafc; }\n.v-tab.active { background: #eef2ff; color: #3538cd; border-color: #e0e7ff; box-shadow: 0 3px 10px rgba(53,56,205,0.08); }\n\n/* Panel */\n.v-panel { padding: 18px 20px; }\n.panel-title { margin: 4px 0 12px; font-size: 16px; font-weight: 700; }\n.panel-title.center { text-align: center; }\n\n/* Subsections */\n.subsection { margin-top: 18px; }\n.sub-title { margin: 0 0 8px; font-size: 14px; font-weight: 700; color: #111827; }\n\n/* Meta grid */\n.meta-grid { display: grid; grid-template-columns: repeat(2, minmax(220px, 1fr)); gap: 12px; }\n.meta-item { border: 1px solid #f1f1f1; border-radius: 10px; padding: 10px 12px; background: #fff; }\n.meta-label { font-size: 12px; text-transform: uppercase; letter-spacing: 0.04em; color: #6b7280; margin-bottom: 6px; }\n.meta-value { font-size: 14px; color: #111827; word-break: break-word; }\n.monospace { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", monospace; }\n\n/* Key-value grids */\n.kv-grid { display: grid; grid-template-columns: 1fr; gap: 8px; }\n.kv-row { display: grid; grid-template-columns: 200px 1fr; gap: 8px; padding: 8px 10px; border: 1px solid #f5f5f5; border-radius: 8px; }\n.kv-key { color: #6b7280; font-size: 13px; }\n.kv-val { color: #111827; font-size: 14px; white-space: pre-wrap; overflow-wrap: anywhere; word-break: break-word; }\n\n/* Lists for groups/visits */\n.list-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(360px, 1fr)); gap: 10px; }\n.list-card { border: 1px solid #f1f1f1; border-radius: 12px; padding: 10px; background: #fff; }\n.list-card .kv-row { display: grid; grid-template-columns: minmax(120px, 220px) 1fr; gap: 8px; align-items: start; }\n\n/* per-subject table */\n.per-subject-block { margin-top: 14px; }\n.per-subject-title { margin: 8px 0; font-size: 13px; font-weight: 700; color: #111827; }\n.ps-table-wrap { overflow: auto; border: 1px solid #f1f1f1; border-radius: 10px; }\n.ps-table { width: 100%; border-collapse: collapse; font-size: 13px; background: #fff; }\n.ps-table th, .ps-table td { border-bottom: 1px solid #f5f5f5; padding: 8px 10px; text-align: left; }\n.ps-table th { background: #fafafe; color: #374151; font-weight: 600; }\n.ps-table tr:last-child td { border-bottom: none; }\n\n/* Docs */\n.doc-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 10px; }\n.doc-item { border: 1px solid #f1f1f1; border-radius: 12px; padding: 12px; background: #fff; }\n.doc-name { font-weight: 700; word-break: break-word; }\n.doc-meta { font-size: 12px; margin: 6px 0 8px; color: #6b7280; }\n.doc-desc { margin-top: 4px; font-size: 13px; color: #374151; }\n\n.doc-path { margin-top: 6px; font-size: 12px; color: #6b7280; display: flex; gap: 6px; align-items: flex-start; }\n.doc-path .label { flex: 0 0 auto; color: #6b7280; }\n.doc-path .file-path { flex: 1 1 auto; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", monospace; word-break: break-word; overflow-wrap: anywhere; white-space: normal; }\n\n/* Attach */\n.attach-row { margin-bottom: 10px; }\n.pending-list { display: grid; grid-template-columns: 1fr; gap: 10px; }\n.pending-item { border: 1px solid #f1f1f1; border-radius: 10px; padding: 10px; background: #fff; display: flex; flex-direction: column; gap: 6px; }\n.pi-head { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }\n.pi-name { font-weight: 600; min-width: 0; word-break: break-word; }\n.pi-size { color: #6b7280; font-size: 12px; }\n.icon-inline { border:none; background:transparent; padding:6px; border-radius:8px; cursor:pointer; }\n.icon-inline.danger { color:#b91c1c; }\n.pi-desc-label { font-size: 12px; color: #6b7280; }\n.pi-desc-input { width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px; box-sizing: border-box; }\n.attach-actions { margin-top: 10px; }\n\n/* Buttons */\n.btn-primary { border-radius: 10px; padding: 10px 12px; font-size: 14px; cursor: pointer; transition: transform .05s, box-shadow .2s, background .2s, color .2s, border .2s; border: 1px solid transparent; background: #111827; color: #fff; }\n.btn-primary[disabled] { opacity: 0.6; cursor: not-allowed; }\n.btn-primary:hover:not([disabled]) { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(0,0,0,.1); }\n.btn-minimal { background: none; border: 1px solid #e0e0e0; border-radius: 8px; padding: 8px 12px; font-size: 14px; color: #555; cursor: pointer; transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease; }\n.btn-minimal:hover { background: #e8e8e8; color: #000; border-color: #d6d6d6; }\n.edit-row { margin-top: 16px; }\n\n/* Empty + util */\n.empty-state { color: #6b7280; }\n.center { text-align: center; }\n.strong { font-weight: 600; }\n.muted { color: #6b7280; }\n\n/* Access table */\n.table-wrap { overflow: auto; border: 1px solid #f1f1f1; border-radius: 12px; background: #fff; }\n.access-table { width: 100%; border-collapse: collapse; font-size: 13px; }\n.access-table th, .access-table td { padding: 10px 12px; border-bottom: 1px solid #f6f6f6; text-align: left; }\n.access-table thead th { background: #fafafe; color: #374151; font-weight: 600; }\n.access-table tr:last-child td { border-bottom: none; }\n.owner-row { background: #fcfcff; }\n.pill { display: inline-block; padding: 2px 8px; border-radius: 999px; font-size: 12px; margin-right: 6px; border: 1px solid #e5e7eb; color: #6b7280; background: #fff; }\n.pill.ok { color: #065f46; background: #ecfdf5; border-color: #a7f3d0; }\n.pill.muted { color: #6b7280; background: #f9fafb; }\n.tag { margin-left: 8px; font-size: 11px; border-radius: 6px; padding: 2px 6px; background: #eef2ff; color: #3538cd; border: 1px solid #e0e7ff; }\n.btn-link { background: transparent; border: none; padding: 0; cursor: pointer; text-decoration: underline; }\n.btn-link.danger { color: #b91c1c; }\n\n/* Grant form */\n.grant-grid {\n  display: grid; grid-template-columns: repeat(3, minmax(180px, 1fr)); gap: 12px; align-items: center;\n  background: #fff; border: 1px solid #f1f1f1; border-radius: 12px; padding: 12px; align-items: start;\n}\n.field { display: flex; flex-direction: column; gap: 6px; }\n.label { font-size: 12px; text-transform: uppercase; letter-spacing: .04em; color: #6b7280; }\n.input { width: 100%; height: 40px; padding: 8px 10px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px; box-sizing: border-box; background: #fff; }\n.input-select { appearance: none; -webkit-appearance: none; -moz-appearance: none; background-position: right 10px center; }\n.help { font-size: 12px; color: #6b7280; }\n.actions { display: flex; gap: 8px; align-self: end; }\n\n/* Modal (revoke) */\n.modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.35); display: flex; align-items: center; justify-content: center; z-index: 1000; }\n.modal { background: #fff; border-radius: 12px; padding: 16px; width: 100%; max-width: 420px; box-shadow: 0 10px 30px rgba(0,0,0,.15); outline: none; }\n.modal-title { margin: 0 0 8px; font-size: 16px; font-weight: 700; color: #111827; }\n.modal-text { margin: 0 0 14px; color: #374151; font-size: 14px; }\n.modal-actions { display: flex; justify-content: flex-end; gap: 8px; }\n.btn-primary.danger { background: #b91c1c; border-color: #a11a1a; }\n.btn-primary.danger:hover { background: #991b1b; }\n\n/* Versions */\n.versions-wrap { display: block; }\n.version-list { display: grid; grid-template-columns: 1fr; gap: 10px; }\n.version-card { border: 1px solid #f1f1f1; border-radius: 12px; padding: 12px; background: #fff; }\n.vc-head { display: flex; flex-direction: column; gap: 4px; }\n.vc-title { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }\n.vc-date { color: #6b7280; font-size: 12px; }\n.vc-summary { color: #374151; font-size: 13px; margin-top: 2px; }\n.vc-summary-line { display: block; margin-top: 2px; }\n\n/* reuse diff-scroll for details block */\n.diff-scroll { overflow: auto; border: 1px solid #f1f1f1; border-radius: 10px; padding: 12px; background: #fff; }\n</style>\n","<template>\n  <div class=\"audit-shell\">\n    <!-- LEFT RAIL: vertical tabs -->\n    <aside class=\"rail\">\n      <div class=\"rail-group\">\n        <div class=\"rail-title\">Audit Views</div>\n        <button\n          class=\"rail-item\"\n          :class=\"{ active: activeTab === 'study' }\"\n          @click=\"activeTab = 'study'\"\n        >\n          Study (System)\n        </button>\n        <button\n          class=\"rail-item\"\n          :class=\"{ active: activeTab === 'subjects' }\"\n          @click=\"activateSubjectsTab()\"\n        >\n          Subjects\n        </button>\n      </div>\n\n      <!-- Subjects list only when Subjects tab is active -->\n      <div v-if=\"activeTab === 'subjects'\" class=\"rail-group subjects\">\n        <div class=\"rail-title small\">Subjects</div>\n        <div v-if=\"!subjectIds.length\" class=\"rail-empty\">No subjects found yet.</div>\n        <button\n          v-for=\"sid in subjectIds\"\n          :key=\"`sid-${sid}`\"\n          class=\"rail-item\"\n          :class=\"{ active: String(activeSubject) === String(sid) }\"\n          @click=\"selectSubject(sid)\"\n        >\n          Subject {{ displaySubject(sid) }}\n          <span class=\"count-badge\">{{ subjectCounts[String(sid)] || 0 }}</span>\n        </button>\n      </div>\n    </aside>\n\n    <!-- RIGHT CONTENT AREA -->\n    <main class=\"content\">\n      <!-- Toolbar -->\n      <div class=\"content-head\">\n        <div class=\"title-wrap\">\n          <h2 class=\"panel-title\" v-if=\"activeTab === 'study'\">Study audit (system-level)</h2>\n          <h2 class=\"panel-title\" v-else>\n            Subject audit<span v-if=\"activeSubject !== null\">  Subject {{ displaySubject(activeSubject) }}</span>\n          </h2>\n        </div>\n        <div class=\"tools\">\n          <input\n            class=\"input search\"\n            v-model=\"search\"\n            placeholder=\"Search action / user / details\"\n            @input=\"debouncedFilter\"\n          />\n          <button class=\"btn-minimal\" @click=\"refreshAll\" :disabled=\"loading\">Refresh</button>\n        </div>\n      </div>\n\n      <!-- Loading / empty states -->\n      <div v-if=\"loading\" class=\"empty-state\">Loading audit</div>\n      <div v-else-if=\"!visibleRows.length\" class=\"empty-state\">No audit entries.</div>\n\n      <!-- Tables -->\n      <div v-else class=\"table-wrap\">\n        <table class=\"audit-table\" aria-label=\"Audit\">\n          <thead>\n            <tr>\n              <th style=\"width: 180px\">Timestamp (UTC)</th>\n              <th>Action</th>\n              <th style=\"width: 220px\">User</th>\n              <th>Details</th>\n              <th style=\"width: 80px\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(row, i) in visibleRows\" :key=\"`row-${i}-${row.id || ''}`\">\n              <td class=\"mono\">{{ fmtTs(row.timestamp) }}</td>\n              <td class=\"strong\">{{ row.action || '' }}</td>\n              <td class=\"user-cell\">\n                <div>{{ userName(row.user_id) }}</div>\n                <div v-if=\"activeTab === 'subjects'\" class=\"meta\" title=\"Subject / Visit\">\n                  Subj: {{ resolvedSubject(row) }}  Visit: {{ resolvedVisit(row) }}\n                </div>\n              </td>\n              <td class=\"wrap\">{{ summaryText(row) }}</td>\n              <td>\n                <button class=\"link-btn\" @click=\"toggleRaw(row)\">{{ row.__showRaw ? 'hide' : 'view raw' }}</button>\n              </td>\n            </tr>\n            <tr v-for=\"(row, i) in visibleRows\" :key=\"`raw-${i}-${row.id || ''}`\" v-show=\"row.__showRaw\">\n              <td :colspan=\"5\" class=\"raw-wrap\">\n                <pre class=\"mini-json\">{{ safeDetail(row.details) }}</pre>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"StudyAuditLogs\",\n  props: {\n    studyId: { type: [String, Number], required: true },\n  },\n  data() {\n    return {\n      loading: false,\n      all: [],                // all events (for this study) from API\n      search: \"\",\n      activeTab: \"study\",     // 'study' | 'subjects'\n      activeSubject: null,    // subject id string/number or null\n      subjectIds: [],         // list of subject ids as strings\n      subjectCounts: {},      // sid -> count\n      nameCache: {},          // user id -> display name\n      timerId: null,\n    };\n  },\n  computed: {\n    token() {\n      return this.$store.state.token;\n    },\n    authHeaders() {\n      return this.token ? { Authorization: `Bearer ${this.token}` } : {};\n    },\n    // rows filtered by current tab & selection\n    visibleRows() {\n      const base = this.activeTab === \"study\" ? this.studyRows() : this.subjectRows();\n      return this.applySearch(base, this.search);\n    },\n  },\n  methods: {\n    // ====== fetch ======\n    async refreshAll() {\n      if (!this.token) return;\n      this.loading = true;\n      try {\n        const { data } = await axios.get(`/audit/studies/${this.studyId}/events`, {\n          headers: this.authHeaders,\n        });\n        const rows = Array.isArray(data) ? data : (data?.items || []);\n        this.all = rows.map(this.normalizeRow);\n\n        // Resolve user names (best-effort)\n        this.primeUsers(this.all.map(r => r.user_id).filter(Boolean));\n\n        // Build subject list and counts from resolved subject ids\n        const counts = {};\n        const set = new Set();\n        for (const r of this.all) {\n          const sid = this.getSubjectIdFromRow(r);\n          if (sid === 0 || sid) {\n            const key = String(sid);\n            set.add(key);\n            counts[key] = (counts[key] || 0) + 1;\n          }\n        }\n        this.subjectIds = Array.from(set).sort((a, b) => Number(a) - Number(b));\n        this.subjectCounts = counts;\n\n        // If subjects tab is active but activeSubject is not set, pick the first\n        if (this.activeTab === \"subjects\" && this.subjectIds.length && (this.activeSubject === null)) {\n          this.activeSubject = this.subjectIds[0];\n        }\n      } catch (e) {\n        console.warn(\"Audit fetch failed:\", e?.response?.data || e.message);\n        this.all = [];\n        this.subjectIds = [];\n        this.subjectCounts = {};\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // ====== tabs / subject selection ======\n    activateSubjectsTab() {\n      this.activeTab = \"subjects\";\n      if (this.subjectIds.length && (this.activeSubject === null)) {\n        this.activeSubject = this.subjectIds[0];\n      }\n    },\n    selectSubject(sid) {\n      this.activeSubject = sid;\n    },\n\n    // ====== partition helpers ======\n    studyRows() {\n      // study/system-level = those without a resolvable subject id\n      return this.all.filter(r => {\n        const sid = this.getSubjectIdFromRow(r);\n        return !(sid === 0 || sid);\n      });\n    },\n    subjectRows() {\n      // subject-level = those with a resolvable subject id (and matches activeSubject)\n      const withSubject = this.all.filter(r => {\n        const sid = this.getSubjectIdFromRow(r);\n        return (sid === 0 || sid);\n      });\n      if (this.activeSubject === null) return withSubject;\n      return withSubject.filter(r => String(this.getSubjectIdFromRow(r)) === String(this.activeSubject));\n    },\n\n    // ====== normalizers / resolvers ======\n    normalizeRow(r) {\n      // API guarantees this endpoint is already scoped by studyId; we still normalize fields we use.\n      const userId = r.user?.id ?? r.user_id ?? null;\n      return {\n        id: r.id,\n        study_id: r.study_id != null ? Number(r.study_id) : null,\n        subject_id: r.subject_id != null ? Number(r.subject_id) : null,\n        user_id: userId != null ? Number(userId) : null,\n        action: r.action || \"\",\n        details: r.details || {},\n        timestamp: r.timestamp || r.ts || null,\n        __showRaw: false,\n      };\n    },\n    getSubjectIdFromRow(row) {\n      // prefer explicit subject_id\n      if (row.subject_id === 0 || row.subject_id) return row.subject_id;\n      // fallback: details.subject_index\n      const idx = row?.details?.subject_index;\n      if (idx === 0 || idx) return Number(idx);\n      // fallback: details.participant_id like sub-001\n      const pid = row?.details?.participant_id || \"\";\n      const m = /^sub-(\\d+)/i.exec(pid);\n      if (m) return Number(m[1]);\n      return null;\n    },\n    resolvedSubject(row) {\n      const sid = this.getSubjectIdFromRow(row);\n      return (sid === 0 || sid) ? String(sid) : \"\";\n    },\n    resolvedVisit(row) {\n      const vi = row?.details?.visit_index;\n      if (vi === 0 || vi) return String(vi);\n      const vn = row?.details?.visit_name;\n      return vn ? String(vn) : \"\";\n    },\n    fmtTs(ts) {\n      if (!ts) return \"\";\n      try {\n        const d = new Date(ts);\n        // display as UTC-ish (strip ms)\n        return new Date(d.getTime() - d.getTimezoneOffset() * 60000)\n          .toISOString()\n          .replace(/\\.\\d{3}Z$/, \"Z\");\n      } catch {\n        return String(ts);\n      }\n    },\n    displaySubject(sid) {\n      // If your app uses zero-padded display, uncomment next line\n      // return String(sid).padStart(3, \"0\");\n      return String(sid);\n    },\n\n    // ====== compact summary (only key fields) ======\n    summaryText(row) {\n      const a = (row.action || \"\").toLowerCase();\n      const d = row.details || {};\n\n      // Keep aligned with the *trimmed backend* actions\n      if (a === \"study_created\") return `Study created`;\n      if (a === \"study_edited\") return `Study edited`;\n\n      if (a === \"file_added\" || a === \"share_file_added\") {\n        const name = d.file_name || \"file\";\n        const mods = Array.isArray(d.modalities) && d.modalities.length ? `  ${d.modalities.join(\", \")}` : \"\";\n        const vi = this.resolvedVisit(row);\n        const part = (a === \"share_file_added\") ? \"via share link\" : \"added\";\n        const subj = this.resolvedSubject(row);\n        const loc = (subj !== \"\" || vi !== \"\") ? ` (subj ${subj}, visit ${vi})` : \"\";\n        return `File ${part}: ${name}${mods}${loc}`;\n      }\n\n      if (a === \"entry_upserted\") {\n        const subj = this.resolvedSubject(row);\n        const vi = this.resolvedVisit(row);\n        return `Data saved/edited (subj ${subj}, visit ${vi})`;\n      }\n      if (a === \"share_entry_upserted\") {\n        const subj = this.resolvedSubject(row);\n        const vi = this.resolvedVisit(row);\n        return `Data submitted via share link (subj ${subj}, visit ${vi})`;\n      }\n\n      if (a === \"share_link_created\") {\n        const p = d.permission || \"?\";\n        const exp = (d.expires_in_days === 0 || d.expires_in_days) ? `${d.expires_in_days}d` : \"\";\n        return `Share link created (permission ${p}, expires ${exp})`;\n      }\n\n      if (a === \"access_granted\") return `Access granted to ${d.target_user_display || d.target_user_email || `User#${d.target_user_id}`}`;\n      if (a === \"access_updated\") return `Access updated for ${d.target_user_display || d.target_user_email || `User#${d.target_user_id}`}`;\n      if (a === \"access_revoked\") return `Access revoked for ${d.target_user_display || d.target_user_email || `User#${d.target_user_id}`}`;\n\n      // Fallback: tiny slice of details\n      const keys = Object.keys(d || {});\n      if (!keys.length) return \"\";\n      const parts = [];\n      for (const k of keys.slice(0, 3)) {\n        const val = d[k];\n        if ([\"string\",\"number\",\"boolean\"].includes(typeof val)) parts.push(`${k}: ${String(val)}`);\n      }\n      return parts.join(\"  \");\n    },\n\n    // ====== raw toggle & utils ======\n    toggleRaw(row) {\n      row.__showRaw = !row.__showRaw;\n      this.$forceUpdate?.();\n    },\n    safeDetail(obj) {\n      try {\n        const s = JSON.stringify(obj || {}, null, 2);\n        return s.length > 2000 ? s.slice(0, 1997) + \"\" : s;\n      } catch {\n        return \"{}\";\n      }\n    },\n\n    // ====== search ======\n    debouncedFilter() {\n      clearTimeout(this.timerId);\n      this.timerId = setTimeout(() => this.$forceUpdate(), 150);\n    },\n    applySearch(rows, qRaw) {\n      const q = (qRaw || \"\").toLowerCase();\n      if (!q) return rows;\n      return rows.filter(r => {\n        const parts = [\n          this.fmtTs(r.timestamp),\n          r.action || \"\",\n          this.userName(r.user_id),\n          this.summaryText(r),\n          this.resolvedSubject(r),\n          this.resolvedVisit(r),\n        ].map(s => (s || \"\").toString().toLowerCase());\n        return parts.some(s => s.includes(q));\n      });\n    },\n\n    // ====== user names ======\n    userName(userId) {\n      if (!userId) return \"\";\n      const cached = this.nameCache[userId];\n      return cached ? cached : `User#${userId}`;\n    },\n    async primeUsers(userIds) {\n      const unique = Array.from(new Set(userIds)).filter(Boolean);\n      const missing = unique.filter(id => !this.nameCache[id]);\n      for (const id of missing.slice(0, 25)) {\n        try {\n          const { data } = await axios.get(`/users/${id}`, { headers: this.authHeaders });\n          const u = data || {};\n          const firstLast = [u?.profile?.first_name, u?.profile?.last_name].filter(Boolean).join(\" \").trim();\n          const label = u.name || u.full_name || firstLast || u.username || u.email || `User#${id}`;\n          if (this.$set) this.$set(this.nameCache, id, label);\n          else this.nameCache[id] = label;\n        } catch {\n          if (this.$set) this.$set(this.nameCache, id, `User#${id}`);\n          else this.nameCache[id] = `User#${id}`;\n        }\n      }\n    },\n  },\n  async mounted() {\n    await this.refreshAll();\n  },\n};\n</script>\n\n<style scoped>\n/* Layout */\n.audit-shell { display: grid; grid-template-columns: 260px 1fr; gap: 16px; min-height: 420px; }\n.rail { background:#fff; border:1px solid #f1f1f1; border-radius:12px; padding:10px; display:flex; flex-direction:column; gap:14px; }\n.content { background:#fff; border:1px solid #f1f1f1; border-radius:12px; padding:12px; display:flex; flex-direction:column; }\n\n.content-head { display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; margin-bottom:8px; }\n.panel-title { margin:0; font-size:16px; font-weight:700; }\n.tools { display:flex; gap:8px; align-items:center; }\n\n/* Rail */\n.rail-group { display:flex; flex-direction:column; gap:6px; }\n.rail-title { font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:.04em; color:#6b7280; padding:4px 6px; }\n.rail-title.small { font-size:11px; }\n.rail-item {\n  text-align:left; padding:8px 10px; border-radius:8px; border:1px solid #e5e7eb; background:#fff; cursor:pointer;\n  font-size:14px; color:#374151; display:flex; align-items:center; justify-content:space-between; gap:8px;\n}\n.rail-item:hover { background:#f9fafb; }\n.rail-item.active { background:#eef2ff; border-color:#c7d2fe; color:#1f2937; }\n.rail-empty { color:#6b7280; font-size:13px; padding:8px 6px; }\n.count-badge { font-size:12px; background:#f3f4f6; padding:0 6px; border-radius:999px; border:1px solid #e5e7eb; }\n\n/* Inputs / buttons */\n.input { height:36px; padding:6px 10px; border:1px solid #d1d5db; border-radius:8px; font-size:14px; background:#fff; }\n.search { width:260px; }\n.btn-minimal {\n  background:none; border:1px solid #e0e0e0; border-radius:8px; padding:8px 12px; font-size:14px; color:#555; cursor:pointer;\n}\n.btn-minimal:hover { background:#e8e8e8; color:#000; border-color:#d6d6d6; }\n.link-btn { background:none; border:none; color:#2563eb; cursor:pointer; padding:0; font-size:12px; }\n.link-btn:hover { text-decoration: underline; }\n\n/* Table */\n.table-wrap { overflow:auto; border:1px solid #f5f5f5; border-radius:10px; }\n.audit-table { width:100%; border-collapse:collapse; font-size:13px; }\n.audit-table th, .audit-table td {\n  padding: 8px 10px;\n  border-bottom: 1px solid #f6f6f6;\n  text-align: left;\n  vertical-align: top;\n}\n.audit-table thead th { background:#fafafe; color:#374151; font-weight:600; }\n.audit-table tr:last-child td { border-bottom:none; }\n.mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; }\n.strong { font-weight:600; }\n.wrap { white-space: normal; word-break: break-word; }\n.user-cell .meta { color:#6b7280; font-size:12px; margin-top:2px; }\n.raw-wrap { background:#fafafa; border-top:1px dashed #eee; }\n\n/* States */\n.empty-state { color:#6b7280; padding:8px 0; }\n</style>\n","import { render } from \"./StudyAuditLogs.vue?vue&type=template&id=459c08d7&scoped=true\"\nimport script from \"./StudyAuditLogs.vue?vue&type=script&lang=js\"\nexport * from \"./StudyAuditLogs.vue?vue&type=script&lang=js\"\n\nimport \"./StudyAuditLogs.vue?vue&type=style&index=0&id=459c08d7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-459c08d7\"]])\n\nexport default __exports__","import { render } from \"./StudyView.vue?vue&type=template&id=4ea2b374&scoped=true\"\nimport script from \"./StudyView.vue?vue&type=script&lang=js\"\nexport * from \"./StudyView.vue?vue&type=script&lang=js\"\n\nimport \"./StudyView.vue?vue&type=style&index=0&id=4ea2b374&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4ea2b374\"]])\n\nexport default __exports__","import { createRouter, createWebHistory } from \"vue-router\";\nimport LoginComponent from \"../components/LoginComponent.vue\";\nimport RegistrationComponent from \"../components/RegistrationComponent.vue\";\nimport DashboardComponent from \"../components/DashboardComponent.vue\";\nimport UserInfoComponent from \"../components/UserInfoComponent.vue\";\n// import CreateFormComponent from \"../components/CreateFormComponent.vue\";\nimport AnalyticsComponent from \"../components/AnalyticsComponent.vue\";\nimport ScratchFormComponent from \"../components/ScratchFormComponent.vue\";\nimport StudyDataEntryComponent from \"../components/StudyDataEntryComponent.vue\";\nimport StudyCreationComponent from \"../components/StudyCreationComponent.vue\";\n//import YamlViewerComponent from \"../components/YamlViewerComponent.vue\";\nimport StudySettings from \"../components/StudySettings.vue\";\n//import SavedStudyView         from '../components/SavedStudyView.vue'\n//import SharedFormComponent from '../components/SharedFormComponent.vue'\n//import StudyDataEntryComponent from '../components/DataEntryComponent.vue'\nimport StudyView from '@/components/StudyView.vue';\nconst routes = [\n  { path: \"/\", redirect: \"/login\" },\n  { path: \"/login\", name: \"Login\", component: LoginComponent },\n  { path: \"/register\", name: \"Registration\", component: RegistrationComponent },\n  {\n    path: \"/dashboard\",\n    name: \"Dashboard\",\n    component: DashboardComponent,\n    children: [\n      { path: \"user-info\", name: \"UserInfo\", component: UserInfoComponent },\n      { path: \"create-study/:id?\", name: \"CreateStudy\", component: StudyCreationComponent, props: true, },\n      //{ path: \"create-form\", name: \"CreateForm\", component: CreateFormComponent },\n      { path: \"analytics\", name: \"Analytics\", component: AnalyticsComponent },\n    ],\n  },\n//  {\n//    path: \"/dashboard/view-yaml/:category/:fileName\",\n//    name: \"YamlViewer\",\n//    component: YamlViewerComponent,\n//    props: true,\n//  },\n  {\n    path: \"/dashboard/create-form-scratch\",\n    name: \"CreateFormScratch\",\n    component: ScratchFormComponent,\n  },\n  {\n    path: \"/studies/:id\",\n    name: \"StudyDetail\",\n    component: StudyDataEntryComponent,\n  },\n  {\n      path: \"/settings\",\n      name: \"StudySettings\",\n      component: StudySettings,\n    },\n    {\n    path: \"/shared/:token\",\n    name: \"SharedForm\",\n    component: StudyDataEntryComponent,\n  },\n  {\n      path: '/dashboard/studies/:id/view',\n      name: 'StudyView',\n      component: StudyView,\n      props: true,\n    },\n  {\n  path: \"/dashboard/study/:id/data\",\n  name: \"StudyDataDashboard\",\n  component: () => import(\"@/components/StudyDataDashboard.vue\"),\n  meta: { requiresAuth: true }\n},\n{\n  path: '/dashboard/import-study',\n  name: 'ImportStudy',\n  component: () => import('@/components/ImportStudy.vue'),\n  meta: { requiresAuth: true }\n}\n//  {\n//    path: \"/studies/:id\",\n//    name: \"StudyDataEntry\",\n//    component: StudyDataEntryComponent,\n//    props: route => ({ id: Number(route.params.id) })\n//  },\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes,\n});\n\nexport default router;\n","import { createStore } from \"vuex\";\nimport axios from \"axios\";\nimport createPersistedState from \"vuex-persistedstate\";\n\n// Same-origin by default (relative URLs). If VUE_APP_API_URL is set, we use it.\nconst envBase = (process.env.VUE_APP_API_URL || \"\").trim();\nconst API_BASE_URL = envBase ? envBase.replace(/\\/+$/, \"\") : \"\"; // \"\" + \"/users/...\" => same-origin\n\nconst store = createStore({\n  state: {\n    user: null,          // User object after login\n    token: null,         // JWT token after successful login\n    forms: [],           // Store all forms\n    currentForm: null,   // Store the currently selected form for editing/viewing\n    studyDetails: null,  // Store study details (used in study creation)\n  },\n  mutations: {\n    setUser(state, user) {\n      state.user = user;\n    },\n    setToken(state, token) {\n      state.token = token;\n    },\n    clearAuth(state) {\n      state.user = null;\n      state.token = null;\n      state.forms = [];\n      state.currentForm = null;\n      state.studyDetails = null;\n    },\n    setForms(state, forms) {\n      state.forms = forms;\n    },\n    setCurrentForm(state, form) {\n      state.currentForm = form;\n    },\n    setStudyDetails(state, payload) {\n      state.studyDetails = {\n        ...state.studyDetails,\n        ...payload\n      };\n    },\n    resetStudyDetails(state) {\n      state.studyDetails = {};\n    },\n  },\n  actions: {\n    // Login action\n    async login({ commit }, payload) {\n      console.log(\"Attempting login with payload:\", payload);\n      try {\n        const response = await axios.post(`${API_BASE_URL}/users/login`, payload);\n        console.log(\"Login successful, API response:\", response.data);\n        const { access_token } = response.data;\n        commit(\"setToken\", access_token);\n        console.log(\"access token:\", response.data.access_token);\n        localStorage.setItem(\"access_token\", response.data.access_token);\n\n        const userResponse = await axios.get(`${API_BASE_URL}/users/me`, {\n          headers: { Authorization: `Bearer ${access_token}` },\n        });\n        console.log(\"Fetched user data:\", userResponse.data);\n        commit(\"setUser\", userResponse.data);\n        return true;\n      } catch (error) {\n        console.error(\"Login failed, error from API:\", error.response?.data || error.message);\n        if (error.response?.status === 403) {\n          throw error;\n        }\n        return false;\n      }\n    },\n\n    // Register action\n    async register(_, payload) {\n      console.log(\"Registering user with payload:\", payload);\n      try {\n        await axios.post(`${API_BASE_URL}/users/register`, payload);\n        console.log(\"Registration successful\");\n        return true;\n      } catch (error) {\n        if (error.response?.status === 400) {\n          console.error(\"Registration failed: Duplicate username or email.\");\n          throw new Error(\"Username or email already exists. Please choose another.\");\n        }\n        console.error(\"Unexpected registration error:\", error.response?.data || error.message);\n        throw new Error(\"An unexpected error occurred during registration.\");\n      }\n    },\n\n    // Change password action\n    async changePassword({ state }, payload) {\n      console.log(\"Changing password:\", payload);\n      try {\n        const response = await axios.post(\n          `${API_BASE_URL}/users/change-password`,\n          {\n            username: state.user.username,\n            new_password: payload.newPassword,\n          },\n          {\n            headers: { Authorization: `Bearer ${state.token}` },\n          }\n        );\n        console.log(\"Password changed successfully:\", response.data);\n        return true;\n      } catch (error) {\n        console.error(\"Error changing password:\", error.response?.data || error.message);\n        return false;\n      }\n    },\n\n    // Fetch logged-in user data\n    async fetchUserData({ commit }) {\n      const token = localStorage.getItem(\"access_token\");\n      if (!token) {\n        console.warn(\"No token found in localStorage. Cannot fetch user data.\");\n        return false;\n      }\n      try {\n        const response = await axios.get(`${API_BASE_URL}/users/me`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        console.log(\"Fetched user data:\", response.data);\n        commit(\"setUser\", response.data);\n        return true;\n      } catch (error) {\n        console.error(\"Failed to fetch user data:\", error.response?.data || error.message);\n        return false;\n      }\n    },\n\n    // Logout action\n    logout({ commit }) {\n      console.log(\"Logging out...\");\n      commit(\"clearAuth\");\n      localStorage.removeItem(\"access_token\");\n    },\n\n    // Fetch all forms\n    async fetchForms({ commit, state }) {\n      try {\n        const response = await axios.get(`${API_BASE_URL}/forms`, {\n          headers: { Authorization: `Bearer ${state.token}` },\n        });\n        commit(\"setForms\", response.data);\n      } catch (error) {\n        console.error(\"Error fetching forms:\", error.response?.data || error.message);\n      }\n    },\n\n    // Fetch a specific form by ID\n    async fetchFormById({ commit, state }, id) {\n      try {\n        const response = await axios.get(`${API_BASE_URL}/forms/${id}`, {\n          headers: { Authorization: `Bearer ${state.token}` },\n        });\n        commit(\"setCurrentForm\", response.data);\n      } catch (error) {\n        console.error(\"Error fetching form:\", error.response?.data || error.message);\n      }\n    },\n\n    // Create a new form\n    async createForm({ state }, form) {\n      try {\n        await axios.post(`${API_BASE_URL}/forms`, form, {\n          headers: { Authorization: `Bearer ${state.token}` },\n        });\n      } catch (error) {\n        console.error(\"Error creating form:\", error.response?.data || error.message);\n      }\n    },\n\n    // Update an existing form\n    async updateForm({ state }, { id, form }) {\n      try {\n        await axios.put(`${API_BASE_URL}/forms/${id}`, form, {\n          headers: { Authorization: `Bearer ${state.token}` },\n        });\n      } catch (error) {\n        console.error(\"Error updating form:\", error.response?.data || error.message);\n      }\n    },\n\n    // Delete a form by ID\n    async deleteForm({ state }, id) {\n      try {\n        await axios.delete(`${API_BASE_URL}/forms/${id}`, {\n          headers: { Authorization: `Bearer ${state.token}` },\n        });\n      } catch (error) {\n        console.error(\"Error deleting form:\", error.response?.data || error.message);\n      }\n    },\n  },\n  getters: {\n    isAuthenticated: (state) => !!state.token,\n    getUser: (state) => state.user,\n    getForms: (state) => state.forms,\n    getCurrentForm: (state) => state.currentForm,\n    getStudyDetails: (state) => state.studyDetails,\n  },\n  plugins: [\n    createPersistedState({\n      key: \"myAppStudyDetails\",\n      paths: [\"studyDetails\"],\n      storage: window.localStorage,\n    }),\n  ],\n});\n\nexport default store;\n","// src/plugins/format-label.js\nexport function formatLabel(key) {\n  if (typeof key !== 'string') return ''\n  let s = key\n    .replace(/_/g, ' ')                     // underscores  spaces\n    .replace(/([a-z0-9])([A-Z])/g, '$1 $2') // camel/Pascal  spaced\n    .replace(/([A-Za-z])(\\d)/g, '$1 $2')    // word-digit boundary\n    .replace(/\\s+/g, ' ')                   // collapse spaces\n    .trim()\n  // Title Case each word\n  s = s.replace(/\\b\\w/g, c => c.toUpperCase())\n  return s\n}\nexport default {\n  install(app) {\n    app.config.globalProperties.$formatLabel = formatLabel\n    app.provide('formatLabel', formatLabel)\n  }\n}\n","// src/components/form/index.js\n\nimport BaseTextField   from './BaseTextField.vue'\nimport BaseTextarea    from './BaseTextarea.vue'\nimport BaseNumberField from './BaseNumberField.vue'\nimport BaseDateField   from './BaseDateField.vue'\nimport BaseSelectField from './BaseSelectField.vue'\n\nexport default {\n  install(app) {\n    app.component('BaseTextField',   BaseTextField)\n    app.component('BaseTextarea',    BaseTextarea)\n    app.component('BaseNumberField', BaseNumberField)\n    app.component('BaseDateField',   BaseDateField)\n    app.component('BaseSelectField', BaseSelectField)\n  }\n}\n","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\nimport \"./assets/styles/_base.scss\";\nimport formatLabelPlugin from './plugins/format-label'\nimport FormFieldsPlugin  from './components/forms'\n\ncreateApp(App).use(router).use(store).use(formatLabelPlugin).use(FormFieldsPlugin).mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"442\":\"cb7663e9\",\"535\":\"63d468b2\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"css/\" + chunkId + \".\" + {\"442\":\"1d78b952\",\"535\":\"67da4199\"}[chunkId] + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"ecrf_frontend:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","if (typeof document === \"undefined\") return;\nvar createStylesheet = function(chunkId, fullhref, oldTag, resolve, reject) {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tif (__webpack_require__.nc) {\n\t\tlinkTag.nonce = __webpack_require__.nc;\n\t}\n\tvar onLinkComplete = function(event) {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && event.type;\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + errorType + \": \" + realHref + \")\");\n\t\t\terr.name = \"ChunkLoadError\";\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tif (linkTag.parentNode) linkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = function(href, fullhref) {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = function(chunkId) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t524: 0\n};\n\n__webpack_require__.f.miniCss = function(chunkId, promises) {\n\tvar cssChunks = {\"442\":1,\"535\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(function() {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, function(e) {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr\n\n// no prefetching\n\n// no preloaded","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkecrf_frontend\"] = self[\"webpackChunkecrf_frontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(6754); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["edit","add","copy","delete","toggleUp","toggleDown","back","prev","next","cog","book","user","arrowLeft","share","export","info","demographicinformation","contactinformation","reproductivehealth","presentingcomplaint","vitalsignsandmeasurements","physicalexamination","medicalhistory","familyhistory","socialhistory","allergies","immunizationhistory","medications","laboratorytestshematology","laboratorytestsbiochemistry","laboratorytestsurinalysis","imaging","diagnosis","treatmentplan","adverseevents","outcomeandfollowup","additionalinformation","clock","paperclip","link","trash","infoCircle","minus","pen","cogs","exchangeAlt","toggleOn","toggleOff","check","times","id","_createElementBlock","_hoisted_1","_createVNode","_component_router_view","name","__exports__","render","class","_createElementVNode","_hoisted_2","src","_imports_0","alt","onSubmit","_cache","_withModifiers","args","$options","handleLogin","_hoisted_3","for","type","$data","username","$event","placeholder","_hoisted_4","_hoisted_5","showPassword","password","onClick","togglePasswordVisibility","_component_router_link","to","error","_hoisted_7","_toDisplayString","data","methods","this","console","log","success","$store","dispatch","$router","push","response","status","detail","handleRegistration","_normalizeClass","errors","first_name","last_name","email","confirm_password","message","_hoisted_6","goToLogin","validatePassword","passwordRegex","test","handleValidation","trim","Object","values","some","hasError","setTimeout","err","title","userName","role","logout","collapsed","sidebarCollapsed","toggleSidebar","isAdmin","isPI","isInvestigator","setActiveSection","icons","navigate","_hoisted_8","expanded","_ctx","$route","activeSection","_hoisted_9","showStudyOptions","_hoisted_10","actionStyle","_hoisted_11","toggleStudyOptions","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_Fragment","_renderList","studies","study","key","study_name","study_description","formatDateTime","created_at","updated_at","_hoisted_17","addData","_hoisted_18","viewStudy","_hoisted_19","watch","val","loadStudies","computed","currentUser","getters","getUser","profile","p","firstLast","filter","Boolean","join","full_name","section","query","openStudies","token","state","alert","axios","get","headers","Authorization","JSON","stringify","e","d","Date","toLocaleString","year","month","day","hour","minute","second","editStudy","localStorage","removeItem","resp","sd","content","study_data","meta","metadata","assignments","Array","isArray","length","selectedModels","warn","m","v","visits","g","groups","from","studyInfo","description","created_by","commit","study_metadata","subjectCount","assignmentMethod","subjects","forms","sections","map","model","fields","source","scratchForms","setItem","params","mounted","path","visibleTabs","tab","active","currentTab","label","_component_StudySettings","handleChangePassword","newPassword","required","confirmPassword","passwordMessage","passwordError","handleCreateUser","newUser","_hoisted_20","roles","r","value","_hoisted_21","userMgmtMessage","_hoisted_22","userMgmtError","_hoisted_23","_hoisted_24","users","u","onChange","onInitiateRoleChange","target","_hoisted_26","showRoleDialog","_hoisted_27","_hoisted_28","pendingUser","pendingRole","_hoisted_29","confirmRoleChange","cancelRoleChange","saveSettings","settings","weightFormat","heightFormat","temperatureFormat","distanceUnit","liquidUnit","dateFormat","timezone","timezones","tz","locale","autoSaveInterval","min","number","notifications","sms","uiTheme","restoreDefaults","cancelSettings","saveMessage","saveError","defaultSettings","userId","created","fetchTimezones","fetchUserSettings","$watch","newVal","fetch","json","ok","statusText","method","body","components","StudySettings","userFromStore","tabs","fetchUsers","pw","post","newRole","patch","goBack","showMatrix","activeTab","dataModels","openModelDialog","modelIcon","prettyModelTitle","generalFields","field","addFieldToActiveSection","icon","fieldIcon","_component_ShaclComponents","shaclComponents","_hoisted_42","_component_ProtocolMatrix","onAssignmentUpdated","onEditTemplate","editTemplate","currentForm","si","onSectionClick","ref","openInputDialog","editSection","addNewSectionBelow","confirmDeleteSection","toggleSection","_hoisted_25","fi","_component_FieldCheckbox","editField","addSimilarField","removeField","openConstraintsDialog","_hoisted_34","constraints","rows","max","step","onInput","enforceNumberDigitLimits","onBlur","_createBlock","_component_DateFormatPicker","format","minDate","maxDate","_component_FieldTime","_mergeProps","hourCycle","disabled","options","opt","_component_FieldRadioGroup","mode","_component_FieldSlider","readonly","percent","marks","_component_FieldLinearScale","leftLabel","rightLabel","_component_FieldFileUpload","stage","_hoisted_39","helpText","_hoisted_41","_hoisted_43","addNewSection","confirmClearForm","saveForm","downloadFormData","openUploadDialog","handleProtocolClick","showModelDialog","_hoisted_44","_hoisted_45","currentModel","_hoisted_46","prop","i","_hoisted_47","_hoisted_48","_hoisted_49","selectedProps","_hoisted_51","takeoverModel","showConstraintsDialog","_hoisted_52","_component_FieldConstraintsDialog","currentFieldType","constraintsForm","onUpdateConstraints","confirmConstraintsDialog","onCloseConstraintsDialog","cancelConstraintsDialog","onShowGenericDialog","openGenericDialog","showPreviewDialog","_hoisted_53","_hoisted_54","_component_FormPreview","form","_hoisted_55","closePreviewDialog","showUploadDialog","_hoisted_56","_hoisted_57","handleFileChange","accept","_hoisted_58","closeUploadDialog","showInputDialog","_hoisted_59","_hoisted_60","inputDialogMessage","inputDialogValue","_hoisted_61","confirmInputDialog","cancelInputDialog","showConfirmDialog","_hoisted_62","_hoisted_63","confirmDialogMessage","_hoisted_64","confirmDialogYes","closeConfirmDialog","showGenericDialog","_hoisted_65","_hoisted_66","genericDialogMessage","closeGenericDialog","$setup","loading","filteredShapeIRIs","iri","index","openDialog","getClassName","dialogStack","dialog","dIndex","style","_normalizeStyle","zIndex","cancelDialog","group","gIndex","formatGroupName","properties","pIndex","datatype","option","editReferenceField","classRef","openDeleteDialog","openEditFieldDialog","saveReference","editFieldDialog","cancelEditFieldDialog","newName","saveEditedFieldName","deleteFieldDialog","cancelDeleteDialog","fieldName","confirmDelete","async","readRDF","file_url","url","res","formats","indexOf","code","Error","quadStream","namedNode","DataFactory","namespace","baseIRI","Proxy","_","SHACL","RDF","XSD","toCURIE","IRI","prefixes","return_type","longToShort","sort","a","b","prefix","objectFlip","property","substring","toIRI","CURIE","parts","split","pref","keys","obj","reduce","ret","literal","RdfDataset","constructor","serializedGraph","graphLoaded","prefixesLoaded","graph","createDataset","_eventTarget","EventTarget","addEventListener","listener","removeEventListener","dispatchEvent","event","Store","loadRDF","beforeLoadFn","result","on","ns","onPrefixFn","quad","onDataFn","onDataEndFn","onPrefixEndFn","CustomEvent","addQuad","serializeGraph","Promise","resolve","reject","writer","Writer","addQuads","getQuads","end","isRdfList","node","hasFirst","hasRest","forEach","predicate","first","rest","rdfListToArray","startNode","listItems","currentNode","nil","listItem","object","termType","resolveBlankNode","restQuads","blankNode","resolvedObject","getLiteralAndNamedNodes","propertyClass","propClassCurie","literalQuads","String","anyURI","uriQuads","concat","getSubjectTriples","someTerm","getObjectTriples","ShapesDataset","super","propertyGroups","nodeShapes","nodeShapeNames","nodeShapeNamesArray","nodeShapeIRIs","subject","NodeShape","PropertyGroup","entries","new_node","getPropertyNodeKind","class_uri","property_uri","id_uri","nodeShape","propertyShapes","propertyShape","find","nodeFunc","dt","hasOwnProperty","nodeKind","Literal","BlankNode","BlankNodeOrIRI","shClass","associatedNodeShape","hasIdField","in","or","every","emits","setup","config","showOnlyClassesWithId","uri","pop","extractLastSegment","lastSegment","includes","extracted","getOrder","order","undefined","Infinity","n","parseInt","isNaN","groupValue","shape","hasId","match","toLowerCase","endsWith","dataTypeMapping","parentInfo","record","groupsObj","groupVal","groupKeys","localeCompare","groupsArray","sortedProps","slice","idx","nameValue","pathValue","fieldType","datatypeURI","dialogData","groupIndex","propertyIndex","currentDialog","currentIndex","parentDialogIndex","fieldLocation","splice","deleteField","childDialog","parentDialog","closeDialog","onMounted","shapesDS","fileUrl","catch","showInfo","visitList","prevVisit","currentVisitIndex","nextVisit","rowspan","visit","vIdx","colspan","groupList","gIdx","$props","mIdx","checked","onToggle","showPreviewModal","prevPreviewVisit","previewVisitIndex","nextPreviewVisit","prevPreviewGroup","previewGroupPos","_hoisted_30","_hoisted_31","_hoisted_32","assignedGroups","nextPreviewGroup","_hoisted_33","previewForm","_hoisted_35","closePreview","_component_CustomDialog","dialogMessage","isVisible","showDialog","onClose","_hoisted_36","_hoisted_37","_hoisted_38","showEmptyVisitsModal","_hoisted_40","emptyVisitIndices","goToFirstEmptyVisit","isSavingInProgress","saveAnyway","closeEmptyVisitsModal","showConfirmChanges","_hoisted_50","snapshotFrom","snapshotTo","_component_TemplateDiffView","cancelConfirm","confirmAndSave","$emit","saveStudy","openPreview","hasAssignment","goToSaved","formName","sIndex","expandedSections","fIndex","_component_BaseTextField","_component_BaseTextarea","_component_BaseNumberField","_component_BaseDateField","_component_BaseSelectField","item","modelValue","pattern","maxlength","_renderSlot","$slots","props","default","Number","valueAsNumber","BaseTextField","BaseTextarea","BaseNumberField","BaseDateField","BaseSelectField","initializeSections","handler","immediate","deep","emit","diff","any","changes","c","showAny","added","removed","renamed","changed","chg","f","models","assign","turnedOn","turnedOff","toggles","t","deepClone","o","parse","asName","normalizeNameList","arr","list","it","canon","eq","ca","cb","normalizeSubjects","s","toString","assignment","normalizeModels","normalizeSnapshot","snap","st","levenshtein","dp","fill","j","cost","Math","similarity","L","mapBy","keyFn","Map","x","set","diffListByName","oldList","newList","getName","oldNames","newNames","oldSet","Set","newSet","has","stillAdded","stillRemoved","usedAdded","best","score","sc","toFixed","oldByName","newByName","nm","local","k","ov","nv","primO","primN","replace","toUpperCase","diffMetadata","oldSnap","newSnap","pairs","diffSubjects","oldSubs","newSubs","oldNorm","newNorm","oldIds","newIds","oldById","newById","reassigned","og","ng","diffModelsMeta","oldModels","newModels","diffModelAssignments","oldAssign","newAssign","visitsOld","visitsNew","groupsOld","groupsNew","oldIdx","newIdx","vOld","vNew","gOld","gNew","off","mNew","mOld","vMax","gMaxOld","gMaxNew","gMax","before","after","computeTemplateDiff","fromRaw","toRaw","modelsMeta","modelsAssign","groupsStructural","visitsStructural","modelsMetaStructural","assignmentsStructural","anyStructural","buildVersionSummary","plural","w","addCounts","segs","subs","subsSeg","compact","FormPreview","CustomDialog","TemplateDiffView","router","useRouter","store","useStore","isEditing","studyDetails","previewGroupIndex","baseline","hasAnyData","groupsForVisit","setFirstGroup","visitName","groupName","hasAssignmentInVisit","computeEmptyVisits","empties","realVisitsCount","buildSnapshotFromBaseline","base","buildSnapshotFromCurrent","loadBaselineFromServer","studyId","payload","studyData","loadHasAnyData","fromSnap","toSnap","shouldPrompt","saveStudyImpl","showDialogMessage","existingMeta","study_content","updatedMetadata","updatedStudyData","all","currentTypeLabel","isSlider","isCheckbox","isFile","isTime","isDate","isChoice","allowMultiple","defaultValue","localOptions","isRadio","chipInput","onKeydown","_withKeys","addChip","removeChip","isTextLike","isNumber","defaultError","minLength","maxLength","transform","integerOnly","minDigits","maxDigits","minTime","maxTime","DATE_FORMATS","fmt","allowedFormatsText","maxSizeMB","storagePreference","allowMultipleFiles","allModalities","mod","modalities","builtInSet","removeCustomModByName","customMod","addCustomMod","markEditValue","useMin","useMax","useStep","markEditLabel","addOrUpdateMark","marksSorted","removeMark","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","linearCount","LINEAR_MAX","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","optionsCount","syncOptionsCount","_hoisted_77","addOption","removeLastOption","_hoisted_78","_hoisted_79","_hoisted_80","deleteOption","_hoisted_82","isSelect","_hoisted_83","_hoisted_84","_hoisted_85","save","isSaveDisabled","_hoisted_86","clearToInitial","coerceDefaultForType","isFinite","normalizeConstraints","raw","maxLengthDigits","round","normalizeMarks","byVal","COMMON_SLIDER","allowed","cleanedSlider","sp","allowedFormats","mods","cleanedFile","COMMON","TEXTLIKE","NUMBER","DATE","TIME","cleaned","isInteger","isReadonly","_component_VueDatePicker","innerValue","emitChange","resolvedFormat","dateMinResolved","dateMaxResolved","teleport","isMonthPicker","isYearPicker","clearable","$attrs","VueDatePicker","inheritAttrs","isTrue","resolveDate","input","kind","normalizeBoundary","parseByFormat","dateObj","y","getFullYear","getMonth","str","exec","tabindex","toggleOpen","displayValue","placeholderText","menuOpen","onMousedown","stepHour","is12h","uiHour","stepMinute","uiMinute","ap","apply","close","setNow","boundText","isRequired","parseToDate","to12","to24","syncPanelFromValue","hasValue","norm","normalizeHHMM","eff","effectiveDefault","document","onDocDown","beforeUnmount","$el","contains","pad2","padStart","nowHHMM","getHours","getMinutes","hasProp","prototype","call","hasAttr","hh","mm","setHours","h","currentSelectionToDate","clampToBounds","delta","BIDS_MODALITIES","freeze","DateFormatPicker","FieldTime","_initialSnapshot","initialOptions","charAt","dv","extras","lbl","findIndex","count","exists","parseAllowedFormats","text","parsedFormats","opts","finalOpts","LIM","linMin","linMax","proxy","onMaybeBlock","onWheel","attrRO","attrDisabled","attrReq","enforceRules","preventDefault","stopPropagation","initial","isUnset","stringOptions","proxyArray","onToggleMulti","proxySingle","onSelectSingle","attrReadonly","initFromDefaults","cur","pickSingleDefault","pickMultiDefault","force","displayValueText","onTrackClick","rangeValue","dragging","onMouseup","onTouchstart","onTouchend","hasMarks","normalizedMarks","left","markPercent","internalValue","toNumberOrNull","seen","out","snapWithinBounds","clampSnap","snapped","evt","wrap","$refs","range","rect","getBoundingClientRect","clientX","touches","rel","width","guess","points","onPick","onKey","safeMin","safeMax","M","capped","invalid","acceptAttr","multiple","isMultiple","onFilePicked","triggerPick","attachLabel","singleLocal","humanSize","size","clearValue","isBuilderStage","localItems","lastModified","removeLocalAt","urlPlaceholder","localUrl","addUrl","urlItems","truncate","removeUrlAt","displayedUrl","onUrlInput","onUrlBlur","KB","MB","DEFAULT_ALLOWED","DEFAULT_MAX_MB","flag","effectiveMaxSizeMB","effectiveAllowedFormats","fileInput","click","fileList","files","accepted","file","matchesAccept","newMetas","current","existingKeys","parsed","URL","protocol","localIdxs","toRemove","urlIdxs","bytes","accepts","mime","checks","startsWith","ShaclComponents","ProtocolMatrix","FieldConstraintsDialog","FieldCheckbox","FieldRadioGroup","FieldSlider","FieldLinearScale","FieldFileUpload","getItem","currentFormIndex","confirmCallback","genericCallback","currentFieldIndices","inputDialogCallback","sec","adjustAssignments","stored","loadDataModels","$formatLabel","focusSection","openConfirmDialog","msg","def","old","fresh","mi","vi","gi","$nextTick","el","scrollIntoView","behavior","block","chosen","insertAt","now","provided","fallbackMod","prevLabel","prevTrim","sectionIndex","fieldIndex","digits","trimmed","clone","originalType","fallback","coerced","fileKeys","extra","blob","Blob","createObjectURL","createElement","href","download","revokeObjectURL","reader","FileReader","onload","pd","readAsText","doc","yaml","classes","cls","attributes","attr","resolveType","enum","ui","widget","isShared","showSelection","goToDashboard","backToSelection","numberOfSubjects","sharedPermission","toggleDetails","showDetails","openShareDialog","currentSubjectIndex","currentGroupIndex","studyInfoEntries","matrixReady","selectedVisitIndex","selectedVersion","openStatusLegend","visitLoading","fluid","isFluidMatrix","subjectColStyle","displayedVisitIndices","visitColStyle","sIdx","statusClassFast","selectCell","openLegendDialog","help","assignedModelIndices","fIdx","fieldId","hasConstraints","openConstraintDialog","entryData","canEdit","minlength","onFieldBlur","clearError","validateField","onUpdate:modelValue","timeFormat","_component_FieldSelect","getSliderProps","getLinearProps","setEntryValue","onFileSelected","onRawFileSelected","fieldErrors","isFieldSkipped","submitData","blockingErrorsPresent","clearCurrentSection","showShareDialog","shareParams","subjectIndex","visitIndex","shareConfig","permission","maxUses","expiresInDays","createShareLink","generatedLink","permissionError","showConstraintDialog","closeConstraintDialog","constraintDialogFieldName","constraintDialogItems","line","showLegendDialog","closeLegendDialog","showStatusLegend","closeStatusLegend","showSkipDialog","skipCandidates","sectionTitle","fieldLabel","skipSelections","jumpToField","confirmSkipSelection","cancelSkipSelection","allowClear","hasAnySelection","clearSelection","optionSet","asArray","rxTime","parseDateByFormat","timeToSeconds","se","digitsCountOfNumber","fileMetaMatchesAccept","filename","contentType","urlMatchesAccept","urlStr","pathname","createAjv","ajv","Ajv","allErrors","addFormat","rx","maxDigitsValidate","keyword","limit","addKeyword","metaSchema","minimum","validate","minDigitsValidate","minTimeValidate","maxTimeValidate","timeStepValidate","stepSeconds","minDateByFormatValidate","schemaObj","additionalProperties","maxDateByFormatValidate","stepAlignValidate","abs","EPS","fileMatchesAcceptValidate","items","urlMatchesAcceptValidate","maxFileBytesValidate","sz","buildSchemaForField","fieldDef","schema","maximum","uniqueItems","minDateByFormat","maxDateByFormat","timeStep","stepAlign","maxBytes","urlSchema","const","localBaseProps","anyOf","localSchemaFlat","fileMatchesAccept","maxFileBytes","localSchemaNested","oneOf","validateFieldValue","valid","compile","FieldSelect","VISIT_THRESHOLD","FLUID_VISIT_MAX","statusMap","assignedLookup","subjectToGroupIdx","skipFlags","validationErrors","existingEntries","entryIds","pendingFiles","shareToken","studyVersions","templateCache","entriesIndex","hydrateCache","pct","maxWidth","minWidth","parseKey","isSkipped","loadShared","loadStudy","loadVersions","version","loadTemplateForSelectedVersion","loadExistingEntries","applyVersionView","prepareAssignmentsLookup","prepareSubjectGroupIndexMap","buildStatusCache","rebuildEntriesIndex","safeVersionParams","mergeStudyDataFromTemplate","incoming","merged","applyTemplateSchema","normalized","initializeEntryData","cached","rawSchema","onVersionChange","clear","then","nS","nV","subject_index","visit_index","group_index","form_version","getBestEntryFor","vIndices","hydrateCell","sectionDictKey","sectionObj","fieldDictKey","fieldObj","fallbackIndex","arrayToDict","sectionFieldArray","sKey","row","inner","fKey","defaultForField","flagsArrayToDict","flagsArr","dictToArray","dataDict","makeSectionFieldSkeleton","makeSkipSkeleton","ensureSlot","cacheKey","dataArr","storedSkips","skipped_required_flags","skips","setDeepValue","ff","setDeepSkip","errorKey","fileOrFiles","showTicks","buildConstraintList","storage","allowedList","sizeNum","applyTransform","cons","transformed","applyTransformsForSection","setError","ignoreDefaults","allowMulti","nG","flags","hasSkip","assigned","total","filled","secObj","vv","setSkipForField","allowMultiFiles","isEmpty","md","xd","toSec","secs","validateCurrentSection","computeRequiredFailures","empty","uploadPendingFilesForCurrentSection","modalitiesJson","pendingArr","matchFile","dbId","fd","FormData","append","saved","file_path","storage_option","file_name","File","blocking","requiredFailures","acc","dictData","rawSkipFlags","flagsPayload","study_id","toISOString","updateStatusCacheFor","existingId","put","newId","getElementById","focus","max_uses","expires_in_days","studySchema","display","fieldError","goToStudyManagement","validateStudy","_component_GroupForm","groupSchema","groupData","checkGroups","_component_SubjectForm","checkSubjectsSetup","_component_SubjectAssignmentForm","subjectData","checkSubjectsAssigned","_component_VisitForm","visitSchema","visitData","checkVisits","togglePanel","panelErrors","activePanels","_resolveDynamicComponent","fieldComponent","resizeGroups","fromEntries","sum","resizeVisits","updateCount","updateMethod","groupNames","rowIndex","colIndex","emitSubjects","GroupForm","VisitForm","SubjectForm","SubjectAssignmentForm","route","useRoute","formatLabel","inject","showStudyErrors","loadYaml","schemaRef","attrs","skip","initializeAssignments","hasMissing","typeField","skipConfig","selected","hasErrors","editId","N","currentCount","additionalSubjects","floor","random","G","rem","cnt","grp","handleAssignmentUpdated","details","goBackToDashboard","studyMeta","created_by_display","studyKVEntries","entry","prettyLabel","formatAny","objectEntriesFiltered","assignmentSize","isPIOrAdmin","subjectAssignments","scope","subjectId","versionsLoading","versions","canShowVersionDetails","versionDiffs","summary","versionSchemas","canEditStudy","studyLevelFiles","prettyBytes","docPathTooltip","_hoisted_81","docRelativePath","attachTempValue","uploading","onAttachTempChange","onFilesSelected","_hoisted_87","_hoisted_88","removePending","_hoisted_89","_hoisted_91","saveStudyAttachments","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","canManageAccess","_hoisted_97","_hoisted_98","_hoisted_99","created_by_email","_hoisted_100","accessList","user_id","_hoisted_101","display_name","prettyGrantRole","permissions","view","add_data","edit_study","granted_by_display","granted_by","_hoisted_102","revokeBusy","openRevokeDialog","_hoisted_103","_hoisted_104","_hoisted_105","confirm","visible","cancelRevoke","_hoisted_106","_hoisted_107","_hoisted_108","confirmRevoke","_hoisted_109","_hoisted_110","_hoisted_111","_hoisted_112","selectedUserId","grantableUsers","userDisplay","_hoisted_113","allUsers","_hoisted_114","_hoisted_115","permissionPreset","_hoisted_116","granting","grantAccess","_hoisted_117","_hoisted_118","_hoisted_119","_component_StudyAuditLogs","activateSubjectsTab","subjectIds","sid","activeSubject","selectSubject","displaySubject","subjectCounts","search","debouncedFilter","refreshAll","visibleRows","fmtTs","timestamp","action","resolvedSubject","resolvedVisit","summaryText","toggleRaw","__showRaw","safeDetail","nameCache","timerId","authHeaders","studyRows","subjectRows","applySearch","normalizeRow","primeUsers","counts","getSubjectIdFromRow","withSubject","subject_id","ts","pid","participant_id","vn","visit_name","getTime","getTimezoneOffset","part","subj","loc","exp","target_user_display","target_user_email","target_user_id","$forceUpdate","clearTimeout","qRaw","q","userIds","unique","missing","$set","StudyAuditLogs","created_by_id","me","allFiles","myRoleRaw","myRole","isOwner","meId","grantedIds","goViewData","ensureAccessData","makeDatasetFolder","studyName","alnum","slug","folder","fname","scrollToTop","window","scrollTo","top","scrollTop","units","pow","fetchMe","fetchUserNameById","fetchStudy","createdByDisplay","created_by_name","created_by_full_name","created_by_username","resolved","fetchStudyFiles","fetchVersionsAndDiffs","schemas","diffs","ver","fetchAccessList","fetchAllUsers","user_email","user_display","revokeAccess","existing","querySelector","beforeRouteEnter","vm","beforeRouteUpdate","finally","routes","redirect","component","LoginComponent","RegistrationComponent","DashboardComponent","children","UserInfoComponent","StudyCreationComponent","AnalyticsComponent","ScratchFormComponent","StudyDataEntryComponent","StudyView","requiresAuth","createRouter","history","createWebHistory","envBase","process","VUE_APP_API_URL","API_BASE_URL","createStore","mutations","setUser","setToken","clearAuth","setForms","setCurrentForm","setStudyDetails","resetStudyDetails","actions","login","access_token","userResponse","register","changePassword","new_password","fetchUserData","fetchForms","fetchFormById","createForm","updateForm","deleteForm","isAuthenticated","getForms","getCurrentForm","getStudyDetails","plugins","createPersistedState","paths","install","app","globalProperties","provide","createApp","App","use","formatLabelPlugin","FormFieldsPlugin","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","fulfilled","getter","__esModule","definition","defineProperty","enumerable","chunkId","promises","miniCssF","globalThis","Function","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","onerror","timeout","doneFns","parentNode","removeChild","bind","head","appendChild","Symbol","toStringTag","createStylesheet","fullhref","oldTag","linkTag","nonce","onLinkComplete","errorType","realHref","request","insertBefore","nextSibling","findStylesheet","existingLinkTags","tag","dataHref","existingStyleTags","loadStylesheet","installedCssChunks","miniCss","cssChunks","installedChunks","installedChunkData","promise","loadingEnded","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}